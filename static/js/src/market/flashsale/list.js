function getSearch(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),e=decodeURIComponent(window.location.search).substr(1).match(a);return null!=e?e[2]:null}function MarketList(t,a,e){this.url=t,this.tpl=a||Handlebars.compile($("#listTpl").html()),this.element=e||$("#list"),this.page=getSearch("page")||1}var CONFIG={dev:{domain:$(".header-container").data("coupon")}};$(document).ajaxStart(function(){$(".ajax-loading-backdrop").show()}).ajaxStop(function(){$(".ajax-loading-backdrop").hide()}),$.ajaxSetup({cache:!1}),MarketList.prototype.getList=function(t){var a=this,e=t||{page:a.page,size:10};$.ajax({url:a.url,type:"GET",dataType:"json",data:e,success:function(t){if(0==t.code)return void alert(t.msg);var n=t.data.list;n&&0!=n.length?(a.element.html(a.tpl(n)),a.renderPages(parseInt(t.data.total),10,e.page)):(a.element.html('<tr colspan="4"><td colspan="4">没有内容</td></tr>'),a.renderPages(1,1,1)),$("#activeFlash").val(t.data.active_id)},error:function(t){console.log(t)}})},MarketList.prototype.renderPages=function(t,a,e){$("#pagination-container").pagination({dataSource:new Array(t),pageSize:a,showGoInput:!0,showGoButton:!0,pageNumber:e,afterPageOnClick:function(t,a){location.href="?page="+a.trim()},afterPreviousOnClick:function(t,a){location.href="?page="+a.trim()},afterNextOnClick:function(t,a){location.href="?page="+a.trim()},afterGoButtonOnClick:function(t,a){var e=a.trim();""!=e&&(location.href="?page="+e)},callback:function(){}})};var list=new MarketList("/api/internal/sas/seckill/list");list.getList(),$("#search").click(function(){var t={page:1,size:10},a=$("#id").val().trim(),e=$("#name").val().trim();""!=a&&(t.id=a),""!=e&&(t.name=e),list.getList(t)}),$(".save").click(function(){return""==$("#activeFlash").val().trim()?(alert("生效秒杀组不能为空"),!1):void $.ajax({url:"/api/internal/sas/seckill/config",dataType:"json",data:{id:$("#activeFlash").val()},success:function(t){return alert(t.msg),1!=t.code?!1:void location.reload()},error:function(t){console.log(t)}})});