Vue.config.delimiters=["${","}"],Vue.config.unsafeDelimiters=["{!!","!!}"];var options={title:{text:"数据 + 时间坐标轴"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1}},series:[{name:"数量",type:"line",showSymbol:!1,hoverAnimation:!1,data:[]}]};vue=new Vue({el:"html",data:{dateFrom:"",dateTo:"",client_version:[],clientversions:[],platform:[],channel:"",event_name:"",associate:[],property:[],allpros:[],reports:[],loading:!1},methods:{eventAssociate:function(){var t=this;$.ajax({url:"/eventSearch/associate",type:"post",dataType:"json",data:{snap:t.event_name},success:function(e){console.log(e.data),t.associate=e.data}})},choseE:function(t){this.event_name=t.event_name,this.associate=[],this.property=[],this.getProperty()},addpro:function(){var t=this;if(this.event_name){var e={preproty:{},opt:"",val:""};t.property.push(e),t.getProperty()}else alert("请输入事件名")},removepro:function(t){this.property.splice(t,1)},getProperty:function(){var t=this;$.ajax({url:"/eventSearch/getProperty",type:"post",dataType:"json",data:{event_name:t.event_name},success:function(e){t.allpros=e.data}})},getClient:function(){var t=this;$.ajax({url:"/eventSearch/getClient",type:"post",dataType:"json",success:function(e){t.clientversions=e.data}})},gosearch:function(){var t=this,e={dateFrom:this.dateFrom,dateTo:this.dateTo,client_version:this.client_version.join("','"),channel:this.channel,platform:this.platform.join("','"),event_name:this.event_name,property:JSON.stringify(this.property)};this.dateFrom&&this.dateTo?(t.loading=!0,$.ajax({url:"/eventSearch/ssr",type:"post",dataType:"json",data:e,success:function(e){t.loading=!1,console.log(e.sql),t.reports=e.data;var n=[];t.reports.forEach(function(t){n.push({name:t.count,value:[t.date,parseInt(t.count)]})}),options.series[0].data=n,t.setOption(".result.ss",options)}})):alert("请输入开始结束时间!")},setOption:function(t,e){setTimeout(function(){echarts.init(document.querySelector(t)).setOption(e)},1e3)}},created:function(){this.getClient()}});