$(function(){function t(t,n,c,r){var t=t||1;$.ajax({type:"GET",url:APIHOST+"/coupon/bindRecord",async:!1,data:{page:t,size:10,activity_name:c},dataType:"json",success:function(t){e=t.data,i=template("couponListTpl",t.data),$("#couponList-container").html(i),o=t.data.total,r&&a()}})}function a(){$("#pagination-container").pagination({dataSource:new Array(Number(o)),pageNumber:1,pageSize:10,callback:function(){},afterPageOnClick:function(a,n){t(n)},afterPreviousOnClick:function(a,n){t(n)},afterNextOnClick:function(a,n){t(n)}})}function n(){for(var t=this,a=0;a<$(".cursor").length;a++)this!==$(".cursor")[a]&&($(".cursor")[a].flag=-1);this.flag*=-1,e.list.sort(function(a,n){var e=a[t.getAttribute("key")],i=n[t.getAttribute("key")];return isNaN(e)||isNaN(i)?e.localeCompare(i)*t.flag:(parseFloat(e)-parseFloat(i))*t.flag}),i=template("couponListTpl",e),$("#couponList-container").html(i)}{var e,i,c=!1,o=100,r=document.getElementsByClassName("table")[0];r.tBodies[0]}t(),c||a();for(var s=0;s<$(".cursor").length;s++)$(".cursor")[s].flag=-1;$(".cursor").click(function(){n.call(this)}),$(document).on("click",".goDetails",function(){var t=e.list[$(this).data("index")],a=["activity_name","coupon_id_list","desc","customer_id_list","origin_total","success_total"];a.forEach(function(a){document.getElementById(a).innerText=t[a]})}),$(document).on("click","#searchBtn",function(){var a=$("#searchActivityId").val(),n=$("#searchActivityName").val();t(1,a,n,!0)})});