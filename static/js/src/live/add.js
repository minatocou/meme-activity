$.ajaxSetup({cache:!1}),$(document).ajaxStart(function(){$(".ajax-loading-backdrop").show()}).ajaxStop(function(){$(".ajax-loading-backdrop").hide()}),$(document).ready(function(){function e(e){return $.trim(e.bgUrl)?$.trim(e.title)?$.trim(e.pwd)?$.trim(e.info)?$.trim(e.avatar)?$.trim(e.name)?$.trim(e.preStart)?$.trim(e.shareImg)?$.trim(e.shareTitle)?$.trim(e.shareDesc)?e.title.length>20?(alert("直播间名称长度不超过20!"),void $(".saveLive").removeClass("disable")):e.info.length>50?(alert("直播间简介长度不超过50!"),void $(".saveLive").removeClass("disable")):e.name.length>15?(alert("请填写主播名称长度不超过15!"),void $(".saveLive").removeClass("disable")):e.shareTitle.length>20?(alert("分享名称长度不超过20!"),void $(".saveLive").removeClass("disable")):e.shareDesc.length>30?(alert("分享描述长度不超过30!"),void $(".saveLive").removeClass("disable")):!0:(alert("请填写分享描述!"),void $(".saveLive").removeClass("disable")):(alert("请填写分享名称!"),void $(".saveLive").removeClass("disable")):(alert("请上传分享图片!"),void $(".saveLive").removeClass("disable")):(alert("请选择预计开始时间!"),void $(".saveLive").removeClass("disable")):(alert("请填写主播名称!"),void $(".saveLive").removeClass("disable")):(alert("请上传主播头像!"),void $(".saveLive").removeClass("disable")):(alert("请填写直播间简介!"),void $(".saveLive").removeClass("disable")):(alert("请填写直播间密码!"),void $(".saveLive").removeClass("disable")):(alert("请填写直播间名称!"),void $(".saveLive").removeClass("disable")):(alert("请上传直播间背景图片!"),void $(".saveLive").removeClass("disable"))}var a=function(){$("input[name=preStart]").datetimepicker({format:"Y/m/d H:i"})};a(),$.fn.serializeObject=function(){var e={},a=this.serializeArray();return $.each(a,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$(".liveForm").on("click",".close-btn",function(){$(this).parents(".uploadImgBox").find(".imgBox").removeClass("showImg"),$(this).parents(".uploadImgBox").find(".imgInput").val(""),$(this).parents(".uploadImgBox").find(".imgUrl").attr("src","")}),$(".liveCon").on("click",".saveLive",function(){if(!$(this).hasClass("disable")){$(this).addClass("disable");var a=$(".liveForm").serializeObject();e(a)&&$.ajax({type:"post",dataType:"json",url:"/api/internal/sas/live/save",data:a,success:function(e){1==e.code?(alert(e.msg),window.location.href="/live/edit/"+e.data.liveRoomId):0==e.code&&alert(e.msg),$(".saveLive").removeClass("disable")},error:function(){console.log("出现异常")}})}})});