Vue.config.delimiters=["${","}"];var bannerComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{banner:!0}}},template:'<li :class="extendClass" class="state-disabled" data-field="banner" :data-setting="setting | json">\n    <img src="/img/static/img/component/banner_canvas.png">\n    <!--<i class="close-btn">×</i>-->\n</li>\n',methods:{},created:function(){}});Vue.component("banner",bannerComponent);var bannerFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{addbanner:function(e){var t=this,n=$(e.currentTarget).closest(attrClass),a=t.setting.data.length;if(20>a){var i=uuid();t.setting.data.push({position:"",status:"1",start_time:"",end_time:"",banner_img:"",item_action_url:"",item_action_url_type:"",url_type:"URL",url_text:"",id:i}),binChange();var s=setTimeout(function(){t.resetSetting(n),clearTimeout(s)},30)}else alert("banner最多20个")},initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},status:function(e){var t=$("body").data("state"),n=$("body").data("server-time"),a=e.status,i=e.start_time.replace(/-/g,"/"),s=new Date(i).getTime()/1e3,l=e.end_time.replace(/-/g,"/"),o=new Date(l).getTime()/1e3;return 1==t?1==a?s>n?"未开始":o>n?"已上线":"已过期":"已关闭":0==a?"已关闭":"--"},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},shutBanner:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=0);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},openBanner:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=1);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},deleteBanner:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=[],l=0;l<i.length;l++)a!=i[l].id&&s.push(i[l]);t.setting.data=s;var o=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(o)},30)},resetSetting:function(e){var t=$(e).find("form.commonConf").eq(0).serializeObject(),n=$(e).find(".singleConf form.singleItem"),a=$(n).length,i=[];if(a>0)for(var s=0;a>s;s++)i.push($(n[s]).serializeObject());var l=_.extend(t,{data:i});resetForm(l)},subForm:function(){}},template:'<div class="banner-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#banner" href="#banner">banner配置</a>\n            </div>\n            <div id="banner" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <div class="form-group ">\n                            <div>背景图片URL(建议750*1240)</div>\n                            <img class="thumbnail"  v-if="setting.bg_img" :src="setting.bg_img">\n                            <input class="form-control input-sm bgImg removeSpace" value="${setting.bg_img}" v-model="setting.bg_img" name="bg_img" placeholder="${i18n.bannerBg}"\n                                   type="text">\n                        </div>\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="bannerGroup singleConf">\n                        <form  v-for="(i,banner) in setting.data" class="bannerItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${banner.id}">\n                            <a class="itemTitle" @click="slideItem($event)">Banner配置(排序:<span>${banner.position}</span> , ${status(banner)}) <i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>排序</div>\n                                    <input class="form-control input-sm position" value="${banner.position}" v-model="banner.position" name="position" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,banner.end_time,\'start\')" class="form-control input-sm startTime" value="${banner.start_time}" v-model="banner.start_time" name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,banner.start_time,\'end\')" class="form-control input-sm endTime" value="${banner.end_time}" v-model="banner.end_time" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>Banner图片URL(建议630*315)</div>\n                                    <img class="thumbnail" v-if="banner.banner_img" :src="banner.banner_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" value="${banner.banner_img}" v-model="banner.banner_img" name="banner_img" placeholder="${i18n.bannerSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${banner.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="banner.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${banner.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" v-model="banner.item_action_url" value="${banner.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${banner.item_action_url_type}">\n                                </div>\n                                <div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutBanner" @click="shutBanner($event)" :class="{\'active\':banner.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openBanner" @click="openBanner($event)" :class="{\'active\':banner.status==0}" type="button">${i18n.open}\n                                        </a>\n                                        <!--<span class="status">状态:${status(banner)}</span>-->\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${banner.status}">\n                                </div>\n                            </div>\n                            <div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteBanner($event)" type="button">×</a>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <a @click="addbanner($event)" class="addBanner btn btn-primary">${i18n.addBanner}</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("banner-form",bannerFormComponent);var iconComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{icon:!0}}},template:'<li class="template" :class="extendClass" data-field="icon" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/icon_block.png">\n        </div>\n        <p>首页ICON</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/icon_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("icon",iconComponent);var iconFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},subForm:function(){}},template:'<div class="icon-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#icon" href="#icon">首页ICON组件</a>\n            </div>\n            <div id="icon" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <div class="form-group ">\n                            <div>背景图片URL(建议750*136)</div>\n                            <img class="thumbnail" v-if="setting.bg_img" :src="setting.bg_img">\n                            <input class="form-control input-sm bgImg removeSpace" v-model="setting.bg_img" value="${setting.bg_img}" name="bg_img" placeholder="${i18n.bannerBg}"\n                                   type="text">\n                        </div>\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="iconGroup singleConf">\n                        <form  v-for="(i,icon) in setting.data | orderBy \'position\'" class="iconItem singleItem">\n                            <a class="itemTitle" @click="slideItem($event)">ICON<span>${icon.position}</span>配置 <i class="fa fa-caret-down"></i></a>\n                            <input class="form-control input-sm" name="position" type="hidden" value="${icon.position}">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>图片URL(建议160*160)</div>\n                                    <img class="thumbnail" v-if="icon.icon_img" :src="icon.icon_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="icon.icon_img" value="${icon.icon_img}"  name="icon_img" placeholder="${i18n.imgSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div>文字</div>\n                                    <input class="form-control input-sm icon_title" value="${icon.icon_title}"  name="icon_title"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${icon.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="icon.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${icon.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" value="${icon.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${icon.item_action_url_type}">\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{}});Vue.component("icon-form",iconFormComponent);var bulletinComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{bulletin:!0}}},template:'<li class="template" :class="extendClass"  data-field="bulletin" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/bulletin_block.png">\n        </div>\n        <p>公告栏组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/bulletin_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("bulletin",bulletinComponent);var bulletinFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{addBulletin:function(){var e=this,t=$(event.currentTarget).closest(attrClass),n=uuid();e.setting.data.push({status:"1",position:"",bulletin_title:"",start_time:"",end_time:"",item_action_url:"",item_action_url_type:"",url_type:"URL",url_text:"",id:n}),binChange();var a=setTimeout(function(){e.resetSetting(t),clearTimeout(a)},30)},initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},status:function(e){var t=$("body").data("state"),n=$("body").data("server-time"),a=e.status,i=e.start_time.replace(/-/g,"/"),s=new Date(i).getTime()/1e3,l=e.end_time.replace(/-/g,"/"),o=new Date(l).getTime()/1e3;return 1==t?1==a?s>n?"未开始":o>n?"已上线":"已过期":"已关闭":0==a?"已关闭":"--"},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},shutBulletin:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=0);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},openBulletin:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=1);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},deleteBulletin:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=[],l=0;l<i.length;l++)a!=i[l].id&&s.push(i[l]);t.setting.data=s;var o=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(o)},30)},resetSetting:function(e){var t=$(e).find("form.commonConf").eq(0).serializeObject(),n=$(e).find(".singleConf form.singleItem"),a=$(n).length,i=[];if(a>0)for(var s=0;a>s;s++)i.push($(n[s]).serializeObject());var l=_.extend(t,{data:i});resetForm(l)},subForm:function(){}},template:'<div class="bulletin-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#bulletin" href="#bulletin">公告栏组件</a>\n            </div>\n            <div id="bulletin" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <div class="form-group">\n                            <div>背景图片URL(建议750*----)</div>\n                            <img class="thumbnail"  v-if="setting.bg_img" :src="setting.bg_img">\n                            <input class="form-control input-sm bgImg removeSpace" value="${setting.bg_img}" v-model="setting.bg_img" name="bg_img" placeholder="${i18n.bannerBg}"\n                                   type="text">\n                        </div>\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="bulletinGroup singleConf">\n                        <form  v-for="(i,bulletin) in setting.data" class="bulletinItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${bulletin.id}">\n                            <a class="itemTitle" @click="slideItem($event)">配置(${bulletin.position},${status(bulletin)}) <i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>排序</div>\n                                    <input class="form-control input-sm position" value="${bulletin.position}" v-model="bulletin.position" name="position" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>消息文字</div>\n                                    <input class="form-control input-sm icon_title" value="${bulletin.bulletin_title}"  name="bulletin_title"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,bulletin.end_time,\'start\')" v-model="bulletin.start_time" class="form-control input-sm startTime" value="${bulletin.start_time}"  name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,bulletin.start_time,\'end\')" v-model="bulletin.end_time" class="form-control input-sm endTime" value="${bulletin.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <!--<div class="form-group">\n                                    <div><em class="red">*</em>活动图片URL(建议750*424)</div>\n                                    <img class="thumbnail" v-if="bulletin.banner_img" :src="bulletin.banner_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="bulletin.banner_img" value="${bulletin.banner_img}" name="banner_img" placeholder="${i18n.bannerSrc}"\n                                           type="text">\n                                </div>-->\n                                <div class="form-group">\n                                    <div>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${bulletin.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="bulletin.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${bulletin.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" v-model="bulletin.item_action_url" value="${bulletin.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${bulletin.item_action_url_type}">\n                                </div>\n                                <!--<div class="form-group">\n                                    <div><em class="red">*</em>Category ID</div>\n                                    <input class="form-control input-sm position" value="${bulletin.category_id}"  name="category_id" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>-->\n                                <div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutBulletin" @click="shutBulletin($event)" :class="{\'active\':bulletin.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openBulletin" @click="openBulletin($event)" :class="{\'active\':bulletin.status==0}" type="button">${i18n.open}\n                                        </a>\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${bulletin.status}">\n                                </div>\n                            </div>\n                            <div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteBulletin($event)" type="button">×</a>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <a @click="addBulletin($event)" class="addBulletin btn btn-primary">${i18n.add_config} + </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("bulletin-form",bulletinFormComponent);var specialComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{special:!0}}},template:'<li class="template" :class="extendClass" data-field="special" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/special_block.png">\n        </div>\n        <p>特色栏目组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/special_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("special",specialComponent);var specialFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},areaSize:[{size:"320*438"},{size:"430*200"},{size:"200*238"},{size:"230*238"}],i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},subForm:function(){}},template:'<div class="special-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#special"\n                                          href="#special">特色栏目组件</a>\n            </div>\n            <div id="special" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="specialGroup singleConf">\n                        <form v-for="(i,special) in setting.data | orderBy \'position\'" class="specialItem singleItem">\n                            <a class="itemTitle" @click="slideItem($event)">区域<span>${special.position}</span>配置 <i class="fa fa-caret-down"></i></a>\n                            <input class="form-control input-sm" name="position" type="hidden" value="${special.position}">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>图片URL(建议${areaSize[i].size})</div>\n                                    <img class="thumbnail" v-if="special.special_img" :src="special.special_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="special.special_img" value="${special.special_img}" name="special_img"\n                                           placeholder="${i18n.imgSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type"\n                                            @change="changeUrlType($event)"\n                                            value="${special.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="special.url_type==v.value"\n                                                    data-link_Type="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text"\n                                           @change="changeUrlInput($event)"\n                                           value="${special.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden"\n                                           value="${special.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${special.item_action_url_type}">\n\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{}});
Vue.component("special-form",specialFormComponent);var discountComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{discount:!0}}},template:'<li class="template" :class="extendClass" data-field="discount" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/discount_block.png">\n        </div>\n        <p>今日特价组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/discount_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("discount",discountComponent);var discountFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{addDiscount:function(e){var t=this,n=$(e.currentTarget).closest(attrClass),a=uuid();t.setting.data.push({status:"1",discount_time:"",category_id:"",url_type:"",url_text:"",item_action_url:"",item_action_url_type:"",id:a}),binChange();var i=setTimeout(function(){t.resetSetting(n),clearTimeout(i)},30)},initDate:function(e){$(e.target).datetimepicker({format:"Y/m/d",timepicker:!1})},slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},status:function(e){var t=$("body").data("state"),n=$("body").data("server-time"),a=e.status,i=e.discount_time.replace(/-/g,"/");return new Date(i).getTime()/1e3,1==t?1==a?i>n?"未开始":(n=i)?"已上线":"已过期":"已关闭":0==a?"已关闭":"--"},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},shutDiscount:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=0);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},openDiscount:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=1);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},deleteDiscount:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=[],l=0;l<i.length;l++)a!=i[l].id&&s.push(i[l]);t.setting.data=s;var o=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(o)},30)},resetSetting:function(e){var t=$(e).find("form.commonConf").eq(0).serializeObject(),n=$(e).find(".singleConf form.singleItem"),a=$(n).length,i=[];if(a>0)for(var s=0;a>s;s++)i.push($(n[s]).serializeObject());var l=_.extend(t,{data:i});resetForm(l)},subForm:function(){}},template:'<div class="discount-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#discount" href="#discount">今日特价组件</a>\n            </div>\n            <div id="discount" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="discountGroup singleConf">\n                        <form  v-for="(i,discount) in setting.data" class="discountItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${discount.id}">\n                            <a class="itemTitle" @click="slideItem($event)">配置(${discount.discount_time},${status(discount)}) <i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <!--<div class="form-group ">\n                                    <div>*背景图片URL(建议750*1111)</div>\n                                    <input class="form-control input-sm bgImg removeSpace" value="${discount.banner_img}" name="banner_img" placeholder="${i18n.bg_url}"\n                                           type="text">\n                                </div>-->\n                                <div class="form-group">\n                                    <div>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${discount.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="discount.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${discount.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" value="${discount.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${discount.item_action_url_type}">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>活动时间</div>\n                                    <input @mousedown="initDate($event)" class="form-control input-sm " v-model="discount.discount_time" value="${discount.discount_time}"  name="discount_time" placeholder="${i18n.tip_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>Category ID</div>\n                                    <input class="form-control input-sm position" value="${discount.category_id}"  name="category_id" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutDiscount" @click="shutDiscount($event)" :class="{\'active\':discount.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openDiscount" @click="openDiscount($event)" :class="{\'active\':discount.status==0}" type="button">${i18n.open}\n                                        </a>\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${discount.status}">\n                                </div>\n                            </div>\n                            <div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteDiscount($event)" type="button">×</a>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <a @click="addDiscount($event)" class="addDiscount btn btn-primary">${i18n.add_config} + </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("discount-form",discountFormComponent);var activityComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{activity:!0}}},template:'<li class="template" :class="extendClass"  data-field="activity" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/activity_block.png">\n        </div>\n        <p>活动组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/activity_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("activity",activityComponent);var activityFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{addActivity:function(){var e=this,t=$(event.currentTarget).closest(attrClass),n=uuid();e.setting.data.push({status:"1",position:"",start_time:"",end_time:"",banner_img:"",item_action_url:"",item_action_url_type:"",url_type:"URL",url_text:"",category_id:"",id:n}),binChange();var a=setTimeout(function(){e.resetSetting(t),clearTimeout(a)},30)},initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},status:function(e){var t=$("body").data("state"),n=$("body").data("server-time"),a=e.status,i=e.start_time.replace(/-/g,"/"),s=new Date(i).getTime()/1e3,l=e.end_time.replace(/-/g,"/"),o=new Date(l).getTime()/1e3;return 1==t?1==a?s>n?"未开始":o>n?"已上线":"已过期":"已关闭":0==a?"已关闭":"--"},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},shutActivity:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=0);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},openActivity:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=1);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},deleteActivity:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=[],l=0;l<i.length;l++)a!=i[l].id&&s.push(i[l]);t.setting.data=s;var o=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(o)},30)},resetSetting:function(e){var t=$(e).find("form.commonConf").eq(0).serializeObject(),n=$(e).find(".singleConf form.singleItem"),a=$(n).length,i=[];if(a>0)for(var s=0;a>s;s++)i.push($(n[s]).serializeObject());var l=_.extend(t,{data:i});resetForm(l)},subForm:function(){}},template:'<div class="activity-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#activity" href="#activity">活动组件</a>\n            </div>\n            <div id="activity" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="activityGroup singleConf">\n                        <form  v-for="(i,activity) in setting.data" class="activityItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${activity.id}">\n                            <a class="itemTitle" @click="slideItem($event)">配置(${activity.position},${status(activity)}) <i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>排序</div>\n                                    <input class="form-control input-sm position" value="${activity.position}" v-model="activity.position" name="position" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,activity.end_time,\'start\')" v-model="activity.start_time" class="form-control input-sm startTime" value="${activity.start_time}"  name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,activity.start_time,\'end\')" v-model="activity.end_time" class="form-control input-sm endTime" value="${activity.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>活动图片URL(建议750*424)</div>\n                                    <img class="thumbnail" v-if="activity.banner_img" :src="activity.banner_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="activity.banner_img" value="${activity.banner_img}" name="banner_img" placeholder="${i18n.bannerSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${activity.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="activity.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${activity.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" v-model="activity.item_action_url" value="${activity.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${activity.item_action_url_type}">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>Category ID</div>\n                                    <input class="form-control input-sm position" value="${activity.category_id}"  name="category_id" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutActivity" @click="shutActivity($event)" :class="{\'active\':activity.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openActivity" @click="openActivity($event)" :class="{\'active\':activity.status==0}" type="button">${i18n.open}\n                                        </a>\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${activity.status}">\n                                </div>\n                            </div>\n                            <div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteActivity($event)" type="button">×</a>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <a @click="addActivity($event)" class="addActivity btn btn-primary">${i18n.add_config} + </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("activity-form",activityFormComponent);var grouponComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{groupon:!0}}},template:'<li class="template" :class="extendClass" data-field="groupon" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/groupon_block.png">\n        </div>\n        <p>拼团商品组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/groupon_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){console.log()}});Vue.component("groupon",grouponComponent);var grouponFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=action_url]").val(s),$(t).siblings("[name=action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=action_url]").val(i),$(t).siblings("[name=action_url_type]").val(n)},subForm:function(){}},template:'<div class="groupon-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#groupon" href="#groupon">拼团组件</a>\n            </div>\n            <div id="groupon" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <!--<div class="form-group ">\n                            <div>*背景图片URL(建议大小?*?)</div>\n                            <input class="form-control input-sm bgImg" value="${setting.bg_img}" name="bg_img" placeholder="${i18n.bg_url}"\n                                   type="text">\n                        </div>-->\n                        <div class="form-group">\n                            <div>跳转URL/APP原生页面</div>\n                            <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${setting.url_type}">\n                                <template v-for="(k,v) in urlType">\n                                    <option v-if="setting.url_type==v.value"\n                                            data-link_Type ="${k}"\n                                            data-placeholder="${v.palceholderVal}"\n                                            selected>\n                                        ${v.value}\n                                    </option>\n                                    <option v-else\n                                            data-link_Type ="${k}"\n                                            data-placeholder="${v.palceholderVal}">\n                                        ${v.value}\n                                    </option>\n                                </template>\n                            </select>\n                            <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${setting.url_text}" placeholder="URL" type="text">\n                            <input class="form-control input-sm" name="action_url" type="hidden" value="${setting.action_url}">\n                            <input class="form-control input-sm" name="action_url_type" type="hidden" value="${setting.action_url_type}">\n                        </div>\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="grouponGroup singleConf">\n                        <form v-for="(i,groupon) in setting.data" class="grouponItem singleItem">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>拼团商品SKU</div>\n                                    <textarea class="form-control input-sm position" name="sku">${groupon.sku}</textarea>\n                                    <div class="tips">注:SKU之间用英文逗号隔开,数量不得超过20个,区分大小写,例如:CBD002,DV003.SKU需要是有效的拼团商品,否则该SKU会被自动忽略。</div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{}});Vue.component("groupon-form",grouponFormComponent);var favorComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{favor:!0}}},template:'<li class="template" :class="extendClass" data-field="favor" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/favor_block.png">\n        </div>\n        <p>猜你喜欢</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/favor_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){console.log()}});Vue.component("favor",favorComponent);var favorFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{subForm:function(){}},template:'<div class="favor-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#favor" href="#favor">猜你喜欢组件</a>\n            </div>\n            <div id="favor" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <!--<div class="form-group ">\n                            <div>*背景图片URL(建议大小?*?)</div>\n                            <input class="form-control input-sm bgImg" value="${setting.bg_img}" name="bg_img" placeholder="${i18n.bg_url}"\n                                   type="text">\n                        </div>-->\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="favorGroup singleConf">\n                        <form v-for="(i,favor) in setting.data" class="favorItem singleItem">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div>展示商品数量</div>\n                                    <input class="form-control input-sm position" value="${favor.show_num}" name="show_num" />\n                                    <div class="tips">若不填写,展示全部商品</div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{}});Vue.component("favor-form",favorFormComponent);var separateComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{separate:!0}}},template:'<li class="template" :class="extendClass" data-field="separate" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/separate_block.png">\n        </div>\n        <p>分割线组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/separate_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("separate",separateComponent);var separateFormComponent=Vue.extend({data:function(){return{setting:{isNew:null,data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")],picked:"block"}},methods:{changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},subForm:function(){}},template:'<div class="separate-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#separate" href="#separate">分割线组件</a>\n            </div>\n            <div id="separate" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                        <div class="form-group">\n                            <div><em class="red"></em>新人展示</div>\n                            <input class="form-control input-sm isNew" type="checkbox" value="1" v-model="setting.isNew" name="isNew" />\n                        </div>\n                    </form>\n                    <div v-if="setting.data && setting.data.length>0" class="separateGroup singleConf">\n                        <form  v-for="(i,separate) in setting.data" class="separateItem singleItem">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <label><input type="radio" value="block" v-model="picked" name="space_type"> 色块分割</label>\n                                    <label><input type="radio" value="img" v-model=\'picked\' name="space_type"> 图片分割</label>\n                                </div>\n                                <template v-if="picked==\'block\'">\n                                    <div class="form-group" >\n                                        <div>高度/px(建议20px)</div>\n                                        <input class="form-control input-sm space_height" value="${separate.space_height}" name="space_height" />\n                                    </div>\n                                    <div class="form-group" >\n                                        <div>背景色(建议#f5f5f5)</div>\n                                        <input class="form-control input-sm space_color" value="${separate.space_color}" name="space_color" />\n                                    </div>\n                                </template>\n                                <template v-else>\n                                    <div class="form-group">\n                                        <div><em class="red">*</em>分割图片URL(建议750*20)</div>\n                                        <img class="thumbnail" v-if="separate.space_bg" :src="separate.space_bg">\n                                        <input class="form-control input-sm space_bg removeSpace" v-model="separate.space_bg" value="${separate.space_bg}" name="space_bg" />\n                                    </div>\n\n                                    <div class="form-group">\n                                        <div>跳转URL/APP原生页面</div>\n                                        <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${separate.url_type}">\n                                            <template v-for="(k,v) in urlType">\n                                                <option v-if="separate.url_type==v.value"\n                                                        data-link_Type ="${k}"\n                                                        data-placeholder="${v.palceholderVal}"\n                                                        selected>\n                                                    ${v.value}\n                                                </option>\n                                                <option v-else\n                                                        data-link_Type ="${k}"\n                                                        data-placeholder="${v.palceholderVal}">\n                                                    ${v.value}\n                                                </option>\n                                            </template>\n                                        </select>\n                                        <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${separate.url_text}" placeholder="URL" type="text">\n                                        <input class="form-control input-sm" name="item_action_url" type="hidden" value="${separate.item_action_url}">\n                                        <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${separate.item_action_url_type}">\n                                    </div>\n                                </template>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{setting:function(){var e=this;
e.setting.data.length>0&&(e.picked="block"==e.setting.data[0].space_type?"block":"img")}}});Vue.component("separate-form",separateFormComponent);var videoComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{video:!0}}},template:'<li class="template" :class="extendClass" data-field="video" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/video_block.png">\n        </div>\n        <p>视频组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/video_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("video",videoComponent);var videoFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{addVideo:function(){var e=this,t=$(event.currentTarget).closest(attrClass),n=uuid();e.setting.data.push({status:"1",start_time:"",end_time:"",video_id:"",video_title:"",video_url:"",video_img:"",id:n}),binChange();var a=setTimeout(function(){e.resetSetting(t),clearTimeout(a)},30)},initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},status:function(e){var t=$("body").data("state"),n=$("body").data("server-time"),a=e.status,i=e.start_time.replace(/-/g,"/"),s=new Date(i).getTime()/1e3,l=e.end_time.replace(/-/g,"/"),o=new Date(l).getTime()/1e3;return 1==t?1==a?s>n?"未开始":o>n?"已上线":"已过期":"已关闭":0==a?"已关闭":"--"},shutVideo:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=0);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},emptyVideo:function(e){var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem");$(a).find("input[name=video_title]").val(""),$(a).find("input[name=video_url]").val(""),$(a).find("input[name=video_img]").val(""),$(a).find(".videoImg").hide().attr("src","");var i=setTimeout(function(){t.resetSetting(n),clearTimeout(i)},300)},readVideo:function(e){var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem"),i=$(a).find("input[name=video_id]").val();if(i){var s={video_id:i};$.ajax({type:"get",dataType:"json",url:"/api/internal/sas/video/list",data:s,success:function(e){if(1==e.code)if(0!=e.total&&1==e.data[0].status){var i=e.data[0];$(a).find("input[name=video_title]").val(i.title),$(a).find("input[name=video_url]").val(i.video_url);var s;s=i.img_url?i.img_url:i.video_img,$(a).find("input[name=video_img]").val(s),$(a).find(".videoImg").show().attr("src",s);var l=setTimeout(function(){t.resetSetting(n),clearTimeout(l)},300)}else 0!=e.total&&0==e.data[0].status?alert("该视频状态为关闭状态"):0==e.total&&alert("无该视频")},error:function(){console.log("出现异常")}})}else{$(a).find("input[name=video_title]").val(""),$(a).find("input[name=video_url]").val(""),$(a).find("input[name=video_img]").val(""),$(a).find(".videoImg").hide().attr("src","");var l=setTimeout(function(){t.resetSetting(n),clearTimeout(l)},300)}},openVideo:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=0;s<i.length;s++)a==i[s].id&&(i[s].status=1);t.setting.data=i;var l=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(l)},30)},deleteVideo:function(e){for(var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=t.setting.data,s=[],l=0;l<i.length;l++)a!=i[l].id&&s.push(i[l]);t.setting.data=s;var o=setTimeout(function(){t.resetSetting(n);var a=$("body").data("state");saveData(a,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(o)},30)},resetSetting:function(e){var t=$(e).find("form.commonConf").eq(0).serializeObject(),n=$(e).find(".singleConf form.singleItem"),a=$(n).length,i=[];if(a>0)for(var s=0;a>s;s++)i.push($(n[s]).serializeObject());var l=_.extend(t,{data:i});resetForm(l)},subForm:function(){}},template:'<div class="video-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#video" href="#video">视频组件</a>\n            </div>\n            <div id="video" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <div class="form-group ">\n                            <div>背景图片URL(建议750*1240)</div>\n                            <img class="thumbnail"  v-if="setting.bg_img" :src="setting.bg_img">\n                            <input class="form-control input-sm bgImg removeSpace" value="${setting.bg_img}" v-model="setting.bg_img" name="bg_img" placeholder="${i18n.bannerBg}"\n                                   type="text">\n                        </div>\n                        <div class="form-group ">\n                            <div><em class="red">*</em>模块title</div>\n                            <input class="form-control input-sm" value="${setting.title}" v-model="setting.title" name="title" type="text">\n                        </div>\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="videoGroup singleConf">\n                        <form  v-for="(i,video) in setting.data" class="videoItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${video.id}">\n                            <a class="itemTitle" @click="slideItem($event)">视频配置(${video.start_time}-${video.end_time},${status(video)}) <i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>视频ID</div>\n                                    <input class="form-control input-sm position" @keydown="emptyVideo($event)" value="${video.video_id}" v-model="video.video_id" name="video_id" type="text">\n                                    <a class="btn btn-success btn-sm readVideo" @click="readVideo($event)" type="button">${i18n.read}</a>\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>视频名称</div>\n                                    <input class="form-control input-sm grayInput" value="${video.video_title}" onkeydown="return false" name="video_title" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>视频链接</div>\n                                    <input class="form-control input-sm grayInput" value="${video.video_url}" onkeydown="return false"  name="video_url" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>封面图片</div>\n                                    <input class="form-control input-sm grayInput" value="${video.video_img}" onkeydown="return false" name="video_img" type="text">\n                                    <img class="thumbnail videoImg"  v-show="video.video_img" :src="video.video_img" v-model="video.video_img">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,video.end_time,\'start\')" v-model="video.start_time" class="form-control input-sm startTime" value="${video.start_time}"  name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,video.start_time,\'end\')" v-model="video.end_time" class="form-control input-sm endTime" value="${video.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutVideo" @click="shutVideo($event)" :class="{\'active\':video.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openVideo" @click="openVideo($event)" :class="{\'active\':video.status==0}" type="button">${i18n.open}\n                                        </a>\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${video.status}">\n                                </div>\n                            </div>\n                            <div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteVideo($event)" type="button">×</a>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <a @click="addVideo($event)" class="addVideo btn btn-primary">${i18n.add_config} + </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("video-form",videoFormComponent);var teleComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{imagetext:!0}}},template:'<li class="template" :class="extendClass" imagetext-field="imagetext" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/imagetext-min.jpg">\n        </div>\n        <p>图文组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/imagetext.jpg">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("imagetext",teleComponent);var teleFormComponent=Vue.extend({data:function(){return{setting:{status:0},show:!1,i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},shutImagetext:function(e){var t=this;t.setting.status=0,resetForm({status:0});var n=setTimeout(function(){var t=$("body").data("state");saveData(t,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(n)},30)},openImagetext:function(e){var t=this;t.setting.status=1,resetForm({status:1});var n=setTimeout(function(){var t=$("body").data("state");saveData(t,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(n)},30)}},template:'<div class="imagetext-attr" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <a data-toggle="collapse" data-parent="#imagetext" href="#imagetext">图文组件</a>\n            </div>\n            <div id="imagetext" class="panel-collapse collapse imagetextWrap">\n                <div class="panel-body singleConf">\n                    <div class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </div>\n                    <form class="teletextItem singleItem" data-val="${setting.id}">\n                        <a class="itemTitle" @click="slideItem($event)">图文组件配置 <i class="fa fa-caret-down"></i></a>\n                        <div class="itemBody">\n                            <div class="form-group">\n                                <div><em class="red">*</em>开始时间</div>\n                                <input @mousedown="initDate($event,setting.end_time,\'start\')" class="form-control input-sm startTime" value="${setting.start_time}" name="start_time" placeholder="${i18n.start_time}"\n                                       type="text">\n                            </div>\n                            <div class="form-group">\n                                <div><em class="red">*</em>结束时间</div>\n                                <input @mousedown="initDate($event,setting.start_time,\'end\')" class="form-control input-sm endTime" value="${setting.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                            </div>\n                            <div class="form-group">\n                                <div><em class="red">*</em>组件标题(长度不能大于<span style="color:red;">16个字符</span>)</div>\n                                <input class="form-control input-sm title" value="${setting.title}" name="title" placeholder="${i18n.teletextName}" type="text">\n                            </div>\n                            <div class="form-group teleId">\n                                <div><em class="red">*</em>图文ID(多个图文id请用<span style="color:red;">英文逗号</span>分隔)</div>\n                                <input class="form-control input-sm position" value="${setting.data.ids}" name="ids" type="text">\n                            </div>\n                            <div class="form-group">\n                                <div class="ops">\n                                    <a class="btn btn-warning btn-sm shutImagetext" @click="shutImagetext($event)" :class="{\'active\':setting.status==1}" type="button">${i18n.shut}\n                                    </a>\n                                    <a class="btn btn-success btn-sm openImagetext" @click="openImagetext($event)" :class="{\'active\':setting.status==0}" type="button">${i18n.open}\n                                    </a>\n                                </div>\n                                <input class="status" type="hidden" name="status" value="${setting.status}">\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log(this.setting)}});Vue.component("imagetext-form",teleFormComponent);var flashsaleComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{flashsale:!0}}},template:'<li class="template" :class="extendClass" data-field="flashsale" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/groupon_block.png">\n        </div>\n        <p>秒杀</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/flashsale_canvas.jpg">\n        <i class="close-btn">×</i>\n    </div>\n</li>'});Vue.component("flashsale",flashsaleComponent);var flashsaleFormComponent=Vue.extend({data:function(){return{setting:{data:[]}}},template:""});Vue.component("flashsale-form",flashsaleFormComponent);var favorcomComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{favorcom:!0}}},template:'<li class="template" :class="extendClass" data-field="favorcom" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/favorcom_block.png">\n        </div>\n        <p>猜你喜欢2</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/favorcom_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){console.log()}});Vue.component("favorcom",favorcomComponent);var favorcomFormComponent=Vue.extend({data:function(){return{setting:{data:[]},actionUrl:"",show:!1,i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},actionUrlConvert:function(){var e=this,t={domain:"recommand",action:"to_recommand",data:{}},n="memebox://"+encodeURIComponent(JSON.stringify(t));e.actionUrl=n},subForm:function(){}},template:'<div class="favorcom-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#favorcom" href="#favorcom">猜你喜欢组件</a>\n            </div>\n            <div id="favorcom" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <!--<div class="form-group ">\n                            <div>*背景图片URL(建议大小?*?)</div>\n                            <input class="form-control input-sm bgImg" value="${setting.bg_img}" name="bg_img" placeholder="${i18n.bg_url}"\n                                   type="text">\n                        </div>-->\n                        <input class="form-control input-sm" name="action_url" type="hidden" value="${actionUrl}">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="favorcomGroup singleConf">\n                        <form v-for="(i,favorcom) in setting.data" class="favorcomItem singleItem">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,favorcom.end_time,\'start\')" v-model="favorcom.start_time" class="form-control input-sm startTime" value="${favorcom.start_time}"  name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,favorcom.start_time,\'end\')" v-model="favorcom.end_time" class="form-control input-sm endTime" value="${favorcom.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <!--<div class="form-group">\n                                    <div>展示商品数量</div>\n                                    <input class="form-control input-sm position" value="${favorcom.show_num}" name="show_num" />\n                                    <div class="tips">若不填写,展示全部商品</div>\n                                </div>-->\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){var e=this;e.actionUrlConvert()},watch:{}});Vue.component("favorcom-form",favorcomFormComponent);var liveComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{live:!0}}},template:'<li class="template" :class="extendClass" data-field="live" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/live_block.png">\n        </div>\n        <p>直播组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/live_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("live",liveComponent);var liveFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{initDate:function(e,t,n){var a={};t&&"start"==n&&(a.maxDate=t),t&&"end"==n&&(a.minDate=t),$(e.target).datetimepicker({onShow:function(){this.setOptions(a)}})},slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},emptyLive:function(e){var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem");$(a).find("input[name=is_pass]").val("0");var i=setTimeout(function(){t.resetSetting(n),clearTimeout(i)},300)},readLive:function(e){var t=this,n=$(e.currentTarget).closest(attrClass),a=$(e.currentTarget).closest(".singleItem"),i=$(a).find("input[name=liveRoomId]").val();if(i){var s={liveRoomId:i};$.ajax({type:"get",dataType:"json",url:"/api/internal/sas/live/detail",data:s,success:function(e){if(1==e.code){$(a).find("input[name=is_pass]").val("1"),alert("校验成功");var i=setTimeout(function(){t.resetSetting(n),clearTimeout(i)},300)}else{alert("校验失败"),$(a).find("input[name=is_pass]").val("0");var s=setTimeout(function(){t.resetSetting(n),clearTimeout(s)},300)}},error:function(){console.log("出现异常")}})}else{$(a).find("input[name=is_pass]").val("0");var l=setTimeout(function(){t.resetSetting(n),clearTimeout(l)},300)}},resetSetting:function(e){var t=$(e).find("form.commonConf").eq(0).serializeObject(),n=$(e).find(".singleConf form.singleItem"),a=$(n).length,i=[];if(a>0)for(var s=0;a>s;s++)i.push($(n[s]).serializeObject());var l=_.extend(t,{data:i});resetForm(l)},subForm:function(){}},watch:{"setting.data[0].start_time":function(e){this.$nextTick(function(){return e&&this.setting.data[0].end_time&&+new Date(this.setting.data[0].end_time)<+new Date(e)?(alert("开始日期不能晚于结束日期"),void(this.setting.data[0].start_time="")):void 0})},"setting.data[0].end_time":function(e){this.$nextTick(function(){return e&&this.setting.data[0].start_time&&+new Date(this.setting.data[0].start_time)>+new Date(e)?(alert("开始日期不能晚于结束日期"),void(this.setting.data[0].end_time="")):void 0})}},template:'<div class="live-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#live" href="#live">直播组件</a>\n            </div>\n            <div id="live" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <div class="form-group ">\n                            <div>背景图片URL(建议750*1240)</div>\n                            <img class="thumbnail"  v-if="setting.bg_img" :src="setting.bg_img">\n                            <input class="form-control input-sm bgImg removeSpace" value="${setting.bg_img}" v-model="setting.bg_img" name="bg_img" placeholder="${i18n.bannerBg}"\n                                   type="text">\n                        </div>\n                        <!--<div class="form-group ">\n                            <div><em class="red">*</em>模块title</div>\n                            <input class="form-control input-sm" value="${setting.title}" v-model="setting.title" name="title" type="text">\n                        </div>-->\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="liveGroup singleConf">\n                        <form  v-for="(i,live) in setting.data" class="liveItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${live.id}">\n                            <!--<a class="itemTitle" @click="slideItem($event)">直播配置(${live.start_time}-${live.end_time},${status(live)}) <i class="fa fa-caret-down"></i></a>-->\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>房间ID</div>\n                                    <input class="form-control input-sm position" @keydown="emptyLive($event)" value="${live.liveRoomId}" v-model="live.liveRoomId" name="liveRoomId" type="text">\n                                    <a class="btn btn-success btn-sm readLive" @click="readLive($event)" type="button">${i18n.validate}</a>\n                                    <input type="hidden" name="is_pass" value="${live.is_pass}">\n                                </div>\n                                <!--<div class="form-group">\n                                    <div><em class="red">*</em>视频名称</div>\n                                    <input class="form-control input-sm grayInput" value="${live.live_title}" onkeydown="return false" name="live_title" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>视频链接</div>\n                                    <input class="form-control input-sm grayInput" value="${live.live_url}" onkeydown="return false"  name="live_url" type="text">\n                                </div>-->\n                                <div class="form-group">\n                                    <div><em class="red">*</em>直播主图</div>\n                                    <input class="form-control input-sm removeSpace" value="${live.live_img}" name="live_img" v-model="live.live_img" type="text" >\n                                    <img class="thumbnail liveImg"  v-show="live.live_img" :src="live.live_img">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,live.end_time,\'start\')" v-model="live.start_time" class="form-control input-sm startTime" value="${live.start_time}"  name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,live.start_time,\'end\')" v-model="live.end_time" class="form-control input-sm endTime" value="${live.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <!--<div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutLive" @click="shutLive($event)" :class="{\'active\':live.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openLive" @click="openLive($event)" :class="{\'active\':live.status==0}" type="button">${i18n.open}\n                                        </a>\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${live.status}">\n                                </div>-->\n                            </div>\n                            <!--<div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteLive($event)" type="button">×</a>\n                                </div>\n                            </div>-->\n                        </form>\n                    </div>\n                    <!--<a @click="addLive($event)" class="addLive btn btn-primary">${i18n.add_config} + </a>-->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("live-form",liveFormComponent);var newcomerComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{newcomer:!0}}},template:'<li class="template" :class="extendClass" data-field="newcomer" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/newcomer_block.png">\n        </div>\n        <p>新人专享组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/newcomer.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("newcomer",newcomerComponent);var newcomerFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},areaSize:[{size:"430*160"},{size:"160*230"},{size:"200*160"},{size:"320*320"}],i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var t=e.currentTarget;$(t).find(".fa").toggleClass("fa-caret-right"),$(t).siblings(".itemBody").slideToggle()},changeUrlType:function(e){var t=e.currentTarget,n=$(t).find("option:selected").data("placeholder");$(t).siblings(".inputWord").attr("placeholder",n);var a=$(t).find("option:selected").data("link_type");$(t).siblings(".inputWord").val("");var i=$(t).siblings(".inputWord").val(),s=convertToAPPLink(a,i);$(t).siblings("[name=item_action_url]").val(s),$(t).siblings("[name=item_action_url_type]").val(a)},changeUrlInput:function(e){var t=e.currentTarget,n=$(t).siblings("select.appLink").find("option:selected").data("link_type"),a=$(t).val(),i=convertToAPPLink(n,a);$(t).siblings("[name=item_action_url]").val(i),$(t).siblings("[name=item_action_url_type]").val(n)},subForm:function(){}},template:'<div class="newcomer-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#newcomer"\n                                          href="#newcomer">新人价组件</a>\n            </div>\n            <div id="newcomer" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                        <input class="form-control input-sm" name="position" type="hidden" value="5">\n                        <a class="itemTitle" @click="slideItem($event)">倒计时配置 <i class="fa fa-caret-down"></i></a>\n                        <div class="form-group">\n                            <div><em class="red">*</em>倒计时背景图URL(建议750*120)</div>\n                            <img class="thumbnail" v-if="setting.special_img" :src="setting.special_img">\n                            <input class="form-control input-sm imgSrc removeSpace" v-model="setting.special_img" value="${setting.special_img}" name="special_img"\n                                   placeholder="${i18n.imgSrc}"\n                                   type="text">\n                        </div>\n                        <div class="form-group">\n                            <div><em class="red">*</em>倒计时文字</div>\n                            <input class="form-control input-sm imgSrc removeSpace" v-model="setting.text" value="${setting.text}" name="text"\n                                   placeholder="${i18n.cdText}"\n                                   type="text">\n                        </div>\n                        <div class="form-group">\n                            <div><em class="red">*</em>倒计时跳转URL/APP原生页面</div>\n                            <select class="form-control linkKind appLink" name="url_type"\n                                    @change="changeUrlType($event)"\n                                    value="${setting.url_type}">\n                                <template v-for="(k,v) in urlType">\n                                    <option v-if="url_type==v.value"\n                                            data-link_Type="${k}"\n                                            data-placeholder="${v.palceholderVal}"\n                                            selected>\n                                        ${v.value}\n                                    </option>\n                                    <option v-else\n                                            data-link_Type="${k}"\n                                            data-placeholder="${v.palceholderVal}">\n                                        ${v.value}\n                                    </option>\n                                </template>\n                            </select>\n                            <input class="form-control input-sm inputWord" name="url_text"\n                                   @change="changeUrlInput($event)"\n                                   value="${setting.url_text}" placeholder="URL" type="text">\n                            <input class="form-control input-sm" name="item_action_url" type="hidden"\n                                   value="${setting.item_action_url}">\n                            <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${setting.item_action_url_type}">\n\n                        </div>\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="specialGroup singleConf">\n                        <form v-for="(i,special) in setting.data | orderBy \'position\'" class="specialItem singleItem">\n                            <a class="itemTitle" @click="slideItem($event)">区域<span>${special.position}</span>配置 <i class="fa fa-caret-down"></i></a>\n                            <input class="form-control input-sm" name="position" type="hidden" value="${special.position}">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>图片URL(建议${areaSize[i].size})</div>\n                                    <img class="thumbnail" v-if="special.special_img" :src="special.special_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="special.special_img" value="${special.special_img}" name="special_img"\n                                           placeholder="${i18n.imgSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type"\n                                            @change="changeUrlType($event)"\n                                            value="${special.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="special.url_type==v.value"\n                                                    data-link_Type="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text"\n                                           @change="changeUrlInput($event)"\n                                           value="${special.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden"\n                                           value="${special.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${special.item_action_url_type}">\n\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){}});
Vue.component("newcomer-form",newcomerFormComponent);var vue=new Vue({el:"html",data:{},methods:{saveData:function(e){var t=$(e.currentTarget);return $("#canvas .flashsale").length>1?(alert("只支持一个秒杀活动"),!1):void($(t).hasClass("disable")||($(t).addClass("disable"),saveData("0",function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:($(t).removeClass("disable"),alert(e.msg))},$(e.currentTarget))))},publish:function(e){var t=$(e.currentTarget);$(t).hasClass("disable")||($(t).addClass("disable"),saveData("1",function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:($(t).removeClass("disable"),alert(e.msg))},$(e.currentTarget)))},preview:function(e){var t=$(e.currentTarget);$(t).hasClass("disable")||($(t).addClass("disable"),saveData("0",function(e){if(1==e.code){var n=$("body").data("h5")+"?preview";$(".preview").append("<iframe src="+n+" frameborder='0'></iframe>"),$("#qrCode").qrcode({width:64,height:64,text:n}),$(".qr .p-link p").html(n),$(".preview-wrapper").show()}else alert(e.msg);$(t).removeClass("disable")},$(e.currentTarget)))},closePreview:function(){$(".preview").html(""),$("#qrCode").html(""),$(".qr .p-link p").html(""),$(".preview-wrapper .preview").html(""),$(".preview-wrapper").hide()}},ready:function(){sortableInit(this)}});