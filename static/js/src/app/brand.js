Vue.config.delimiters=["${","}"];var brandComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{brandcate:!0}}},template:'<li class="template" :class="extendClass" data-field="brandcate" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/brand-block.jpg">\n        </div>\n        <p>品牌首页分类</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/brand-canvas.jpg">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("brandcate",brandComponent);var brandFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1}},methods:{slideItem:function(e){var n=e.currentTarget;$(n).find(".fa").toggleClass("fa-caret-right"),$(n).siblings(".itemBody").slideToggle()}},template:'<div class="brandcate-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <a data-toggle="collapse" data-parent="#brandcate" href="#brandcate">分类商品组件</a>\n            </div>\n            <div id="brandcate" class="panel-collapse collapse brandWrap">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n                    <div v-if="setting.data && setting.data.length>0" class="cateGroup singleConf">\n                        <form  v-for="(i,brand) in setting.data | orderBy \'position\'" class="cateItem singleItem">\n                            <a class="itemTitle" @click="slideItem($event)">分类商品<span>${brand.position}</span>配置<i class="fa fa-caret-down"></i></a>\n                            <input class="form-control input-sm" name="position" type="hidden" value="${brand.position}">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div>01区域配置仅限4个汉字</div>\n                                    <input class="form-control input-sm category_title" value="${brand.cate_name}"  name="cate_name" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div>02区域背景图片URL(建议750*160)</div>\n                                    <img class="thumbnail" v-if="brand.cate_img" :src="brand.cate_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" value="${brand.cate_img}" v-model="brand.cate_img" name="cate_img" placeholder="${i18n.imgSrc}" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div>Category ID</div>\n                                    <input class="form-control input-sm icon_title" value="${brand.category_id}"  name="category_id" type="text">\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("brandcate-form",brandFormComponent);var brandHomeComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{brandhome:!0}}},template:'<li :class="extendClass" brand-field="brandhome" :brand-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/brand-home.jpg">\n        </div>\n        <p>品牌首页组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/brand-home.jpg">\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("brandhome",brandHomeComponent);var brandHomeFormComp=Vue.extend({props:["brandData","channelsData"],data:function(){return{setting:{data:[]},show:!1}},methods:{slideItem:function(e){var n=e.currentTarget;$(n).find(".fa").toggleClass("fa-caret-right"),$(n).siblings(".itemBody").slideToggle()}},template:'<div class="brandcate-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <a data-toggle="collapse" data-parent="#brandhome" href="#brandhome">品牌页属性</a>\n            </div>\n            <div id="brandhome" class="panel-collapse collapse brandWrap">\n                <div class="panel-body">\n                    <div class="cateGroup singleConf">\n                        <form  class="cateItem singleItem" id="brandInfo">\n                            <a class="itemTitle" @click="slideItem($event)">品牌信息<i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌序号</div>\n                                    <input class="form-control input-sm" name="orderNo" type="text" value="${brandData.orderNo}" placeholder="品牌序号">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌ID</div>\n                                    <input class="form-control input-sm" name="brandId" type="text" value="${brandData.brandId}" placeholder="品牌ID">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌名称</div>\n                                    <input class="form-control input-sm" name="name" type="text" value="${brandData.name}" placeholder="品牌名称">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌简介</div>\n                                    <input class="form-control input-sm" name="intro" type="text" value="${brandData.intro}" placeholder="品牌简介">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌LOGO</div>\n                                    <img class="thumbnail" v-if="brandData.logo" :src="brandData.logo">\n                                    <input class="form-control input-sm" name="logo" type="text" v-model="brandData.logo" value="${brandData.logo}" placeholder="品牌LOGO">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌主页背景图</div>\n                                    <img class="thumbnail"  v-if="brandData.banner" :src="brandData.banner">\n                                    <input class="form-control input-sm" name="banner" type="text" v-model="brandData.banner" value="${brandData.banner}" placeholder="品牌主页背景图">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌主页LOGO</div>\n                                    <img class="thumbnail"  v-if="brandData.nameLogo" :src="brandData.nameLogo">\n                                    <input class="form-control input-sm" name="nameLogo" type="text" v-model="brandData.nameLogo" value="${brandData.nameLogo}" placeholder="品牌主页LOGO">\n                                </div>\n                            </div>\n                            <div class="itemBody">\n                                <div class="form-head">搜索页品牌入口</div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>搜索关键字</div>\n                                    <input class="form-control input-sm" name="searchKey" type="text" value="${brandData.searchKey}" placeholder="搜索关键字">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌搜索页图片</div>\n                                    <img class="thumbnail"  v-if="brandData.cardImg" :src="brandData.cardImg">\n                                    <input class="form-control input-sm" name="cardImg" type="text" v-model="brandData.cardImg" value="${brandData.cardImg}" placeholder="品牌搜索页图片">\n                                </div>\n                            </div>\n                            <div class="itemBody" style="display: none;">\n                                <div class="form-head">视频配置</div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌视频封面</div>\n                                    <img class="thumbnail"  v-if="brandData.mediaImg" :src="brandData.mediaImg">\n                                    <input class="form-control input-sm" name="mediaImg" type="text" v-model="brandData.mediaImg" value="${brandData.mediaImg}" placeholder="品牌视频封面">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌视频地址</div>\n                                    <input class="form-control input-sm" name="video" type="text" value="${brandData.video}" placeholder="品牌视频地址">\n                                </div>\n                            </div>\n                            <div class="itemBody"><div class="form-head">品牌主题颜色</div>\n\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌主题色</div>\n                                    <input class="form-control input-sm" name="brandThemeColor" type="text" value="${brandData.brandThemeColor}" placeholder="品牌主题色">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌主页背景色</div>\n                                    <input class="form-control input-sm" name="bannerThemeColor" type="text" value="${brandData.bannerThemeColor}" placeholder="品牌主页背景色">\n                                </div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌全部商品分类蒙版色</div>\n                                    <input class="form-control input-sm" name="categoryThemeColor" type="text" value="${brandData.categoryThemeColor}" placeholder="品牌全部商品分类蒙版色">\n                                </div>\n                            </div>\n                            <div class="itemBody">\n                                <div class="form-head">品牌频道页ID</div>\n                                <div class="form-group">\n                                    <div class="form-line"><em class="red">*</em>品牌频道页ID</div>\n                                    <input class="form-control input-sm" name="channelId" type="text" value="${brandData.channelId}" placeholder="品牌频道ID">\n                                </div>\n                            </div>\n                        </form>\n                        <form  class="cateItem singleItem" id="channelInfo">\n                            <a class="itemTitle" @click="slideItem($event)">品牌频道页<i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div>首页频道一</div>\n                                    <input class="form-control input-sm category_title" value="${channelsData.one.name}"  name="brandNav1" type="text" placeholder="首页频道一名称">\n                                    <input class="form-control input-sm" name="brandNav1_link" type="text" value="${channelsData.one.url}" placeholder="首页频道一链接">\n                                </div>\n                                <div class="form-group">\n                                    <div>首页频道二</div>\n                                    <input class="form-control input-sm" name="brandNav2" type="text" value="${channelsData.two.name}" placeholder="首页频道二名称">\n                                    <input class="form-control input-sm" name="brandNav2_link" type="text" value="${channelsData.two.url}" placeholder="首页频道二链接">\n                                </div>\n                                <div class="form-group">\n                                    <div>首页自定义导航</div>\n                                    <input class="form-control input-sm" name="brandNav3" type="text" value="${channelsData.three.name}" placeholder="首页频道二名称">\n                                    <input class="form-control input-sm" name="brandNav3_link" type="text" value="${channelsData.three.url}" placeholder="首页自定义导航链接">\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()}});Vue.component("brandhome-form",brandHomeFormComp);var iconComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{icon:!0}}},template:'<li class="template" :class="extendClass" data-field="icon" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/icon_block.png">\n        </div>\n        <p>首页ICON</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/icon_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("icon",iconComponent);var iconFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var n=e.currentTarget;$(n).find(".fa").toggleClass("fa-caret-right"),$(n).siblings(".itemBody").slideToggle()},changeUrlType:function(e){var n=e.currentTarget,a=$(n).find("option:selected").data("placeholder");$(n).siblings(".inputWord").attr("placeholder",a);var t=$(n).find("option:selected").data("link_type");$(n).siblings(".inputWord").val("");var i=$(n).siblings(".inputWord").val(),l=convertToAPPLink(t,i);$(n).siblings("[name=item_action_url]").val(l),$(n).siblings("[name=item_action_url_type]").val(t)},changeUrlInput:function(e){var n=e.currentTarget,a=$(n).siblings("select.appLink").find("option:selected").data("link_type"),t=$(n).val(),i=convertToAPPLink(a,t);$(n).siblings("[name=item_action_url]").val(i),$(n).siblings("[name=item_action_url_type]").val(a)},subForm:function(){}},template:'<div class="icon-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#icon" href="#icon">首页ICON组件</a>\n            </div>\n            <div id="icon" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <div class="form-group ">\n                            <div>背景图片URL(建议750*136)</div>\n                            <img class="thumbnail" v-if="setting.bg_img" :src="setting.bg_img">\n                            <input class="form-control input-sm bgImg removeSpace" v-model="setting.bg_img" value="${setting.bg_img}" name="bg_img" placeholder="${i18n.bannerBg}"\n                                   type="text">\n                        </div>\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="iconGroup singleConf">\n                        <form  v-for="(i,icon) in setting.data | orderBy \'position\'" class="iconItem singleItem">\n                            <a class="itemTitle" @click="slideItem($event)">ICON<span>${icon.position}</span>配置 <i class="fa fa-caret-down"></i></a>\n                            <input class="form-control input-sm" name="position" type="hidden" value="${icon.position}">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>图片URL(建议160*160)</div>\n                                    <img class="thumbnail" v-if="icon.icon_img" :src="icon.icon_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="icon.icon_img" value="${icon.icon_img}"  name="icon_img" placeholder="${i18n.imgSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div>文字</div>\n                                    <input class="form-control input-sm icon_title" value="${icon.icon_title}"  name="icon_title"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${icon.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="icon.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${icon.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" value="${icon.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${icon.item_action_url_type}">\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{}});Vue.component("icon-form",iconFormComponent);var specialComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{special:!0}}},template:'<li class="template" :class="extendClass" data-field="special" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/special_block.png">\n        </div>\n        <p>特色栏目组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/special_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("special",specialComponent);var specialFormComponent=Vue.extend({data:function(){return{setting:{data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},areaSize:[{size:"320*438"},{size:"430*200"},{size:"200*238"},{size:"230*238"}],i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var n=e.currentTarget;$(n).find(".fa").toggleClass("fa-caret-right"),$(n).siblings(".itemBody").slideToggle()},changeUrlType:function(e){var n=e.currentTarget,a=$(n).find("option:selected").data("placeholder");$(n).siblings(".inputWord").attr("placeholder",a);var t=$(n).find("option:selected").data("link_type");$(n).siblings(".inputWord").val("");var i=$(n).siblings(".inputWord").val(),l=convertToAPPLink(t,i);$(n).siblings("[name=item_action_url]").val(l),$(n).siblings("[name=item_action_url_type]").val(t)},changeUrlInput:function(e){var n=e.currentTarget,a=$(n).siblings("select.appLink").find("option:selected").data("link_type"),t=$(n).val(),i=convertToAPPLink(a,t);$(n).siblings("[name=item_action_url]").val(i),$(n).siblings("[name=item_action_url_type]").val(a)},subForm:function(){}},template:'<div class="special-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#special"\n                                          href="#special">特色栏目组件</a>\n            </div>\n            <div id="special" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="specialGroup singleConf">\n                        <form v-for="(i,special) in setting.data | orderBy \'position\'" class="specialItem singleItem">\n                            <a class="itemTitle" @click="slideItem($event)">区域<span>${special.position}</span>配置 <i class="fa fa-caret-down"></i></a>\n                            <input class="form-control input-sm" name="position" type="hidden" value="${special.position}">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>图片URL(建议${areaSize[i].size})</div>\n                                    <img class="thumbnail" v-if="special.special_img" :src="special.special_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="special.special_img" value="${special.special_img}" name="special_img"\n                                           placeholder="${i18n.imgSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type"\n                                            @change="changeUrlType($event)"\n                                            value="${special.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="special.url_type==v.value"\n                                                    data-link_Type="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text"\n                                           @change="changeUrlInput($event)"\n                                           value="${special.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden"\n                                           value="${special.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${special.item_action_url_type}">\n\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{}});Vue.component("special-form",specialFormComponent);var activityComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{activity:!0}}},template:'<li class="template" :class="extendClass"  data-field="activity" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/activity_block.png">\n        </div>\n        <p>活动组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/activity_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("activity",activityComponent);var activityFormComponent=Vue.extend({data:function(){return{setting:{},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{addActivity:function(){var e=this,n=$(event.currentTarget).closest(attrClass),a=uuid();e.setting.data.push({status:"1",position:"",start_time:"",end_time:"",banner_img:"",item_action_url:"",item_action_url_type:"",url_type:"URL",url_text:"",category_id:"",id:a}),binChange();var t=setTimeout(function(){e.resetSetting(n),clearTimeout(t)},30)},initDate:function(e,n,a){var t={};n&&"start"==a&&(t.maxDate=n),n&&"end"==a&&(t.minDate=n),$(e.target).datetimepicker({onShow:function(){this.setOptions(t)}})},slideItem:function(e){var n=e.currentTarget;$(n).find(".fa").toggleClass("fa-caret-right"),$(n).siblings(".itemBody").slideToggle()},status:function(e){var n=$("body").data("state"),a=$("body").data("server-time"),t=e.status,i=e.start_time.replace(/-/g,"/"),l=new Date(i).getTime()/1e3,s=e.end_time.replace(/-/g,"/"),o=new Date(s).getTime()/1e3;return 1==n?1==t?l>a?"未开始":o>a?"已上线":"已过期":"已关闭":0==t?"已关闭":"--"},changeUrlType:function(e){var n=e.currentTarget,a=$(n).find("option:selected").data("placeholder");$(n).siblings(".inputWord").attr("placeholder",a);var t=$(n).find("option:selected").data("link_type");$(n).siblings(".inputWord").val("");var i=$(n).siblings(".inputWord").val(),l=convertToAPPLink(t,i);$(n).siblings("[name=item_action_url]").val(l),$(n).siblings("[name=item_action_url_type]").val(t)},changeUrlInput:function(e){var n=e.currentTarget,a=$(n).siblings("select.appLink").find("option:selected").data("link_type"),t=$(n).val(),i=convertToAPPLink(a,t);$(n).siblings("[name=item_action_url]").val(i),$(n).siblings("[name=item_action_url_type]").val(a)},shutActivity:function(e){for(var n=this,a=$(e.currentTarget).closest(attrClass),t=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=n.setting.data,l=0;l<i.length;l++)t==i[l].id&&(i[l].status=0);n.setting.data=i;var s=setTimeout(function(){n.resetSetting(a);var t=$("body").data("state");saveData(t,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(s)},30)},openActivity:function(e){for(var n=this,a=$(e.currentTarget).closest(attrClass),t=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=n.setting.data,l=0;l<i.length;l++)t==i[l].id&&(i[l].status=1);n.setting.data=i;var s=setTimeout(function(){n.resetSetting(a);var t=$("body").data("state");saveData(t,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(s)},30)},deleteActivity:function(e){for(var n=this,a=$(e.currentTarget).closest(attrClass),t=$(e.currentTarget).closest(".singleItem").find(".uid").val(),i=n.setting.data,l=[],s=0;s<i.length;s++)t!=i[s].id&&l.push(i[s]);n.setting.data=l;var o=setTimeout(function(){n.resetSetting(a);var t=$("body").data("state");saveData(t,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(o)},30)},resetSetting:function(e){var n=$(e).find("form.commonConf").eq(0).serializeObject(),a=$(e).find(".singleConf form.singleItem"),t=$(a).length,i=[];if(t>0)for(var l=0;t>l;l++)i.push($(a[l]).serializeObject());var s=_.extend(n,{data:i});resetForm(s)},subForm:function(){}},template:'<div class="activity-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#activity" href="#activity">活动组件</a>\n            </div>\n            <div id="activity" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </form>\n\n                    <div v-if="setting.data && setting.data.length>0" class="activityGroup singleConf">\n                        <form  v-for="(i,activity) in setting.data" class="activityItem singleItem">\n                            <input type="hidden" class="uid" name="id" value="${activity.id}">\n                            <a class="itemTitle" @click="slideItem($event)">配置(${activity.position},${status(activity)}) <i class="fa fa-caret-down"></i></a>\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <div><em class="red">*</em>排序</div>\n                                    <input class="form-control input-sm position" value="${activity.position}" v-model="activity.position" name="position" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>开始时间</div>\n                                    <input @mousedown="initDate($event,activity.end_time,\'start\')" v-model="activity.start_time" class="form-control input-sm startTime" value="${activity.start_time}"  name="start_time" placeholder="${i18n.start_time}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>结束时间</div>\n                                    <input @mousedown="initDate($event,activity.start_time,\'end\')" v-model="activity.end_time" class="form-control input-sm endTime" value="${activity.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>活动图片URL(建议750*424)</div>\n                                    <img class="thumbnail" v-if="activity.banner_img" :src="activity.banner_img">\n                                    <input class="form-control input-sm imgSrc removeSpace" v-model="activity.banner_img" value="${activity.banner_img}" name="banner_img" placeholder="${i18n.bannerSrc}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>跳转URL/APP原生页面</div>\n                                    <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${activity.url_type}">\n                                        <template v-for="(k,v) in urlType">\n                                            <option v-if="activity.url_type==v.value"\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}"\n                                                    selected>\n                                                ${v.value}\n                                            </option>\n                                            <option v-else\n                                                    data-link_Type ="${k}"\n                                                    data-placeholder="${v.palceholderVal}">\n                                                ${v.value}\n                                            </option>\n                                        </template>\n                                    </select>\n                                    <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${activity.url_text}" placeholder="URL" type="text">\n                                    <input class="form-control input-sm" name="item_action_url" type="hidden" v-model="activity.item_action_url" value="${activity.item_action_url}">\n                                    <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${activity.item_action_url_type}">\n                                </div>\n                                <div class="form-group">\n                                    <div><em class="red">*</em>Category ID</div>\n                                    <input class="form-control input-sm position" value="${activity.category_id}"  name="category_id" placeholder="${i18n.please_input_number}"\n                                           type="text">\n                                </div>\n                                <div class="form-group">\n                                    <div class="ops">\n                                        <a class="btn btn-warning btn-sm shutActivity" @click="shutActivity($event)" :class="{\'active\':activity.status==1}" type="button">${i18n.shut}\n                                        </a>\n                                        <a class="btn btn-success btn-sm openActivity" @click="openActivity($event)" :class="{\'active\':activity.status==0}" type="button">${i18n.open}\n                                        </a>\n                                    </div>\n                                    <input class="status" type="hidden" name="status" value="${activity.status}">\n                                </div>\n                            </div>\n                            <div class="form-group delIcon">\n                                <div class="ops">\n                                    <a class="btn btn-sm delBanner" @click="deleteActivity($event)" type="button">×</a>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <a @click="addActivity($event)" class="addActivity btn btn-primary">${i18n.add_config} + </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log()
}});Vue.component("activity-form",activityFormComponent);var separateComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{separate:!0}}},template:'<li class="template" :class="extendClass" data-field="separate" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/separate_block.png">\n        </div>\n        <p>分割线组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/separate_canvas.png">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("separate",separateComponent);var separateFormComponent=Vue.extend({data:function(){return{setting:{isNew:null,data:[]},show:!1,urlType:{url:{value:"URL",palceholderVal:"URL"},channel:{value:"频道ID",palceholderVal:"示例:1234"},detail:{value:"SKU",palceholderVal:"示例:CBD492"},brand:{value:"品牌ID",palceholderVal:"示例：123"},category:{value:"前台分类",palceholderVal:"示例:面膜"},"function":{value:"功效",palceholderVal:"示例:补水保湿"},search:{value:"搜索",palceholderVal:"搜索关键词"}},i18n:window.i18n[document.body.getAttribute("data-localize")],picked:"block"}},methods:{changeUrlType:function(e){var n=e.currentTarget,a=$(n).find("option:selected").data("placeholder");$(n).siblings(".inputWord").attr("placeholder",a);var t=$(n).find("option:selected").data("link_type");$(n).siblings(".inputWord").val("");var i=$(n).siblings(".inputWord").val(),l=convertToAPPLink(t,i);$(n).siblings("[name=item_action_url]").val(l),$(n).siblings("[name=item_action_url_type]").val(t)},changeUrlInput:function(e){var n=e.currentTarget,a=$(n).siblings("select.appLink").find("option:selected").data("link_type"),t=$(n).val(),i=convertToAPPLink(a,t);$(n).siblings("[name=item_action_url]").val(i),$(n).siblings("[name=item_action_url_type]").val(a)},subForm:function(){}},template:'<div class="separate-attr attr-form" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading"><a data-toggle="collapse" data-parent="#separate" href="#separate">分割线组件</a>\n            </div>\n            <div id="separate" class="panel-collapse collapse">\n                <div class="panel-body">\n                    <form class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                        <div class="form-group">\n                            <div><em class="red"></em>新人展示</div>\n                            <input class="form-control input-sm isNew" type="checkbox" value="1" v-model="setting.isNew" name="isNew" />\n                        </div>\n                    </form>\n                    <div v-if="setting.data && setting.data.length>0" class="separateGroup singleConf">\n                        <form  v-for="(i,separate) in setting.data" class="separateItem singleItem">\n                            <div class="itemBody">\n                                <div class="form-group">\n                                    <label><input type="radio" value="block" v-model="picked" name="space_type"> 色块分割</label>\n                                    <label><input type="radio" value="img" v-model=\'picked\' name="space_type"> 图片分割</label>\n                                </div>\n                                <template v-if="picked==\'block\'">\n                                    <div class="form-group" >\n                                        <div>高度/px(建议20px)</div>\n                                        <input class="form-control input-sm space_height" value="${separate.space_height}" name="space_height" />\n                                    </div>\n                                    <div class="form-group" >\n                                        <div>背景色(建议#f5f5f5)</div>\n                                        <input class="form-control input-sm space_color" value="${separate.space_color}" name="space_color" />\n                                    </div>\n                                </template>\n                                <template v-else>\n                                    <div class="form-group">\n                                        <div><em class="red">*</em>分割图片URL(建议750*20)</div>\n                                        <img class="thumbnail" v-if="separate.space_bg" :src="separate.space_bg">\n                                        <input class="form-control input-sm space_bg removeSpace" v-model="separate.space_bg" value="${separate.space_bg}" name="space_bg" />\n                                    </div>\n\n                                    <div class="form-group">\n                                        <div>跳转URL/APP原生页面</div>\n                                        <select class="form-control linkKind appLink" name="url_type" @change="changeUrlType($event)" value="${separate.url_type}">\n                                            <template v-for="(k,v) in urlType">\n                                                <option v-if="separate.url_type==v.value"\n                                                        data-link_Type ="${k}"\n                                                        data-placeholder="${v.palceholderVal}"\n                                                        selected>\n                                                    ${v.value}\n                                                </option>\n                                                <option v-else\n                                                        data-link_Type ="${k}"\n                                                        data-placeholder="${v.palceholderVal}">\n                                                    ${v.value}\n                                                </option>\n                                            </template>\n                                        </select>\n                                        <input class="form-control input-sm inputWord" name="url_text" @change="changeUrlInput($event)" value="${separate.url_text}" placeholder="URL" type="text">\n                                        <input class="form-control input-sm" name="item_action_url" type="hidden" value="${separate.item_action_url}">\n                                        <input class="form-control input-sm" name="item_action_url_type" type="hidden" value="${separate.item_action_url_type}">\n                                    </div>\n                                </template>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){},watch:{setting:function(){var e=this;e.setting.data.length>0&&(e.picked="block"==e.setting.data[0].space_type?"block":"img")}}});Vue.component("separate-form",separateFormComponent);var teleComponent=Vue.extend({props:["setting"],data:function(){return{extendClass:{imagetext:!0}}},template:'<li class="template" :class="extendClass" imagetext-field="imagetext" :data-setting="setting | json">\n    <div class="block-img">\n        <div>\n            <img src="/img/static/img/component/imagetext-min.jpg">\n        </div>\n        <p>图文组件</p>\n    </div>\n    <div class="canvas-img" >\n        <img src="/img/static/img/component/imagetext.jpg">\n        <i class="close-btn">×</i>\n    </div>\n</li>',methods:{},created:function(){}});Vue.component("imagetext",teleComponent);var teleFormComponent=Vue.extend({data:function(){return{setting:{status:0},show:!1,i18n:window.i18n[document.body.getAttribute("data-localize")]}},methods:{slideItem:function(e){var n=e.currentTarget;$(n).find(".fa").toggleClass("fa-caret-right"),$(n).siblings(".itemBody").slideToggle()},initDate:function(e,n,a){var t={};n&&"start"==a&&(t.maxDate=n),n&&"end"==a&&(t.minDate=n),$(e.target).datetimepicker({onShow:function(){this.setOptions(t)}})},shutImagetext:function(e){var n=this;n.setting.status=0,resetForm({status:0});var a=setTimeout(function(){var n=$("body").data("state");saveData(n,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(a)},30)},openImagetext:function(e){var n=this;n.setting.status=1,resetForm({status:1});var a=setTimeout(function(){var n=$("body").data("state");saveData(n,function(e){1==e.code?window.location.href="/app/home/"+e.data.pageId:alert(e.msg)},$(e.currentTarget)),clearTimeout(a)},30)}},template:'<div class="imagetext-attr" v-show="show" role="form">\n    <div class="panel-group">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <a data-toggle="collapse" data-parent="#imagetext" href="#imagetext">图文组件</a>\n            </div>\n            <div id="imagetext" class="panel-collapse collapse imagetextWrap">\n                <div class="panel-body singleConf">\n                    <div class="commonConf">\n                        <input type="hidden" class="has_change" name="has_change" value="${setting.has_change}">\n                    </div>\n                    <form class="teletextItem singleItem" data-val="${setting.id}">\n                        <a class="itemTitle" @click="slideItem($event)">图文组件配置 <i class="fa fa-caret-down"></i></a>\n                        <div class="itemBody">\n                            <div class="form-group">\n                                <div><em class="red">*</em>开始时间</div>\n                                <input @mousedown="initDate($event,setting.end_time,\'start\')" class="form-control input-sm startTime" value="${setting.start_time}" name="start_time" placeholder="${i18n.start_time}"\n                                       type="text">\n                            </div>\n                            <div class="form-group">\n                                <div><em class="red">*</em>结束时间</div>\n                                <input @mousedown="initDate($event,setting.start_time,\'end\')" class="form-control input-sm endTime" value="${setting.end_time}" name="end_time" placeholder="${i18n.end_time}" type="text">\n                            </div>\n                            <div class="form-group">\n                                <div><em class="red">*</em>组件标题(长度不能大于<span style="color:red;">16个字符</span>)</div>\n                                <input class="form-control input-sm title" value="${setting.title}" name="title" placeholder="${i18n.teletextName}" type="text">\n                            </div>\n                            <div class="form-group teleId">\n                                <div><em class="red">*</em>图文ID(多个图文id请用<span style="color:red;">英文逗号</span>分隔)</div>\n                                <input class="form-control input-sm position" value="${setting.data.ids}" name="ids" type="text">\n                            </div>\n                            <div class="form-group">\n                                <div class="ops">\n                                    <a class="btn btn-warning btn-sm shutImagetext" @click="shutImagetext($event)" :class="{\'active\':setting.status==1}" type="button">${i18n.shut}\n                                    </a>\n                                    <a class="btn btn-success btn-sm openImagetext" @click="openImagetext($event)" :class="{\'active\':setting.status==0}" type="button">${i18n.open}\n                                    </a>\n                                </div>\n                                <input class="status" type="hidden" name="status" value="${setting.status}">\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',created:function(){console.log(this.setting)}});Vue.component("imagetext-form",teleFormComponent);var vue=new Vue({el:"html",data:{brandData:{},callBackId:"",cbBrandId:"",channelsData:{one:{name:"",url:""},two:{name:"",url:""},three:{name:"",url:""}}},methods:{saveData:function(e){var n=this,a=!1,t=$(e.currentTarget),i=$("#brandInfo");if(a=n.validateBrand($("#brandInfo").serializeObject()),!$(t).hasClass("disable")&&($(t).addClass("disable"),i.length&&a)){var l,s,o,r,c={},d=($("body").data("page-id"),[]);c=$("#brandInfo").serializeObject(),l=$("#channelInfo").serializeObject(),c.admin=$(".header").data("name"),s={name:l.brandNav1,url:l.brandNav1_link},o={name:l.brandNav2,url:l.brandNav2_link},r={name:l.brandNav3,url:l.brandNav3_link},d.push(s,o,r),c.id=n.callBackId,c.channels=d,$.ajax({type:"post",dataType:"json",url:"/api/internal/sas/brand/save",data:{data:JSON.stringify(c)},success:function(e){console.log(e.msg)},error:function(){console.log("出现异常")}}),saveData("0",function(e){var a=n.callBackId;1==e.code?window.location.href="/app/brand/"+e.data.pageId+"/"+a:($(t).removeClass("disable"),alert(e.msg))},$(e.currentTarget))}},validateBrand:function(e){var n=e?e:null;for(var a in n){if(""==n[a]){var t=$("#brandInfo").find("input[name="+a+"]");return t.hasClass("err")||t.addClass("err"),alert("品牌页属性有必填项未填写"),!1}var t=$("#brandInfo").find("input[name="+a+"]");return t.removeClass("err"),!0}},publish:function(e){var n=this,a=$(e.currentTarget);$(a).hasClass("disable")||($(a).addClass("disable"),saveData("1",function(e){var t=n.callBackId;1==e.code?window.location.href="/app/brand/"+e.data.pageId+"/"+t:($(a).removeClass("disable"),alert(e.msg))},$(e.currentTarget)))},getBrandInfo:function(){var e=this,n=window.location.pathname.slice(-1),a=n?n:1;e.channelsData={one:{name:"",url:""},two:{name:"",url:""},three:{name:"",url:""}},$.ajax({type:"post",dataType:"json",data:{id:a},url:"/api/internal/sas/brand/detail",success:function(n){if(1==n.code){var a=n.data.channels;e.brandData=n.data,e.callBackId=n.data.id,e.cbBrandId=n.data.brandId,a&&a.length>0&&(a[0].name&&(e.channelsData.one.name=a[0].name,a[0].url&&(e.channelsData.one.url=a[0].url)),a[1].name&&(e.channelsData.two.name=a[1].name,a[1].url&&(e.channelsData.two.url=a[1].url)),a[2].name&&(e.channelsData.three.name=a[2].name,a[2].url&&(e.channelsData.three.url=a[2].url)))}},error:function(){console.log("出现异常")}})},getBrandId:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(n);return null!=a?a[2]:null}},ready:function(){var e=this;sortableInit(this),e.getBrandInfo()}});