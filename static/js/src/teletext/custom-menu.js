!function(){var e=window.wangEditor,i=window.jQuery;e.createMenu(function(a){var t="intoDiv";if(a(t)){var n=this,s=n.config.lang,l=new e.Menu({editor:n,id:t,title:"插入商品",$domNormal:i('<a href="#" tabindex="-1"><i class="wangeditor-menu-img-newspaper"></i></a>'),$domSelected:i('<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-newspaper"></i></a>')}),d=i("<div></div>"),o=i('<div style="margin:15px 10px 5px 10px;" class="clearfix"></div>'),c=o.clone(),r=o.clone().css("margin","0 10px"),p=i('<input type="text" class="block" placeholder="填写商品SKU">'),v=i('<div style="height: 14px; color: red; font-size: 12px; margin-top: 5px;"></div>'),u=i('<label><img style="width: 100%;" src="/img/static/img/img-placehold.jpg"></label>'),m=i('<button class="right">'+s.submit+"</button>"),g=i('<button class="right gray">'+s.cancel+"</button>");o.append(p).append(v),c.append(u),r.append(m).append(g),d.append(o).append(c).append(r),l.dropPanel=new e.DropPanel(n,l,{$content:d,width:300}),l.clickEvent=function(){var e=this,i=e.dropPanel;if(i.isShowing)return void i.hide();p.val(""),v.html("");var a="";a&&p.val(a),i.show()},g.click(function(e){e.preventDefault(),l.dropPanel.hide()}),m.click(function(a){a.preventDefault();var t,s=i.trim(p.val());return s?(i.ajax({url:"/api/internal/sas/ImageText/getProductInfo",type:"post",dataType:"json",data:{sku:s},success:function(e){if(1==e.code){{e.data}t='<div class="teletext-prd" data-val="'+s+'"> <div class="tele-cover"></div><div class="teletext-cnt"><div class="teletext-place"> <div class="img"></div> <div class="foot"></div> </div> <div class="title">sku: '+s+'</div> <i class="del-prd"></i> </div></div>',v.html(""),n.command(a,"insertHtml",t),l.dropPanel.hide();var d='<span class="skus-item">'+s+'<i class="del-prd"></i></span>';i("#tele-skus").append(d)}else v.html("未找到相关SKU商品内容。"),console.log("出现异常")},error:function(){console.error("出现异常")}}),void(e.userAgent.indexOf("Firefox")>0&&(t+="<span>&nbsp;</span>"))):!1}),n.menus[t]=l}})}();