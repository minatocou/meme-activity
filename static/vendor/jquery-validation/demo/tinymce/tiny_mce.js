var tinymce={majorVersion:"3",minorVersion:"2.1.1",releaseDate:"2008-11-27",_init:function(){function e(e){return e.src&&/tiny_mce(|_dev|_src|_gzip|_jquery|_prototype).js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(a.suffix="_src"),-1!=(r=e.src.indexOf("?"))&&(a.query=e.src.substring(r+1)),a.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),o&&-1==a.baseURL.indexOf("://")&&(a.baseURL=o+a.baseURL),a.baseURL):null}var t,n,i,o,r,s,a=this,c=document,d=window,l=navigator,u=l.userAgent;if(a.isOpera=d.opera&&opera.buildNumber,a.isWebKit=/WebKit/.test(u),a.isOldWebKit=a.isWebKit&&!d.getSelection().getRangeAt,a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(u)&&/Explorer/gi.test(l.appName),a.isIE6=a.isIE&&/MSIE [56]/.test(u),a.isGecko=!a.isWebKit&&/Gecko/.test(u),a.isMac=-1!=u.indexOf("Mac"),a.isAir=/adobeair/i.test(u),d.tinyMCEPreInit)return a.suffix=tinyMCEPreInit.suffix,a.baseURL=tinyMCEPreInit.base,void(a.query=tinyMCEPreInit.query);for(a.suffix="",n=c.getElementsByTagName("base"),t=0;t<n.length;t++)(s=n[t].href)&&(/^https?:\/\/[^\/]+$/.test(s)&&(s+="/"),o=s?s.match(/.*\//)[0]:"");for(n=c.getElementsByTagName("script"),t=0;t<n.length;t++)if(e(n[t]))return;if(i=c.getElementsByTagName("head")[0])for(n=i.getElementsByTagName("script"),t=0;t<n.length;t++)if(e(n[t]))return},is:function(e,t){var n=typeof e;return t?"array"==t&&e instanceof Array?!0:n==t:"undefined"!=n},each:function(e,t,n){var i,o;if(!e)return 0;if(n=n||e,"undefined"!=typeof e.length){for(i=0,o=e.length;o>i;i++)if(t.call(n,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&t.call(n,e[i],i,e)===!1)return 0;return 1},map:function(e,t){var n=[];return tinymce.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return tinymce.each(e,function(e){(!t||t(e))&&n.push(e)}),n},inArray:function(e,t){var n,i;if(e)for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},extend:function(e,t){var n,i=arguments;for(n=1;n<i.length;n++)t=i[n],tinymce.each(t,function(t,n){"undefined"!=typeof t&&(e[n]=t)});return e},trim:function(e){return(e?""+e:"").replace(/^\s*|\s*$/g,"")},create:function(e,t){var n,i,o,r,s,a=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],i=a.createNS(e[3].replace(/\.\w+$/,"")),!i[o]){if("static"==e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},c=1),i[o]=t[o],a.extend(i[o].prototype,t),e[5]&&(n=a.resolve(e[5]).prototype,r=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=c?function(){return n[r].apply(this,arguments)}:function(){return this.parent=n[r],s.apply(this,arguments)},i[o].prototype[o]=i[o],a.each(n,function(e,t){i[o].prototype[t]=n[t]}),a.each(t,function(e,t){n[t]?i[o].prototype[t]=function(){return this.parent=n[t],e.apply(this,arguments)}:t!=o&&(i[o].prototype[t]=e)})),a.each(t["static"],function(e,t){i[o][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],i[o].prototype)}},walk:function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),tinymce.each(e,function(e,o){return t.call(i,e,o,n)===!1?!1:void tinymce.walk(e,t,n,i)}))},createNS:function(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t},resolve:function(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;i>n&&(t=t[e[n]],t);n++);return t},addUnload:function(e,t){function n(){var e,t,s=o.unloads;if(s){for(t in s)e=s[t],e&&e.func&&e.func.call(e.scope,1);r.detachEvent?(r.detachEvent("onbeforeunload",i),r.detachEvent("onunload",n)):r.removeEventListener&&r.removeEventListener("unload",n,!1),o.unloads=e=s=r=n=null,window.CollectGarbage&&window.CollectGarbage()}}function i(){function e(){t.detachEvent("onstop",e),n(),t=null}var t=document;"interactive"==t.readyState&&(t.attachEvent("onstop",e),window.setTimeout(function(){t.detachEvent("onstop",e)},0))}var o=this,r=window;return e={func:e,scope:t||this},o.unloads?o.unloads.push(e):(r.attachEvent?(r.attachEvent("onunload",n),r.attachEvent("onbeforeunload",i)):r.addEventListener&&r.addEventListener("unload",n,!1),o.unloads=[e]),e},removeUnload:function(e){var t=this.unloads,n=null;return tinymce.each(t,function(i,o){return i&&i.func==e?(t.splice(o,1),n=e,!1):void 0}),n},explode:function(e,t){return e?tinymce.map(e.split(t||","),tinymce.trim):e},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e}};window.tinymce=tinymce,tinymce._init(),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(i,o){return e==i.cb?(n=e,t.splice(o,1),!1):void 0}),n},dispatch:function(){var e,t,n,i=arguments,o=this.listeners;for(t=0;t<o.length&&(n=o[t],e=n.cb.apply(n.scope,i),e!==!1);t++);return e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var i,o=this;return n=o.settings=n||{},/^(mailto|news|javascript|about):/i.test(t)||/^\s*#/.test(t)?void(o.source=t):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),-1===t.indexOf(":/")&&0!==t.indexOf("//")&&(t=(n.base_uri.protocol||"http")+"://mce_host"+o.toAbsPath(n.base_uri.path,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),o[e]=i}),void((i=n.base_uri)&&(o.protocol||(o.protocol=i.protocol),o.userInfo||(o.userInfo=i.userInfo),o.port||"mce_host"!=o.host||(o.port=i.port),o.host&&"mce_host"!=o.host||(o.host=i.host),o.source="")))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;return"./"===e?e:(e=new tinymce.util.URI(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol?e.getURI():(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t))},toAbsolute:function(e,t){var e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host?t:0)},toRelPath:function(e,t){var n,i,o,r=0,s="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;o>i;i++)if(i>=n.length||e[i]!=n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;o>i;i++)if(i>=e.length||e[i]!=n[i]){r=i+1;break}if(1==r)return t;for(i=0,o=e.length-(r-1);o>i;i++)s+="../";for(i=r-1,o=n.length;o>i;i++)s+=i!=r-1?"/"+n[i]:n[i];return s},toAbsPath:function(t,n){var i,o=0,r=[];for(t=t.split("/"),n=n.split("/"),e(t,function(e){e&&r.push(e)}),t=r,i=n.length-1,r=[];i>=0;i--)0!=n[i].length&&"."!=n[i]&&(".."!=n[i]?o>0?o--:r.push(n[i]):o++);return i=t.length-o,0>=i?"/"+r.reverse().join("/"):"/"+t.slice(0,i).join("/")+"/"+r.reverse().join("/")},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,i=this.get(t);return i&&e(i.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,i,o,r,s){var a="";e(n,function(e,t){a+=(a?"&":"")+escape(t)+"="+escape(e)}),this.set(t,a,i,o,r,s)},get:function(e){var t,n,i=document.cookie,o=e+"=";if(i){if(n=i.indexOf("; "+o),-1==n){if(n=i.indexOf(o),0!=n)return null}else n+=2;return t=i.indexOf(";",n),-1==t&&(t=i.length),unescape(i.substring(n+o.length,t))}},set:function(e,t,n,i,o,r){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(i?"; path="+escape(i):"")+(o?"; domain="+o:"")+(r?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),tinymce.create("static tinymce.util.JSON",{serialize:function(e){var t,n,i,o=tinymce.util.JSON.serialize;if(null==e)return"null";if(i=typeof e,"string"==i)return n="\bb	t\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,i){return t=n.indexOf(i),t+1?"\\"+n.charAt(t+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if("object"==i){if(e instanceof Array){for(t=0,n="[";t<e.length;t++)n+=(t>0?",":"")+o(e[t]);return n+"]"}n="{";for(t in e)n+="function"!=typeof e[t]?(n.length>1?',"':'"')+t+'":'+o(e[t]):"";return n+"}"}return""+e},parse:function(s){try{return eval("("+s+")")}catch(ex){}}}),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(e){i=0;try{i=new ActiveXObject(e)}catch(t){}return i}function n(){!e.async||4==i.readyState||s++>1e4?(e.success&&1e4>s&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,s>1e4?"TIMED_OUT":"GENERAL",i,e),i=null):r.setTimeout(n,10)}var i,o,r=window,s=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",i=r.XMLHttpRequest?new XMLHttpRequest:t("Microsoft.XMLHTTP")||t("Msxml2.XMLHTTP")){if(i.overrideMimeType&&i.overrideMimeType(e.content_type),i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&i.setRequestHeader("Content-Type",e.content_type),i.send(e.data),!e.async)return n();o=r.setTimeout(n,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(i){var o=i.error,r=i.success;i=e(this.settings,i),i.success=function(e,n){e=t.parse(e),"undefined"==typeof e&&(e={error:"JSON Parse error."}),e.error?o.call(i.error_scope||i.scope,e.error,n):r.call(i.success_scope||i.scope,e.result)},i.error=function(e,t){o.call(i.error_scope||i.scope,e,t)},i.data=t.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params}),i.content_type="application/json",n.send(i)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(){var each=tinymce.each,is=tinymce.is,isWebKit=tinymce.isWebKit,isIE=tinymce.isIE;tinymce.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,listeners:{},pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,cache:{},idPattern:/^#[\w]+$/,elmPattern:/^[\w_*]+$/,elmClassPattern:/^([\w_]*)\.([\w_]+)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,t){var n=this;if(n.doc=e,n.win=window,n.files={},n.cssFlicker=!1,n.counter=0,n.boxModel=!tinymce.isIE||"CSS1Compat"==e.compatMode,n.stdMode=8===e.documentMode,this.settings=t=tinymce.extend({keep_values:!1,hex_colors:1,process_html:1},t),tinymce.isIE6)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(i){n.cssFlicker=!0}tinymce.addUnload(n.destroy,n)},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t)||e.offsetWidth||e.clientWidth,h:parseInt(n)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){var i,o=this.settings;for(e=this.get(e),o.strict_root&&(n=n||this.getRoot()),is(t,"string")&&(i=t.toUpperCase(),t=function(e){var t=!1;return 1==e.nodeType&&"*"===i?(t=!0,!1):(each(i.split(","),function(n){return 1==e.nodeType&&(o.strict&&e.nodeName.toUpperCase()==n||e.nodeName.toUpperCase()==n)?(t=!0,!1):void 0}),t)});e;){if(e==n)return null;if(t(e))return e;e=e.parentNode}return null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},select:function(pa,s){function get(e,t){return e.getElementsByTagName(t.toLowerCase())}function get(e,t){return e.getElementsByTagName(t)}function collect(e){e.mce_save||(e.mce_save=1,o.push(e))}function collectIE(e){e.getAttribute("mce_save")||(e.setAttribute("mce_save","1"),o.push(e))}function find(e,t,n){var i,o,r=get(n,e);for(i=0,o=r.length;o>i;i++)t(r[i])}var t=this,cs,c,pl,o=[],x,i,l,n,xp;if(s=t.get(s)||t.doc,s.querySelectorAll)return s!=t.doc&&(i=s.id,s.id="_mc_tmp",pa="#_mc_tmp "+pa),l=tinymce.grep(s.querySelectorAll(pa)),s.id=i,l;if(t.selectorRe||(t.selectorRe=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@([\w\\]+)([\^\$\*!]?=)([\w\\]+)\])?(?:\:([\w\\]+))?/i),tinymce.isAir)return each(tinymce.explode(pa),function(e){for((xp=t.cache[e])||(xp="",each(e.split(" "),function(e){e=t.selectorRe.exec(e),xp+=e[1]?"//"+e[1]:"//*",e[2]&&(xp+="[@id='"+e[2]+"']"),e[3]&&each(e[3].split("."),function(e){xp+="[@class = '"+e+"' or contains(concat(' ', @class, ' '), ' "+e+" ')]"})}),t.cache[e]=xp),xp=t.doc.evaluate(xp,s,null,4,null);n=xp.iterateNext();)o.push(n)}),o;if(t.settings.strict,t.elmPattern.test(pa)){for(x=get(s,pa),i=0,l=x.length;l>i;i++)o.push(x[i]);return o}if(t.elmClassPattern.test(pa)){for(pl=t.elmClassPattern.exec(pa),x=get(s,pl[1]||"*"),c=" "+pl[2]+" ",i=0,l=x.length;l>i;i++)n=x[i],n.className&&-1!==(" "+n.className+" ").indexOf(c)&&o.push(n);return o}return each(pa.split(","),function(v,i){if(v=tinymce.trim(v),t.elmPattern.test(v))return void each(get(s,v),function(e){collect(e)});if(t.elmClassPattern.test(v))return x=t.elmClassPattern.exec(v),void each(get(s,x[1]),function(e){t.hasClass(e,x[2])&&collect(e)});if(!(cs=t.cache[pa])){for(cs="x=(function(cf, s) {",pl=v.split(" "),each(pl,function(e){var n=t.selectorRe.exec(e);n[1]=n[1]||"*",cs+='find("'+n[1]+'", function(n) {',n[2]&&(cs+='if (n.id !== "'+n[2]+'") return;'),n[3]&&(cs+='var c = " " + n.className + " ";',cs+="if (",c="",each(n[3].split("."),function(e){e&&(c+=(c?"||":"")+'c.indexOf(" '+e+' ") === -1')}),cs+=c+") return;")}),cs+="cf(n);",i=pl.length-1;i>=0;i--)cs+="}, "+(i?"n":"s")+");";cs+="})",t.cache[pa]=cs=eval(cs)}cs(isIE?collectIE:collect,s)}),each(o,function(e){isIE?e.removeAttribute("mce_save"):delete e.mce_save}),o},add:function(e,t,n,i,o){var r=this;return this.run(e,function(e){var s;return s=is(t,"string")?r.doc.createElement(t):t,r.setAttribs(s,n),i&&(i.nodeType?s.appendChild(i):r.setHTML(s,i)),o?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,o="",r=this;o+="<"+e;for(i in t)t.hasOwnProperty(i)&&(o+=" "+i+'="'+r.encode(t[i])+'"');return tinymce.is(n)?o+">"+n+"</"+e+">":o+" />"},remove:function(e,t){return this.run(e,function(e){var n;return(n=e.parentNode)?(t&&each(e.childNodes,function(t){n.insertBefore(t.cloneNode(!0),e)}),n.removeChild(e)):null})},setStyle:function(e,t,n){var i=this;return i.run(e,function(o){var r;switch(r=o.style,t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),i.pixelStyles.test(t)&&(tinymce.is(n,"number")||/^[\-0-9\.]+$/.test(n))&&(n+="px"),t){case"opacity":isIE&&(r.filter=""===n?"":"alpha(opacity="+100*n+")",e.currentStyle&&e.currentStyle.hasLayout||(r.display="inline-block")),r[t]=r["-moz-opacity"]=r["-khtml-opacity"]=n||"";break;case"float":isIE?r.styleFloat=n:r.cssFloat=n;break;default:r[t]=n||""}i.settings.update_styles&&i.setAttrib(o,"mce_style")})},getStyle:function(e,t,n){if(e=this.get(e),!e)return!1;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(i){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=isIE?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style[t]},setStyles:function(e,t){var n,i=this,o=i.settings;n=o.update_styles,o.update_styles=0,each(t,function(t,n){i.setStyle(e,n,t)}),o.update_styles=n,o.update_styles&&i.setAttrib(e,o.cssText)},setAttrib:function(e,t,n){var i=this;if(e&&t)return i.settings.strict&&(t=t.toLowerCase()),this.run(e,function(e){var o=i.settings;switch(t){case"style":if(!is(n,"string"))return void each(n,function(t,n){i.setStyle(e,n,t)});o.keep_values&&(n&&!i._isRes(n)?e.setAttribute("mce_style",n,2):e.removeAttribute("mce_style",2)),e.style.cssText=n;break;case"class":e.className=n||"";break;case"src":case"href":o.keep_values&&(o.url_converter&&(n=o.url_converter.call(o.url_converter_scope||i,n,t,e)),i.setAttrib(e,"mce_"+t,n,2));break;case"shape":e.setAttribute("mce_style",n)}is(n)&&null!==n&&0!==n.length?e.setAttribute(t,""+n,2):e.removeAttribute(t,2)})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){each(t,function(t,i){n.setAttrib(e,i,t)})})},getAttrib:function(e,t,n){var i,o=this;if(e=o.get(e),!e||1!==e.nodeType)return!1;if(is(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(i=e.getAttribute("mce_"+t)))return i;if(isIE&&o.props[t]&&(i=e[o.props[t]],i=i&&i.nodeValue?i.nodeValue:i),i||(i=e.getAttribute(t,2)),"style"===t&&(i=i||e.style.cssText,i&&(i=o.serializeStyle(o.parseStyle(i)),o.settings.keep_values&&!o._isRes(i)&&e.setAttribute("mce_style",i))),isWebKit&&"class"===t&&i&&(i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),isIE)switch(t){case"rowspan":case"colspan":1===i&&(i="");break;case"size":("+0"===i||20===i)&&(i="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===i&&(i="");break;case"hspace":-1===i&&(i="");break;case"maxlength":case"tabindex":(32768===i||2147483647===i||"32768"===i)&&(i="");break;case"compact":case"noshade":case"nowrap":return 65535===i?t:n;case"shape":i=i.toLowerCase();break;default:0===t.indexOf("on")&&i&&(i=(""+i).replace(/^function\s+anonymous\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return void 0!==i&&null!==i&&""!==i?""+i:n},getPos:function(e){var t,n,i=this,o=0,r=0,s=i.doc;if(e=i.get(e),e&&isIE)return e=e.getBoundingClientRect(),t=i.boxModel?s.documentElement:s.body,o=i.getStyle(i.select("html")[0],"borderWidth"),o=("medium"==o||i.boxModel&&!i.isIE6)&&2||o,e.top+=i.win.self!=i.win.top?2:0,{x:e.left+t.scrollLeft-o,y:e.top+t.scrollTop-o};for(n=e;n;)o+=n.offsetLeft||0,r+=n.offsetTop||0,n=n.offsetParent;for(n=e;n&&(/^table-row|inline.*/i.test(i.getStyle(n,"display",1))||(o-=n.scrollLeft||0,r-=n.scrollTop||0),n=n.parentNode,n!=s.body););return{x:o,y:r}},parseStyle:function(e){function t(e,t,n){var i,o,s,a;i=r[e+"-top"+t],i&&(o=r[e+"-right"+t],i==o&&(s=r[e+"-bottom"+t],o==s&&(a=r[e+"-left"+t],s==a&&(r[n]=a,delete r[e+"-top"+t],delete r[e+"-right"+t],delete r[e+"-bottom"+t],delete r[e+"-left"+t]))))}function n(e,t,n,i){var o;o=r[t],o&&(o=r[n],o&&(o=r[i],o&&(r[e]=r[t]+" "+r[n]+" "+r[i],delete r[t],delete r[n],delete r[i])))}var i=this,o=i.settings,r={};return e?(e=e.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_"),each(e.split(";"),function(e){var t,n=[];e&&(e=e.replace(/_MCE_SEMI_/g,";"),e=e.replace(/url\([^\)]+\)/g,function(e){return n.push(e),"url("+n.length+")"}),e=e.split(":"),t=tinymce.trim(e[1]),t=t.replace(/url\(([^\)]+)\)/g,function(e,t){return n[parseInt(t)-1]}),t=t.replace(/rgb\([^\)]+\)/g,function(e){return i.toHex(e)}),o.url_converter&&(t=t.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(e,t){return"url("+o.url_converter.call(o.url_converter_scope||i,i.decode(t),"style",null)+")"})),r[tinymce.trim(e[0]).toLowerCase()]=t)}),t("border","","border"),t("border","-width","border-width"),t("border","-color","border-color"),t("border","-style","border-style"),t("padding","","padding"),t("margin","","margin"),n("border","border-width","border-style","border-color"),isIE&&"medium none"==r.border&&(r.border=""),r):r},serializeStyle:function(e){var t="";return each(e,function(e,n){if(n&&e){if(tinymce.isGecko&&0===n.indexOf("-moz-"))return;switch(n){case"color":case"background-color":e=e.toLowerCase()}t+=(t?" ":"")+n+": "+e+";"}}),t},loadCSS:function(e){{var t=this;t.doc}e||(e=""),each(e.split(","),function(e){t.files[e]||(t.files[e]=!0,t.add(t.select("head")[0],"link",{rel:"stylesheet",href:tinymce._addVer(e)}))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(e,t){var n,i=this;return i.run(e,function(e){var o;return i.hasClass(e,t)?(n||(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),o=e.className.replace(n," "),e.className=tinymce.trim(" "!=o?o:"")):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return this.run(e,function(e){function i(){try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(i){for(;e.firstChild;)e.firstChild.removeNode();o=n.create("div"),o.innerHTML="<br />"+t,each(o.childNodes,function(t,n){n&&e.appendChild(t)})}}var o,r,s,a,c,o;if(t=n.processHTML(t),isIE){if(n.settings.fix_ie_paragraphs&&(t=t.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>')),i(),n.settings.fix_ie_paragraphs)for(s=e.getElementsByTagName("p"),r=s.length-1,o=0;r>=0;r--)if(a=s[r],!a.hasChildNodes()){if(!a.mce_keep){o=1;break}a.removeAttribute("mce_keep")}if(o&&(t=t.replace(/<p ([^>]+)>|<p>/g,'<div $1 mce_tmp="1">'),t=t.replace(/<\/p>/g,"</div>"),i(),n.settings.fix_ie_paragraphs))for(s=e.getElementsByTagName("DIV"),r=s.length-1;r>=0;r--)if(a=s[r],a.mce_tmp){for(c=n.doc.createElement("p"),a.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(e,t){var n;"mce_tmp"!==t&&(n=a.getAttribute(t),n||"class"!==t||(n=a.className),c.setAttribute(t,n))}),o=0;o<a.childNodes.length;o++)c.appendChild(a.childNodes[o].cloneNode(!0));a.swapNode(c)}}else e.innerHTML=t;return t})},processHTML:function(e){function t(e){return e=e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n"),e=e.replace(/^[\r\n]*|[\r\n]*$/g,""),e=e.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,""),e=e.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var n=this,i=n.settings;return i.process_html?(tinymce.isGecko?(e=e.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>"),e=e.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")):isIE&&(e=e.replace(/&apos;/g,"&#39;"),e=e.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")),e=e.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>"),i.keep_values&&(/<script|style/.test(e)&&(e=e.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/g,function(e,n,i){return i=t(i),n||(n=' type="text/javascript"'),i&&(i="<!--\n"+i+"\n// -->"),"<mce:script"+n+">"+i+"</mce:script>"}),e=e.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/g,function(e,n,i){return i=t(i),"<mce:style"+n+"><!--\n"+i+"\n--></mce:style><style"+n+' mce_bogus="1">'+i+"</style>"})),e=e.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->"),e=e.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(e,t){function o(o,r,s){var a=s;if(-1!=e.indexOf("mce_"+r))return o;if("style"==r){if(n._isRes(s))return o;i.hex_colors&&(a=a.replace(/rgb\([^\)]+\)/g,function(e){return n.toHex(e)})),i.url_converter&&(a=a.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(e,o){return"url("+n.encode(i.url_converter.call(i.url_converter_scope||n,n.decode(o),r,t))+")"}))}else"coords"!=r&&"shape"!=r&&i.url_converter&&(a=n.encode(i.url_converter.call(i.url_converter_scope||n,n.decode(s),r,t)));return" "+r+'="'+s+'" mce_'+r+'="'+a+'"'}return e=e.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,o),e=e.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,o),e.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,o)})),e):e},getOuterHTML:function(e){var t;return(e=this.get(e))?isIE?e.outerHTML:(t=(e.ownerDocument||this.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var i=this;return this.run(e,function(e){var o,r;if(e=i.get(e),n=n||e.ownerDocument||i.doc,isIE&&1==e.nodeType)e.outerHTML=t;else{for(r=n.createElement("body"),r.innerHTML=t,o=r.lastChild;o;)i.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;i.remove(e)}})},decode:function(e){var t,n,i;if(/&[^;]+;/.test(e)){if(t=this.doc.createElement("div"),t.innerHTML=e,n=t.firstChild,i="",n)do i+=n.nodeValue;while(n.nextSibling);return i||e}return e},encode:function(e){return e?(""+e).replace(/[<>&\"]/g,function(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return e}):e},insertAfter:function(e,t){var n=this;return t=n.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},isBlock:function(e){return e.nodeType&&1!==e.nodeType?!1:(e=e.nodeName||e,/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(e))},replace:function(e,t,n){return is(t,"array")&&(e=e.cloneNode(!0)),this.run(t,function(t){return n&&each(t.childNodes,function(t){e.appendChild(t.cloneNode(!0))}),t.parentNode.replaceChild(e,t)})},toHex:function(e){function t(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function e(n){each(n.imports,function(t){e(t)}),each(n.cssRules||n.rules,function(n){switch(n.type||1){case 1:n.selectorText&&each(n.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(t=e,e=e.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!r||(e=r(e,t)))&&(o[e]||(i.push({"class":e}),o[e]=1)))});break;case 3:e(n.styleSheet)}})}var t,n=this,i=[],o={},r=n.settings.class_filter;if(n.classes)return n.classes;try{each(n.doc.styleSheets,e)}catch(s){}return i.length>0&&(n.classes=i),i},run:function(e,t,n){var i,o=this;return o.doc&&"string"==typeof e&&(e=o.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],each(e,function(e,r){e&&("string"==typeof e&&(e=o.doc.getElementById(e)),i.push(t.call(n,e,r)))}),i)):!1},getAttribs:function(e){var t;return e=this.get(e),e?isIE?(t=[],"OBJECT"==e.nodeName?e.attributes:(e.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(e,n){t.push({specified:1,nodeName:n})}),t)):e.attributes:[]},destroy:function(e){var t=this;t.win=t.doc=t.root=null,e||tinymce.removeUnload(t.destroy)},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),tinymce.DOM=new tinymce.dom.DOMUtils(document,{process_html:0})}(),function(){var e,t=tinymce.each,n=tinymce.DOM,i=tinymce.isIE,o=tinymce.isWebKit;tinymce.create("static tinymce.dom.Event",{inits:[],events:[],add:function(e,o,r,s){var a,c,d=this,l=d.events;return e&&e instanceof Array?(c=[],t(e,function(e){e=n.get(e),c.push(d.add(e,o,r,s))}),c):(e=n.get(e))?(a=function(e){return e=e||window.event,e&&!e.target&&i&&(e.target=e.srcElement),s?r.call(s,e):r(e)},"unload"==o?(tinymce.unloads.unshift({func:a}),a):"init"==o?(d.domLoaded?a():d.inits.push(a),a):(l.push({obj:e,name:o,func:r,cfunc:a,scope:s}),d._add(e,o,a),r)):void 0},remove:function(e,i,o){var r,s=this,a=s.events,c=!1;return e&&e instanceof Array?(r=[],t(e,function(e){e=n.get(e),r.push(s.remove(e,i,o))}),r):(e=n.get(e),t(a,function(t,n){return t.obj!=e||t.name!=i||o&&t.func!=o&&t.cfunc!=o?void 0:(a.splice(n,1),s._remove(e,i,t.cfunc),c=!0,!1)}),c)},clear:function(e){var t,i,o=this,r=o.events;if(e)for(e=n.get(e),t=r.length-1;t>=0;t--)i=r[t],i.obj===e&&(o._remove(i.obj,i.name,i.cfunc),i.obj=i.cfunc=null,r.splice(t,1))},cancel:function(e){return e?(this.stop(e),this.prevent(e)):!1},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},_unload:function(){var n=e;t(n.events,function(e){n._remove(e.obj,e.name,e.cfunc),e.obj=e.cfunc=null}),n.events=[],n=null},_add:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!1):e["on"+t]=n},_remove:function(e,t,n){if(e)try{e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!1):e["on"+t]=null}catch(i){}},_pageInit:function(){var n=e;n.domLoaded||(n._remove(window,"DOMContentLoaded",n._pageInit),n.domLoaded=!0,t(n.inits,function(e){e()}),n.inits=[])},_wait:function(){var t;return window.tinyMCE_GZ&&tinyMCE_GZ.loaded?void(e.domLoaded=1):void(i&&"https:"!=document.location.protocol?(document.write("<script id=__ie_onload defer src='javascript:\"\"';></script>"),n.get("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&(e._pageInit(),n.get("__ie_onload").onreadystatechange=null)}):(e._add(window,"DOMContentLoaded",e._pageInit,e),(i||o)&&(t=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(t),e._pageInit())},10))))}}),e=tinymce.dom.Event,e._wait(),tinymce.addUnload(e._unload)}(),function(){var e=tinymce.each;tinymce.create("tinymce.dom.Element",{Element:function(t,n){var i,o,r=this;n=n||{},r.id=t,r.dom=i=n.dom||tinymce.DOM,r.settings=n,tinymce.isIE||(o=r.dom.get(r.id)),e(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(n){r[n]=function(){var s,a=arguments;return tinymce.isOpera?(a=[t],e(arguments,function(e){a.push(e)})):Array.prototype.unshift.call(a,o||t),s=i[n].apply(i,a),r.update(n),s}})},on:function(e,t,n){return tinymce.dom.Event.add(this.id,e,t,n)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var e=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||e.clientWidth),h:parseInt(this.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){this.setStyles({left:e,top:t})},moveBy:function(e,t){var n=this.getXY();this.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){this.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=this.getSize();this.resizeTo(n.w+e,n.h+t)},update:function(e){var t,n=this,i=n.dom;if(tinymce.isIE6&&n.settings.blocker){if(e=e||"",0===e.indexOf("get")||0===e.indexOf("has")||0===e.indexOf("is"))return;if("remove"==e)return void i.remove(n.blocker);n.blocker?t=i.get(n.blocker):(n.blocker=i.uniqueId(),t=i.add(n.settings.container||i.getRoot(),"iframe",{id:n.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(t,"opacity",0)),i.setStyle(t,"left",n.getStyle("left",1)),i.setStyle(t,"top",n.getStyle("top",1)),i.setStyle(t,"width",n.getStyle("width",1)),i.setStyle(t,"height",n.getStyle("height",1)),i.setStyle(t,"display",n.getStyle("display",1)),i.setStyle(t,"zIndex",parseInt(n.getStyle("zIndex",1)||0)-1)}}})}(),function(){function e(e){return e.replace(/[\n\r]+/g,"")}var t=tinymce.is,n=tinymce.isIE,i=tinymce.each;tinymce.create("tinymce.dom.Selection",{Selection:function(e,t,n){var o=this;o.dom=e,o.win=t,o.serializer=n,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){o[e]=new tinymce.util.Dispatcher(o)
}),tinymce.addUnload(o.destroy,o)},getContent:function(e){var n,i,o,r=this,s=r.getRng(),a=r.dom.create("body"),c=r.getSel();return e=e||{},n=i="",e.get=!0,e.format=e.format||"html",r.onBeforeGetContent.dispatch(r,e),"text"==e.format?r.isCollapsed()?"":s.text||(c.toString?c.toString():""):(s.cloneContents?(o=s.cloneContents(),o&&a.appendChild(o)):a.innerHTML=t(s.item)||t(s.htmlText)?s.item?s.item(0).outerHTML:s.htmlText:s.toString(),/^\s/.test(a.innerHTML)&&(n=" "),/\s+$/.test(a.innerHTML)&&(i=" "),e.getInner=!0,e.content=r.isCollapsed()?"":n+r.serializer.serialize(a,e)+i,r.onGetContent.dispatch(r,e),e.content)},setContent:function(e,t){var n,i=this,o=i.getRng(),r=i.win.document;t=t||{format:"html"},t.set=!0,e=t.content=i.dom.processHTML(e),i.onBeforeSetContent.dispatch(i,t),e=t.content,o.insertNode?(e+='<span id="__caret">_</span>',o.deleteContents(),o.insertNode(i.getRng().createContextualFragment(e)),n=i.dom.get("__caret"),o=r.createRange(),o.setStartBefore(n),o.setEndAfter(n),i.setRng(o),r.execCommand("Delete",!1,null),i.dom.remove("__caret")):(o.item&&(r.execCommand("Delete",!1,null),o=i.getRng()),o.pasteHTML(e)),i.onSetContent.dispatch(i,t)},getStart:function(){var e,t=this,i=t.getRng();return n?i.item?i.item(0):(i=i.duplicate(),i.collapse(1),e=i.parentElement(),e&&"BODY"==e.nodeName?e.firstChild:e):(e=i.startContainer,"BODY"==e.nodeName?e.firstChild:t.dom.getParent(e,function(e){return 1==e.nodeType}))},getEnd:function(){var e,t=this,i=t.getRng();return n?i.item?i.item(0):(i=i.duplicate(),i.collapse(0),e=i.parentElement(),e&&"BODY"==e.nodeName?e.lastChild:e):(e=i.endContainer,"BODY"==e.nodeName?e.lastChild:t.dom.getParent(e,function(e){return 1==e.nodeType}))},getBookmark:function(t){function o(t,n,i){for(var o,r=f.dom.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),s=0,a={};null!=(o=r.nextNode());){if(o==n&&(a.start=s),o==i)return a.end=s,a;s+=e(o.nodeValue||"").length}return null}var r,s,a,c,d,l,u,m,f=this,h=f.getRng(),p=f.dom.getViewPort(f.win),g=-16777215,y=f.dom.getRoot(),v=0,_=0;return s=p.x,a=p.y,"simple"==t?{rng:h,scrollX:s,scrollY:a}:n?h.item?(c=h.item(0),i(f.dom.select(c.nodeName),function(e,t){return c==e?(d=t,!1):void 0}),{tag:c.nodeName,index:d,scrollX:s,scrollY:a}):(r=f.dom.doc.body.createTextRange(),r.moveToElementText(y),r.collapse(!0),l=Math.abs(r.move("character",g)),r=h.duplicate(),r.collapse(!0),d=Math.abs(r.move("character",g)),r=h.duplicate(),r.collapse(!1),u=Math.abs(r.move("character",g))-d,{start:d-l,length:u,scrollX:s,scrollY:a}):(c=f.getNode(),m=f.getSel(),m?c&&"IMG"==c.nodeName?{scrollX:s,scrollY:a}:m.anchorNode==m.focusNode&&m.anchorOffset==m.focusOffset?(c=o(y,m.anchorNode,m.focusNode))?(e(m.anchorNode.nodeValue||"").replace(/^\s+/,function(e){v=e.length}),{start:Math.max(c.start+m.anchorOffset-v,0),end:Math.max(c.end+m.focusOffset-v,0),scrollX:s,scrollY:a,beg:m.anchorOffset-v==0}):{scrollX:s,scrollY:a}:(c=o(y,h.startContainer,h.endContainer),c?{start:Math.max(c.start+h.startOffset-v,0),end:Math.max(c.end+h.endOffset-_,0),scrollX:s,scrollY:a,beg:h.startOffset-v==0}:{scrollX:s,scrollY:a}):null)},moveToBookmark:function(o){function r(t,n,i){for(var r,s,l,u,m=d.dom.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),f=0,h={};null!=(r=m.nextNode());){if(l=u=0,c=r.nodeValue||"",a=e(c).length,f+=a,f>=n&&!h.startNode){if(s=n-(f-a),o.beg&&s>=a)continue;h.startNode=r,h.startOffset=s+u}if(f>=i)return h.endNode=r,h.endOffset=i-(f-a)+u,h}return null}var s,a,c,d=this,l=d.getRng(),u=d.getSel(),m=d.dom.getRoot();if(!o)return!1;if(d.win.scrollTo(o.scrollX,o.scrollY),n){if(l=o.rng){try{l.select()}catch(f){}return!0}if(d.win.focus(),o.tag)l=m.createControlRange(),i(d.dom.select(o.tag),function(e,t){t==o.index&&l.addElement(e)});else try{if(o.start<0)return!0;l=u.createRange(),l.moveToElementText(m),l.collapse(!0),l.moveStart("character",o.start),l.moveEnd("character",o.length)}catch(h){return!0}try{l.select()}catch(f){}return!0}if(!u)return!1;if(o.rng)u.removeAllRanges(),u.addRange(o.rng);else if(t(o.start)&&t(o.end))try{s=r(m,o.start,o.end),s&&(l=d.dom.doc.createRange(),l.setStart(s.startNode,s.startOffset),l.setEnd(s.endNode,s.endOffset),u.removeAllRanges(),u.addRange(l)),tinymce.isOpera||d.win.focus()}catch(f){}},select:function(e,t){function i(e){return e?l.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1).nextNode():null}function o(e){var t,n,i;if(!e)return null;for(i=l.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)n=t;return n}var r,s,a,c=this,d=c.getRng(),l=(c.getSel(),c.win.document);if(n)try{r=l.body,/^(IMG|TABLE)$/.test(e.nodeName)?(d=r.createControlRange(),d.addElement(e)):(d=r.createTextRange(),d.moveToElementText(e)),d.select()}catch(u){}else t?(s=i(e),a=o(e),s&&a?(d=l.createRange(),d.setStart(s,0),d.setEnd(a,a.nodeValue.length)):d.selectNode(e)):d.selectNode(e),c.setRng(d);return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:!n||0==t.boundingWidth||t.collapsed},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=this.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(){var e,t=this,i=t.getSel();try{i&&(e=i.rangeCount>0?i.getRangeAt(0):i.createRange?i.createRange():t.win.document.createRange())}catch(o){}return e||(e=n?t.win.document.body.createTextRange():t.win.document.createRange()),e},setRng:function(e){var t;if(n)try{e.select()}catch(i){}else t=this.getSel(),t&&(t.removeAllRanges(),t.addRange(e))},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var e,t=this,i=t.getRng(),o=t.getSel();if(!n){if(!i)return t.dom.getRoot();if(e=i.commonAncestorContainer,!i.collapsed){if(tinymce.isWebKit&&o.anchorNode&&1==o.anchorNode.nodeType)return o.anchorNode.childNodes[o.anchorOffset];i.startContainer==i.endContainer&&i.startOffset-i.endOffset<2&&i.startContainer.hasChildNodes()&&(e=i.startContainer.childNodes[i.startOffset])}return t.dom.getParent(e,function(e){return 1==e.nodeType})}return i.item?i.item(0):i.parentElement()},destroy:function(e){var t=this;t.win=null,e||tinymce.removeUnload(t.destroy)}})}(),function(){tinymce.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){function e(){var e=document.implementation;if(e&&e.createDocument)return e.createDocument("","",null);try{return new ActiveXObject("MSXML2.DOMDocument")}catch(t){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(t){}}this.doc=e(),this.valid=tinymce.isOpera||tinymce.isWebKit,this.reset()},reset:function(){var e=this,t=e.doc;t.firstChild&&t.removeChild(t.firstChild),e.node=t.appendChild(t.createElement("html"))},writeStartElement:function(e){var t=this;t.node=t.node.appendChild(t.doc.createElement(e))},writeAttribute:function(e,t){this.valid&&(t=t.replace(/>/g,"%MCGT%")),this.node.setAttribute(e,t)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var e=this,t=e.node;t.appendChild(e.doc.createTextNode("")),e.node=t.parentNode},writeText:function(e){this.valid&&(e=e.replace(/>/g,"%MCGT%")),this.node.appendChild(this.doc.createTextNode(e))},writeCDATA:function(e){this.node.appendChild(this.doc.createCDATA(e))},writeComment:function(e){tinymce.isIE&&(e=e.replace(/^\-|\-$/g," ")),this.node.appendChild(this.doc.createComment(e.replace(/\-\-/g," ")))},getContent:function(){var e;return e=this.doc.xml||(new XMLSerializer).serializeToString(this.doc),e=e.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,""),e=e.replace(/ ?\/>/g," />"),this.valid&&(e=e.replace(/\%MCGT%/g,"&gt;")),e}})}(),function(){tinymce.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(e){this.settings=tinymce.extend({indent_char:" ",indentation:1},e),this.reset()},reset:function(){this.indent="",this.str="",this.tags=[],this.count=0},writeStartElement:function(e){this._writeAttributesEnd(),this.writeRaw("<"+e),this.tags.push(e),this.inAttr=!0,this.count++,this.elementCount=this.count},writeAttribute:function(e,t){var n=this;n.writeRaw(" "+n.encode(e)+'="'+n.encode(t)+'"')},writeEndElement:function(){var e;this.tags.length>0&&(e=this.tags.pop(),this._writeAttributesEnd(1)&&this.writeRaw("</"+e+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeFullEndElement:function(){this.tags.length>0&&(this._writeAttributesEnd(),this.writeRaw("</"+this.tags.pop()+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeText:function(e){this._writeAttributesEnd(),this.writeRaw(this.encode(e)),this.count++},writeCDATA:function(e){this._writeAttributesEnd(),this.writeRaw("<![CDATA["+e+"]]>"),this.count++},writeComment:function(e){this._writeAttributesEnd(),this.writeRaw("<!-- "+e+"-->"),this.count++},writeRaw:function(e){this.str+=e},encode:function(e){return e.replace(/[<>&"]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return e})},getContent:function(){return this.str},_writeAttributesEnd:function(e){return this.inAttr?(this.inAttr=!1,e&&this.elementCount==this.count?(this.writeRaw(" />"),!1):(this.writeRaw(">"),!0)):void 0}})}(),function(){function e(e){var t=[];return"OBJECT"==e.nodeName?e.attributes:(e.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(e,n){t.push({specified:1,nodeName:n})}),t)}function t(e){return e.replace(/([?+*])/g,".$1")}var n=tinymce.extend,i=tinymce.each,o=tinymce.util.Dispatcher,r=tinymce.isIE,s=tinymce.isGecko;tinymce.create("tinymce.dom.Serializer",{Serializer:function(e){var t=this;if(t.key=0,t.onPreProcess=new o(t),t.onPostProcess=new o(t),tinymce.relaxedDomain&&tinymce.isGecko)t.writer=new tinymce.dom.StringWriter;else try{t.writer=new tinymce.dom.XMLWriter}catch(r){t.writer=new tinymce.dom.StringWriter}t.settings=e=n({dom:tinymce.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_)/,closed:/(br|hr|input|meta|img|link|param)/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:0,fix_list_elements:!0,fix_content_duplication:!0,convert_fonts_to_spans:!1,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"	",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},e),t.dom=e.dom,e.remove_redundant_brs&&t.onPostProcess.add(function(e,t){t.content=t.content.replace(/<br \/>(\s*<\/li>)/g,"$1")}),"html"==e.element_format&&t.onPostProcess.add(function(e,t){t.content=t.content.replace(/<([^>]+) \/>/g,"<$1>")}),e.fix_list_elements&&t.onPreProcess.add(function(e,n){function i(e,t){for(var n,i=t.split(",");null!=(e=e.previousSibling);)for(n=0;n<i.length;n++)if(e.nodeName==i[n])return e;return null}var o,r,s,a,c,d,l=["ol","ul"],u=/^(OL|UL)$/;for(r=0;r<l.length;r++)for(o=t.dom.select(l[r],n.node),s=0;s<o.length;s++)a=o[s],c=a.parentNode,u.test(c.nodeName)&&(d=i(a,"LI"),d?d.appendChild(a):(d=t.dom.create("li"),d.innerHTML="&nbsp;",d.appendChild(a),c.insertBefore(d,c.firstChild)))}),e.fix_table_elements&&t.onPreProcess.add(function(e,n){i(t.dom.select("table",n.node),function(e){var n,i,o,r,s,a=t.dom.getParent(e,"H1,H2,H3,H4,H5,H6,P"),c=[];if(a){for(n=a.cloneNode(!1),c.push(e),i=e;(i=i.parentNode)&&(c.push(i),i!=a););for(o=n,r=c.length-1;r>=0;r--)if(r==c.length-1)for(;s=c[r-1].nextSibling;)o.appendChild(s.parentNode.removeChild(s));else{if(i=c[r].cloneNode(!1),0!=r)for(;s=c[r-1].nextSibling;)i.appendChild(s.parentNode.removeChild(s));o=o.appendChild(i)}e=t.dom.insertAfter(e.parentNode.removeChild(e),a),t.dom.insertAfter(e,a),t.dom.insertAfter(n,e)}})})},setEntities:function(e){var t,n,i,o=this,r={},s="";if(!o.entityLookup){for(t=e.split(","),n=0;n<t.length;n+=2)i=t[n],34!=i&&38!=i&&60!=i&&62!=i&&(r[String.fromCharCode(t[n])]=t[n+1],i=parseInt(t[n]).toString(16),s+="\\u"+"0000".substring(i.length)+i);if(!s)return void(o.settings.entity_encoding="raw");o.entitiesRE=new RegExp("["+s+"]","g"),o.entityLookup=r}},setValidChildRules:function(e){this.childRules=null,this.addValidChildRules(e)},addValidChildRules:function(e){var t,n,o,r=this;e&&(t="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment",n="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment",o="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP",i(e.split(","),function(e){var s,a=e.split(/\[|\]/);e="",i(a[1].split("|"),function(i){switch(e&&(e+="|"),i){case"%itrans":i=n;break;case"%itrans_na":i=n.substring(2);break;case"%istrict":i=t;break;case"%istrict_na":i=t.substring(2);break;case"%btrans":i=o;break;case"%bstrict":i=o}e+=i}),s=new RegExp("^("+e.toLowerCase()+")$","i"),i(a[0].split("/"),function(e){r.childRules=r.childRules||{},r.childRules[e]=s})}),e="",i(r.childRules,function(t,n){e&&(e+="|"),e+=n}),r.parentElementsRE=new RegExp("^("+e.toLowerCase()+")$","i"))},setRules:function(e){var t=this;return t._setup(),t.rules={},t.wildRules=[],t.validElements={},t.addRules(e)},addRules:function(e){var n,o=this;e&&(o._setup(),i(e.split(","),function(e){var r,s,a,c=e.split(/\[|\]/),d=c[0].split("/"),l=[];n&&(s=tinymce.extend([],n.attribs)),c.length>1&&i(c[1].split("|"),function(e){var n,i={};if(s=s||[],e=e.replace(/::/g,"~"),e=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(e),e[2]=e[2].replace(/~/g,":"),"!"==e[1]&&(r=r||[],r.push(e[2])),"-"==e[1])for(n=0;n<s.length;n++)if(s[n].name==e[2])return void s.splice(n,1);switch(e[3]){case"=":i.defaultVal=e[4]||"";break;case":":i.forcedVal=e[4];break;case"<":i.validVals=e[4].split("?")}/[*.?]/.test(e[2])?(a=a||[],i.nameRE=new RegExp("^"+t(e[2])+"$"),a.push(i)):(i.name=e[2],s.push(i)),l.push(e[2])}),i(d,function(e,c){var u=e.charAt(0),m=1,f={};switch(n&&(n.noEmpty&&(f.noEmpty=n.noEmpty),n.fullEnd&&(f.fullEnd=n.fullEnd),n.padd&&(f.padd=n.padd)),u){case"-":f.noEmpty=!0;break;case"+":f.fullEnd=!0;break;case"#":f.padd=!0;break;default:m=0}d[c]=e=e.substring(m),o.validElements[e]=1,/[*.?]/.test(d[0])?(f.nameRE=new RegExp("^"+t(d[0])+"$"),o.wildRules=o.wildRules||{},o.wildRules.push(f)):(f.name=d[0],"@"==d[0]&&(n=f),o.rules[e]=f),f.attribs=s,r&&(f.requiredAttribs=r),a&&(e="",i(l,function(n){e&&(e+="|"),e+="("+t(n)+")"}),f.validAttribsRE=new RegExp("^"+e.toLowerCase()+"$"),f.wildAttribs=a)})}),e="",i(o.validElements,function(t,n){e&&(e+="|"),"@"!=n&&(e+=n)}),o.validElementsRE=new RegExp("^("+t(e.toLowerCase())+")$"))},findRule:function(e){var t,n,i=this,o=i.rules;if(i._setup(),n=o[e])return n;for(o=i.wildRules,t=0;t<o.length;t++)if(o[t].nameRE.test(e))return o[t];return null},findAttribRule:function(e,t){var n,i=e.wildAttribs;for(n=0;n<i.length;n++)if(i[n].nameRE.test(t))return i[n];return null},serialize:function(e,t){var n=this;return n._setup(),t=t||{},t.format=t.format||"html",n.processObj=t,e=e.cloneNode(!0),n.key=""+(parseInt(n.key)+1),t.no_events||(t.node=e,n.onPreProcess.dispatch(n,t)),n.writer.reset(),n._serializeNode(e,t.getInner),t.content=n.writer.getContent(),t.no_events||n.onPostProcess.dispatch(n,t),n._postProcess(t),t.node=null,tinymce.trim(t.content)},_postProcess:function(e){var t,n=this,i=n.settings,o=e.content;"html"==e.format&&(t=n._protect({content:o,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]}),o=t.content,"raw"!==i.entity_encoding&&(o=n._encode(o)),e.set||(o=o.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,"numeric"==i.entity_encoding?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>"),i.remove_linebreaks&&(o=o.replace(/\r?\n|\r/g," "),o=o.replace(/(<[^>]+>)\s+/g,"$1 "),o=o.replace(/\s+(<\/[^>]+>)/g," $1"),o=o.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>"),o=o.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>"),o=o.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")),i.apply_source_formatting&&"simple"==i.indent_mode&&(o=o.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n"),o=o.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>"),o=o.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n"),o=o.replace(/\n\n/g,"\n"))),o=n._unprotect(o,t),o=o.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>"),"raw"==i.entity_encoding&&(o=o.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1></p>"))),e.content=o},_serializeNode:function(t,n){var i,o,a,c,d,l,u,m,f,h,p,g,y=this,v=y.settings,_=y.writer;if(!v.node_filter||v.node_filter(t))switch(t.nodeType){case 1:if(t.hasAttribute?t.hasAttribute("mce_bogus"):t.getAttribute("mce_bogus"))return;if(g=!1,i=t.hasChildNodes(),f=t.getAttribute("mce_name")||t.nodeName.toLowerCase(),r&&"HTML"!==t.scopeName&&"html"!==t.scopeName&&(f=t.scopeName+":"+f),0===f.indexOf("mce:")&&(f=f.substring(4)),!y.validElementsRE.test(f)||y.invalidElementsRE&&y.invalidElementsRE.test(f)||n){g=!0;break}if(r){if(v.fix_content_duplication){if(t.mce_serialized==y.key)return;t.mce_serialized=y.key}"/"==f.charAt(0)&&(f=f.substring(1))}else if(s&&"BR"===t.nodeName&&"_moz"==t.getAttribute("type"))return;if(y.childRules){if(y.parentElementsRE.test(y.elementName)&&!y.childRules[y.elementName].test(f)){g=!0;break}y.elementName=f}if(h=y.findRule(f),f=h.name||f,!i&&h.noEmpty||r&&!f){g=!0;break}if(h.requiredAttribs){for(d=h.requiredAttribs,a=d.length-1;a>=0&&""===this.dom.getAttrib(t,d[a]);a--);if(-1==a){g=!0;break}}if(_.writeStartElement(f),h.attribs)for(a=0,l=h.attribs,c=l.length;c>a;a++)d=l[a],m=y._getAttrib(t,d),null!==m&&_.writeAttribute(d.name,m);if(h.validAttribsRE)for(l=r?e(t):t.attributes,a=l.length-1;a>-1;a--)if(u=l[a],u.specified){if(d=u.nodeName.toLowerCase(),v.invalid_attrs.test(d)||!h.validAttribsRE.test(d))continue;p=y.findAttribRule(h,d),m=y._getAttrib(t,p,d),null!==m&&_.writeAttribute(d,m)}h.padd&&(i&&(o=t.firstChild)&&1===o.nodeType&&1===t.childNodes.length?(o.hasAttribute?o.hasAttribute("mce_bogus"):o.getAttribute("mce_bogus"))&&_.writeText(""):i||_.writeText(""));break;case 3:if(y.childRules&&y.parentElementsRE.test(y.elementName)&&!y.childRules[y.elementName].test(t.nodeName))return;return _.writeText(t.nodeValue);case 4:return _.writeCDATA(t.nodeValue);case 8:return _.writeComment(t.nodeValue)}else 1==t.nodeType&&(i=t.hasChildNodes());if(i)for(o=t.firstChild;o;)y._serializeNode(o),y.elementName=f,o=o.nextSibling;g||(i||!v.closed.test(f)?_.writeFullEndElement():_.writeEndElement())},_protect:function(e){function t(e){return e.replace(/[\r\n\\]/g,function(e){return"\n"===e?"\\n":"\\"===e?"\\\\":"\\r"})}function n(e){return e.replace(/\\[\\rn]/g,function(e){return"\\n"===e?"\n":"\\\\"===e?"\\":"\r"})}var o=this;return e.items=e.items||[],i(e.patterns,function(i){e.content=n(t(e.content).replace(i.pattern,function(t,r,s,a){return s=n(s),i.encode&&(s=o._encode(s)),e.items.push(s),r+"<!--mce:"+(e.items.length-1)+"-->"+a}))}),e},_unprotect:function(e,t){return e=e.replace(/\<!--mce:([0-9]+)--\>/g,function(e,n){return t.items[parseInt(n)]}),t.items=[],e},_encode:function(e){var t,n=this,i=n.settings;return"raw"!==i.entity_encoding&&(-1!=i.entity_encoding.indexOf("named")&&(n.setEntities(i.entities),t=n.entityLookup,e=e.replace(n.entitiesRE,function(e){var n;return(n=t[e])&&(e="&"+n+";"),e})),-1!=i.entity_encoding.indexOf("numeric")&&(e=e.replace(/[\u007E-\uFFFF]/g,function(e){return"&#"+e.charCodeAt(0)+";"}))),e},_setup:function(){var e=this,n=this.settings;e.done||(e.done=1,e.setRules(n.valid_elements),e.addRules(n.extended_valid_elements),e.addValidChildRules(n.valid_child_elements),n.invalid_elements&&(e.invalidElementsRE=new RegExp("^("+t(n.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")),n.attrib_value_filter&&(e.attribValueFilter=n.attribValueFilter))},_getAttrib:function(e,t,n){var i,o;if(n=n||t.name,t.forcedVal&&(o=t.forcedVal))return"{$uid}"===o?this.dom.uniqueId():o;if(o=this.dom.getAttrib(e,n),this.settings.bool_attrs.test(n)&&o){if(o=(""+o).toLowerCase(),"false"===o||"0"===o)return null;o=n}switch(n){case"rowspan":case"colspan":"1"==o&&(o="")}if(this.attribValueFilter&&(o=this.attribValueFilter(n,o,e)),t.validVals){for(i=t.validVals.length-1;i>=0&&o!=t.validVals[i];i--);if(-1==i)return null}return""===o&&"undefined"!=typeof t.defaultVal?(o=t.defaultVal,"{$uid}"===o?this.dom.uniqueId():o):("class"==n&&this.processObj.get&&(o=o.replace(/\s?mceItem\w+\s?/g,"")),""===o?null:o)}})}(),function(){var each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(e){this.settings=e||{},this.queue=[],this.lookup={}},isDone:function(e){return this.lookup[e]?2==this.lookup[e].state:0},markDone:function(e){this.lookup[e]={state:2,url:e}},add:function(e,t,n,i){var o,r=this,s=r.lookup;return(o=s[e])?(t&&2==o.state&&t.call(n||this),o):(o={state:0,url:e,func:t,scope:n||this},i?r.queue.unshift(o):r.queue.push(o),s[e]=o,o)},load:function(e,t,n){function i(e){Event.domLoaded||r.settings.strict_mode?tinymce.util.XHR.send({url:tinymce._addVer(e),error:r.settings.error,async:!1,success:function(e){r.eval(e)}}):document.write('<script type="text/javascript" src="'+tinymce._addVer(e)+'"></script>')}var o,r=this;return(o=r.lookup[e])?(t&&2==o.state&&t.call(n||r),o):void(tinymce.is(e,"string")?(i(e),t&&t.call(n||r)):(each(e,function(e){i(e)}),t&&t.call(n||r)))},loadQueue:function(e,t){var n=this;n.queueLoading?e&&n.queueCallbacks.push({func:e,scope:t||n}):(n.queueLoading=1,n.queueCallbacks=[],n.loadScripts(n.queue,function(){n.queueLoading=0,e&&e.call(t||n),each(n.queueCallbacks,function(e){e.func.call(e.scope)})}))},eval:function(co){var w=window;if(w.execScript)w.execScript(co);else try{eval.call(w,co)}catch(ex){eval(co,w)}},loadScripts:function(e,t,n){function i(e){e.state=2,e.func&&e.func.call(e.scope||s)}function o(){var o;o=e.length,each(e,function(e){e=a[e.url],2===e.state?(i(e),o--):r(e)}),0===o&&t&&(t.call(n||s),t=0)}function r(e){e.state>0||(e.state=1,tinymce.dom.ScriptLoader.loadScript(e.url,function(){i(e),o()}))}var s=this,a=s.lookup;each(e,function(e){var n=e.url;if(a[n]?e=a[n]:(a[n]=e,s.queue.push(e)),!(e.state>0))if(Event.domLoaded||s.settings.strict_mode)r(e);else{var c,d="";(t||e.func)&&(e.state=1,c=tinymce.dom.ScriptLoader._addOnLoad(function(){i(e),o()}),d=tinymce.isIE?' onreadystatechange="':' onload="',d+="tinymce.dom.ScriptLoader._onLoad(this,'"+n+"',"+c+');"'),document.write('<script type="text/javascript" src="'+tinymce._addVer(n)+'"'+d+"></script>"),e.func||i(e)}}),o()},"static":{_addOnLoad:function(e){var t=this;return t._funcs=t._funcs||[],t._funcs.push(e),t._funcs.length-1},_onLoad:function(e,t,n){tinymce.isIE&&"complete"!=e.readyState||this._funcs[n].call(this)},loadScript:function(e,t){function n(){Event.clear(o),tinymce.DOM.remove(o),t&&(t.call(document,e),t=0)}var i,o=tinymce.DOM.uniqueId();tinymce.isIE?tinymce.util.XHR.send({url:tinymce._addVer(e),async:!1,success:function(e){window.execScript(e),n()}}):(i=tinymce.DOM.create("script",{id:o,type:"text/javascript",src:tinymce._addVer(e)}),Event.add(i,"load",n),(document.getElementsByTagName("head")[0]||document.body).appendChild(i))}}}),tinymce.ScriptLoader=new tinymce.dom.ScriptLoader}(),function(){var e=tinymce.DOM,t=tinymce.is;tinymce.create("tinymce.ui.Control",{Control:function(e,t){this.id=e,this.settings=t=t||{},this.rendered=!1,this.onRender=new tinymce.util.Dispatcher(this),this.classPrefix="",this.scope=t.scope||this,this.disabled=0,this.active=0},setDisabled:function(t){var n;t!=this.disabled&&(n=e.get(this.id),n&&this.settings.unavailable_prefix&&(t?(this.prevTitle=n.title,n.title=this.settings.unavailable_prefix+": "+n.title):n.title=this.prevTitle),this.setState("Disabled",t),this.setState("Enabled",!t),this.disabled=t)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e)},isActive:function(){return this.active},setState:function(t,n){var i=e.get(this.id);t=this.classPrefix+t,n?e.addClass(i,t):e.removeClass(i,t)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(t){e.setHTML(t,this.renderHTML())},postRender:function(){var e,n=this;t(n.disabled)&&(e=n.disabled,n.disabled=-1,n.setDisabled(e)),t(n.active)&&(e=n.active,n.active=-1,n.setActive(e))},remove:function(){e.remove(this.id),this.destroy()},destroy:function(){tinymce.dom.Event.clear(this.id)}})}(),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t){this.parent(e,t),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}}),function(){{var e=tinymce.is;tinymce.DOM,tinymce.each,tinymce.walk}tinymce.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var t=this;t.parent(),e(t.selected)&&t.setSelected(t.selected)}})}(),function(){var e=(tinymce.is,tinymce.DOM),t=(tinymce.each,tinymce.walk);tinymce.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(e,t){var n=this;n.parent(e,t),n.items={},n.collapsed=!1,n.menuCount=0,n.onAddItem=new tinymce.util.Dispatcher(this)},expand:function(e){var n=this;e&&t(n,function(e){e.expand&&e.expand()},"items",n),n.collapsed=!1},collapse:function(e){var n=this;e&&t(n,function(e){e.collapse&&e.collapse()},"items",n),n.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(t){return t.settings||(t=new tinymce.ui.MenuItem(t.id||e.uniqueId(),t)),this.onAddItem.dispatch(this,t),this.items[t.id]=t},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;t(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(t){var n=new tinymce.ui.Menu(t.id||e.uniqueId(),t);return n.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),n}})}(),function(){var e=tinymce.is,t=tinymce.DOM,n=tinymce.each,i=tinymce.dom.Event,o=tinymce.dom.Element;tinymce.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(n,i){i=i||{},i.container=i.container||t.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,e(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(n,i),this.onShowMenu=new tinymce.util.Dispatcher(this),this.onHideMenu=new tinymce.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(e){var n,i=this,o=i.settings;return e.container=e.container||o.container,e.parent=i,e.constrain=e.constrain||o.constrain,e["class"]=e["class"]||o["class"],e.vp_offset_x=e.vp_offset_x||o.vp_offset_x,e.vp_offset_y=e.vp_offset_y||o.vp_offset_y,n=new tinymce.ui.DropMenu(e.id||t.uniqueId(),e),n.onAddItem.add(i.onAddItem.dispatch,i.onAddItem),n},update:function(){var e,n,i=this,o=i.settings,r=t.get("menu_"+i.id+"_tbl"),s=t.get("menu_"+i.id+"_co");e=o.max_width?Math.min(r.clientWidth,o.max_width):r.clientWidth,n=o.max_height?Math.min(r.clientHeight,o.max_height):r.clientHeight,i.element.setStyles(t.boxModel?{width:e,height:n}:{width:e+2,height:n+2}),o.max_width&&t.setStyle(s,"width",e),o.max_height&&(t.setStyle(s,"height",n),r.clientHeight<o.max_height&&t.setStyle(s,"overflow","hidden"))},showMenu:function(e,r,s){var a,c,d,l,u,m,f=this,h=f.settings,p=t.getViewPort(),g=2,y=f.classPrefix;f.collapse(1),f.isMenuVisible||(f.rendered?a=t.get("menu_"+f.id):(a=t.add(f.settings.container,f.renderNode()),n(f.items,function(e){e.postRender()}),f.element=new o("menu_"+f.id,{blocker:1,container:h.container})),tinymce.isOpera||t.setStyles(a,{left:-65535,top:-65535}),t.show(a),f.update(),e+=h.offset_x||0,r+=h.offset_y||0,p.w-=4,p.h-=4,h.constrain&&(c=a.clientWidth-g,d=a.clientHeight-g,l=p.x+p.w,u=p.y+p.h,e+h.vp_offset_x+c>l&&(e=s?s-c:Math.max(0,l-h.vp_offset_x-c)),r+h.vp_offset_y+d>u&&(r=Math.max(0,u-h.vp_offset_y-d))),t.setStyles(a,{left:e,top:r}),f.element.update(),f.isMenuVisible=1,f.mouseClickFunc=i.add(a,"click",function(e){var n;if(e=e.target,e&&(e=t.getParent(e,"TR"))&&!t.hasClass(e,y+"ItemSub")){if(n=f.items[e.id],n.isDisabled())return;for(m=f;m;)m.hideMenu&&m.hideMenu(),m=m.settings.parent;return n.settings.onclick&&n.settings.onclick(e),i.cancel(e)}}),f.hasMenus()&&(f.mouseOverFunc=i.add(a,"mouseover",function(e){var n,i;if(e=e.target,e&&(e=t.getParent(e,"TR"))){if(n=f.items[e.id],f.lastMenu&&f.lastMenu.collapse(1),n.isDisabled())return;e&&t.hasClass(e,y+"ItemSub")&&(i=t.getRect(e),n.showMenu(i.x+i.w-g,i.y-g,i.x),f.lastMenu=n,t.addClass(t.get(n.id).firstChild,y+"ItemActive"))
}})),f.onShowMenu.dispatch(f),h.keyboard_focus&&(i.add(a,"keydown",f._keyHandler,f),t.select("a","menu_"+f.id)[0].focus(),f._focusIdx=0))},hideMenu:function(e){var n,o=this,r=t.get("menu_"+o.id);o.isMenuVisible&&(i.remove(r,"mouseover",o.mouseOverFunc),i.remove(r,"click",o.mouseClickFunc),i.remove(r,"keydown",o._keyHandler),t.hide(r),o.isMenuVisible=0,e||o.collapse(1),o.element&&o.element.hide(),(n=t.get(o.id))&&t.removeClass(n.firstChild,o.classPrefix+"ItemActive"),o.onHideMenu.dispatch(o))},add:function(e){var n,i=this;return e=i.parent(e),i.isRendered&&(n=t.get("menu_"+i.id))&&i._add(t.select("tbody",n)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return t.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,n=t.get("menu_"+e.id);i.remove(n,"mouseover",e.mouseOverFunc),i.remove(n,"click",e.mouseClickFunc),e.element&&e.element.remove(),t.remove(n)},renderNode:function(){var e,i,r,s,a=this,c=a.settings;return s=t.create("div",{id:"menu_"+a.id,"class":c["class"],style:"position:absolute;left:0;top:0;z-index:200000"}),r=t.add(s,"div",{id:"menu_"+a.id+"_co","class":a.classPrefix+(c["class"]?" "+c["class"]:"")}),a.element=new o("menu_"+a.id,{blocker:1,container:c.container}),c.menu_line&&t.add(r,"span",{"class":a.classPrefix+"Line"}),e=t.add(r,"table",{id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),i=t.add(e,"tbody"),n(a.items,function(e){a._add(i,e)}),a.rendered=!0,s},_keyHandler:function(e){function n(e){var n=i._focusIdx+e,o=t.select("a","menu_"+i.id)[n];o&&(i._focusIdx=n,o.focus())}var i=this,o=e.keyCode;switch(o){case 38:return void n(-1);case 40:return void n(1);case 13:return;case 27:return this.hideMenu()}},_add:function(e,n){var i,o,r,s,a,c=n.settings,d=this.classPrefix;return c.separator?(r=t.add(e,"tr",{id:n.id,"class":d+"ItemSeparator"}),t.add(r,"td",{"class":d+"ItemSeparator"}),void((i=r.previousSibling)&&t.addClass(i,"mceLast"))):(i=r=t.add(e,"tr",{id:n.id,"class":d+"Item "+d+"ItemEnabled"}),i=s=t.add(i,"td"),i=o=t.add(i,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),t.addClass(s,c["class"]),a=t.add(i,"span",{"class":"mceIcon"+(c.icon?" mce_"+c.icon:"")}),c.icon_src&&t.add(a,"img",{src:c.icon_src}),i=t.add(i,c.element||"span",{"class":"mceText",title:n.settings.title},n.settings.title),n.settings.style&&t.setAttrib(i,"style",n.settings.style),1==e.childNodes.length&&t.addClass(r,"mceFirst"),(i=r.previousSibling)&&t.hasClass(i,d+"ItemSeparator")&&t.addClass(r,"mceFirst"),n.collapse&&t.addClass(r,d+"ItemSub"),(i=r.previousSibling)&&t.removeClass(i,"mceLast"),void t.addClass(r,"mceLast"))}})}(),function(){var e=tinymce.DOM;tinymce.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t){this.parent(e,t),this.classPrefix="mceButton"},renderHTML:function(){var t,n,i=this.classPrefix,o=this.settings;return n=e.encode(o.label||""),t='<a id="'+this.id+'" href="javascript:;" class="'+i+" "+i+"Enabled "+o["class"]+(n?" "+i+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+e.encode(o.title)+'">',t+=o.image?'<img class="mceIcon" src="'+o.image+'" />'+n+"</a>":'<span class="mceIcon '+o["class"]+'"></span>'+(n?'<span class="'+i+'Label">'+n+"</span>":"")+"</a>"},postRender:function(){var e=this,t=e.settings;tinymce.dom.Event.add(e.id,"click",function(n){return e.isDisabled()?void 0:t.onclick.call(t.scope,n)})}})}(),function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each,i=tinymce.util.Dispatcher;tinymce.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(e,t){var n=this;n.parent(e,t),n.items=[],n.onChange=new i(n),n.onPostRender=new i(n),n.onAdd=new i(n),n.onRenderMenu=new tinymce.util.Dispatcher(this),n.classPrefix="mceListBox"},select:function(e){var t,i,o=this;return void 0==e?o.selectByIndex(-1):(i=e&&e.call?e:function(t){return t==e},void(e!=o.selectedValue&&(n(o.items,function(e,n){return i(e.value)?(t=1,o.selectByIndex(n),!1):void 0}),t||o.selectByIndex(-1))))},selectByIndex:function(t){var n,i,o=this;t!=o.selectedIndex?(n=e.get(o.id+"_text"),i=o.items[t],i?(o.selectedValue=i.value,o.selectedIndex=t,e.setHTML(n,e.encode(i.title)),e.removeClass(n,"mceTitle")):(e.setHTML(n,e.encode(o.settings.title)),e.addClass(n,"mceTitle"),o.selectedValue=o.selectedIndex=null),n=0):o.selectedValue=o.selectedIndex=null},add:function(e,t,n){var i=this;n=n||{},n=tinymce.extend(n,{title:e,value:t}),i.items.push(n),i.onAdd.dispatch(i,n)},getLength:function(){return this.items.length},renderHTML:function(){var t="",n=this,i=n.settings,o=n.classPrefix;return t='<table id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+o+" "+o+"Enabled"+(i["class"]?" "+i["class"]:"")+'"><tbody><tr>',t+="<td>"+e.createHTML("a",{id:n.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},e.encode(n.settings.title))+"</td>",t+="<td>"+e.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>",t+="</tr></tbody></table>"},showMenu:function(){var i,o,r,s=this,a=e.get(this.id);if(!s.isDisabled()&&0!=s.items.length){if(s.menu&&s.menu.isMenuVisible)return s.hideMenu();s.isMenuRendered||(s.renderMenu(),s.isMenuRendered=!0),i=e.getPos(this.settings.menu_container),o=e.getPos(a),r=s.menu,r.settings.offset_x=o.x,r.settings.offset_y=o.y,r.settings.keyboard_focus=!tinymce.isOpera,s.oldID&&r.items[s.oldID].setSelected(0),n(s.items,function(e){e.value===s.selectedValue&&(r.items[e.id].setSelected(1),s.oldID=e.id)}),r.showMenu(0,a.clientHeight),t.add(e.doc,"mousedown",s.hideMenu,s),e.addClass(s.id,s.classPrefix+"Selected")}},hideMenu:function(n){var i=this;(!n||"mousedown"!=n.type||n.target.id!=i.id+"_text"&&n.target.id!=i.id+"_open")&&(n&&e.getParent(n.target,function(t){return e.hasClass(t,"mceMenu")})||(e.removeClass(i.id,i.classPrefix+"Selected"),t.remove(e.doc,"mousedown",i.hideMenu,i),i.menu&&i.menu.hideMenu()))},renderMenu:function(){var t,i=this;t=i.settings.control_manager.createDropMenu(i.id+"_menu",{menu_line:1,"class":i.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),t.onHideMenu.add(i.hideMenu,i),t.add({title:i.settings.title,"class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}),n(i.items,function(n){n.id=e.uniqueId(),n.onclick=function(){i.settings.onselect(n.value)!==!1&&i.select(n.value)},t.add(n)}),i.onRenderMenu.dispatch(i,t),i.menu=t},postRender:function(){var i=this,o=i.classPrefix;t.add(i.id,"click",i.showMenu,i),t.add(i.id+"_text","focus",function(){i._focused||(i.keyDownHandler=t.add(i.id+"_text","keydown",function(e){var o,r=-1,s=e.keyCode;if(n(i.items,function(e,t){i.selectedValue==e.value&&(r=t)}),38==s)o=i.items[r-1];else if(40==s)o=i.items[r+1];else if(13==s)return o=i.selectedValue,i.selectedValue=null,i.settings.onselect(o),t.cancel(e);o&&(i.hideMenu(),i.select(o.value))})),i._focused=1}),t.add(i.id+"_text","blur",function(){t.remove(i.id+"_text","keydown",i.keyDownHandler),i._focused=0}),(tinymce.isIE6||!e.boxModel)&&(t.add(i.id,"mouseover",function(){e.hasClass(i.id,o+"Disabled")||e.addClass(i.id,o+"Hover")}),t.add(i.id,"mouseout",function(){e.hasClass(i.id,o+"Disabled")||e.removeClass(i.id,o+"Hover")})),i.onPostRender.dispatch(i,e.get(i.id))},destroy:function(){this.parent(),t.clear(this.id+"_text")}})}(),function(){{var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each;tinymce.util.Dispatcher}tinymce.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(t){e.get(this.id).disabled=t},isDisabled:function(){return e.get(this.id).disabled},select:function(e){var t,i,o=this;return void 0==e?o.selectByIndex(-1):(i=e&&e.call?e:function(t){return t==e},void(e!=o.selectedValue&&(n(o.items,function(e,n){return i(e.value)?(t=1,o.selectByIndex(n),!1):void 0}),t||o.selectByIndex(-1))))},selectByIndex:function(t){e.get(this.id).selectedIndex=t+1,this.selectedValue=this.items[t]?this.items[t].value:null},add:function(t,n,i){var o,r=this;i=i||{},i.value=n,r.isRendered()&&e.add(e.get(this.id),"option",i,t),o={title:t,value:n,attribs:i},r.items.push(o),r.onAdd.dispatch(r,o)},getLength:function(){return e.get(this.id).options.length-1},renderHTML:function(){var t,i=this;return t=e.createHTML("option",{value:""},"-- "+i.settings.title+" --"),n(i.items,function(n){t+=e.createHTML("option",{value:n.value},n.title)}),t=e.createHTML("select",{id:i.id,"class":"mceNativeListBox"},t)},postRender:function(){function n(e){var t=o.items[e.target.selectedIndex-1];t&&(t=t.value)&&(o.onChange.dispatch(o,t),o.settings.onselect&&o.settings.onselect(t))}var i,o=this;o.rendered=!0,t.add(o.id,"change",n),t.add(o.id,"keydown",function(e){var r;return t.remove(o.id,"change",i),r=t.add(o.id,"blur",function(){t.add(o.id,"change",n),t.remove(o.id,"blur",r)}),13==e.keyCode||32==e.keyCode?(n(e),t.cancel(e)):void 0}),o.onPostRender.dispatch(o,e.get(o.id))}})}(),function(){{var e=tinymce.DOM,t=tinymce.dom.Event;tinymce.each}tinymce.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(t,n){this.parent(t,n),this.onRenderMenu=new tinymce.util.Dispatcher(this),n.menu_container=n.menu_container||e.doc.body},showMenu:function(){var n,i,o,r=this,s=e.get(r.id);if(!r.isDisabled()){if(r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),r.isMenuVisible)return r.hideMenu();n=e.getPos(r.settings.menu_container),i=e.getPos(s),o=r.menu,o.settings.offset_x=i.x,o.settings.offset_y=i.y,o.settings.vp_offset_x=i.x,o.settings.vp_offset_y=i.y,o.settings.keyboard_focus=r._focused,o.showMenu(0,s.clientHeight),t.add(e.doc,"mousedown",r.hideMenu,r),r.setState("Selected",1),r.isMenuVisible=1}},renderMenu:function(){var e,t=this;e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons}),e.onHideMenu.add(t.hideMenu,t),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(n){var i=this;n&&"mousedown"==n.type&&e.getParent(n.target,function(e){return e.id===i.id||e.id===i.id+"_open"})||(n&&e.getParent(n.target,function(t){return e.hasClass(t,"mceMenu")})||(i.setState("Selected",0),t.remove(e.doc,"mousedown",i.hideMenu,i),i.menu&&i.menu.hideMenu()),i.isMenuVisible=0)},postRender:function(){var e=this,n=e.settings;t.add(e.id,"click",function(){e.isDisabled()||(n.onclick&&n.onclick(e.value),e.showMenu())})}})}(),function(){{var e=tinymce.DOM,t=tinymce.dom.Event;tinymce.each}tinymce.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t){this.parent(e,t),this.classPrefix="mceSplitButton"},renderHTML:function(){var t,n,i=this,o=i.settings;return t="<tbody><tr>",n=o.image?e.createHTML("img ",{src:o.image,"class":"mceAction "+o["class"]}):e.createHTML("span",{"class":"mceAction "+o["class"]},""),t+="<td>"+e.createHTML("a",{id:i.id+"_action",href:"javascript:;","class":"mceAction "+o["class"],onclick:"return false;",onmousedown:"return false;",title:o.title},n)+"</td>",n=e.createHTML("span",{"class":"mceOpen "+o["class"]}),t+="<td>"+e.createHTML("a",{id:i.id+"_open",href:"javascript:;","class":"mceOpen "+o["class"],onclick:"return false;",onmousedown:"return false;",title:o.title},n)+"</td>",t+="</tr></tbody>",e.createHTML("table",{id:i.id,"class":"mceSplitButton mceSplitButtonEnabled "+o["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:o.title},t)},postRender:function(){var n=this,i=n.settings;i.onclick&&t.add(n.id+"_action","click",function(){n.isDisabled()||i.onclick(n.value)}),t.add(n.id+"_open","click",n.showMenu,n),t.add(n.id+"_open","focus",function(){n._focused=1}),t.add(n.id+"_open","blur",function(){n._focused=0}),(tinymce.isIE6||!e.boxModel)&&(t.add(n.id,"mouseover",function(){e.hasClass(n.id,"mceSplitButtonDisabled")||e.addClass(n.id,"mceSplitButtonHover")}),t.add(n.id,"mouseout",function(){e.hasClass(n.id,"mceSplitButtonDisabled")||e.removeClass(n.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),t.clear(this.id+"_action"),t.clear(this.id+"_open")}})}(),function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.is,i=tinymce.each;tinymce.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(e,t){var n=this;n.parent(e,t),n.settings=t=tinymce.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},n.settings),n.onShowMenu=new tinymce.util.Dispatcher(n),n.onHideMenu=new tinymce.util.Dispatcher(n),n.value=t.default_color},showMenu:function(){var n,i,o=this;if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();n=e.get(o.id),e.show(o.id+"_menu"),e.addClass(n,"mceSplitButtonSelected"),i=e.getPos(n),e.setStyles(o.id+"_menu",{left:i.x,top:i.y+n.clientHeight,zIndex:2e5}),n=0,t.add(e.doc,"mousedown",o.hideMenu,o),o._focused&&(o._keyHandler=t.add(o.id+"_menu","keydown",function(e){27==e.keyCode&&o.hideMenu()}),e.select("a",o.id+"_menu")[0].focus()),o.onShowMenu.dispatch(o),o.isMenuVisible=1}},hideMenu:function(n){var i=this;n&&"mousedown"==n.type&&e.getParent(n.target,function(e){return e.id===i.id+"_open"})||(n&&e.getParent(n.target,function(t){return e.hasClass(t,"mceSplitButtonMenu")})||(e.removeClass(i.id,"mceSplitButtonSelected"),t.remove(e.doc,"mousedown",i.hideMenu,i),t.remove(i.id+"_menu","keydown",i._keyHandler),e.hide(i.id+"_menu")),i.onHideMenu.dispatch(i),i.isMenuVisible=0)},renderMenu:function(){var o,r,s,a,c,d=this,l=0,u=d.settings;return c=e.add(u.menu_container,"div",{id:d.id+"_menu","class":u.menu_class+" "+u["class"],style:"position:absolute;left:0;top:-1000px;"}),o=e.add(c,"div",{"class":u["class"]+" mceSplitButtonMenu"}),e.add(o,"span",{"class":"mceMenuLine"}),r=e.add(o,"table",{"class":"mceColorSplitMenu"}),s=e.add(r,"tbody"),l=0,i(n(u.colors,"array")?u.colors:u.colors.split(","),function(t){t=t.replace(/^#/,""),l--||(a=e.add(s,"tr"),l=u.grid_width-1),r=e.add(a,"td"),r=e.add(r,"a",{href:"javascript:;",style:{backgroundColor:"#"+t},mce_color:"#"+t})}),u.more_colors_func&&(r=e.add(s,"tr"),r=e.add(r,"td",{colspan:u.grid_width,"class":"mceMoreColors"}),r=e.add(r,"a",{id:d.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},u.more_colors_title),t.add(r,"click",function(e){return u.more_colors_func.call(u.more_colors_scope||this),t.cancel(e)})),e.addClass(o,"mceColorSplitMenu"),t.add(d.id+"_menu","click",function(e){var n;return e=e.target,"A"==e.nodeName&&(n=e.getAttribute("mce_color"))&&d.setColor(n),t.cancel(e)}),c},setColor:function(t){var n=this;e.setStyle(n.id+"_preview","backgroundColor",t),n.value=t,n.hideMenu(),n.settings.onselect(t)},postRender:function(){var t=this,n=t.id;t.parent(),e.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),e.setStyle(t.id+"_preview","backgroundColor",t.value)},destroy:function(){this.parent(),t.clear(this.id+"_menu"),t.clear(this.id+"_more"),e.remove(this.id+"_menu")}})}(),tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,t,n,i,o,r,s=this,a="",c=tinymce.DOM,d=s.settings;for(r=s.controls,n=0;n<r.length;n++)t=r[n],i=r[n-1],o=r[n+1],0===n&&(e="mceToolbarStart",t.Button?e+=" mceToolbarStartButton":t.SplitButton?e+=" mceToolbarStartSplitButton":t.ListBox&&(e+=" mceToolbarStartListBox"),a+=c.createHTML("td",{"class":e},c.createHTML("span",null,"<!-- IE -->"))),i&&t.ListBox&&(i.Button||i.SplitButton)&&(a+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))),a+=c.stdMode?'<td style="position: relative">'+t.renderHTML()+"</td>":"<td>"+t.renderHTML()+"</td>",o&&t.ListBox&&(o.Button||o.SplitButton)&&(a+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",t.Button?e+=" mceToolbarEndButton":t.SplitButton?e+=" mceToolbarEndSplitButton":t.ListBox&&(e+=" mceToolbarEndListBox"),a+=c.createHTML("td",{"class":e},c.createHTML("span",null,"<!-- IE -->")),c.createHTML("table",{id:s.id,"class":"mceToolbar"+(d["class"]?" "+d["class"]:""),cellpadding:"0",cellspacing:"0",align:s.settings.align||""},"<tbody><tr>"+a+"</tr></tbody>")}}),function(){{var e=tinymce.util.Dispatcher;tinymce.each}tinymce.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new e(this),get:function(e){return this.lookup[e]},requireLangPack:function(e){var t,n=tinymce.EditorManager.settings;n&&n.language&&(t=this.urls[e]+"/langs/"+n.language+".js",tinymce.dom.Event.domLoaded||n.strict_mode?tinymce.ScriptLoader.add(t):tinymce.ScriptLoader.load(t))},add:function(e,t){return this.items.push(t),this.lookup[e]=t,this.onAdd.dispatch(this,e,t),t},load:function(e,t,n,i){var o=this;o.urls[e]||(0!=t.indexOf("/")&&-1==t.indexOf("://")&&(t=tinymce.baseURL+"/"+t),o.urls[e]=t.substring(0,t.lastIndexOf("/")),tinymce.ScriptLoader.add(t,n,i))}}),tinymce.PluginManager=new tinymce.AddOnManager,tinymce.ThemeManager=new tinymce.AddOnManager}(),function(){var e=tinymce.each,t=tinymce.extend,n=tinymce.DOM,i=tinymce.dom.Event,o=tinymce.ThemeManager,r=tinymce.PluginManager,s=tinymce.explode;tinymce.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var e=this,t=window.location;tinymce.documentBaseURL=t.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(tinymce.documentBaseURL)||(tinymce.documentBaseURL+="/"),tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinymce.baseURL),tinymce.EditorManager.baseURI=new tinymce.util.URI(tinymce.baseURL),document.domain&&t.hostname!=document.domain&&(tinymce.relaxedDomain=document.domain),!tinymce.relaxedDomain&&tinymce.EditorManager.baseURI.host!=t.hostname&&t.hostname&&(document.domain=tinymce.relaxedDomain=t.hostname.replace(/.*\.(.+\..+)$/,"$1")),e.onBeforeUnload=new tinymce.util.Dispatcher(e),i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)})},init:function(a){function c(e,t,n){var i=e[t];if(i)return tinymce.is(i,"string")&&(n=i.replace(/\.\w+$/,""),n=n?tinymce.resolve(n):0,i=tinymce.resolve(i)),i.apply(n||this,Array.prototype.slice.call(arguments,2))}var d,l,u,m,f=this,h=tinymce.ScriptLoader,p=[];a=t({theme:"simple",language:"en",strict_loading_mode:"application/xhtml+xml"==document.contentType},a),f.settings=a,i.domLoaded||a.strict_loading_mode||(a.language&&h.add(tinymce.baseURL+"/langs/"+a.language+".js"),a.theme&&"-"!=a.theme.charAt(0)&&!o.urls[a.theme]&&o.load(a.theme,"themes/"+a.theme+"/editor_template"+tinymce.suffix+".js"),a.plugins&&(d=s(a.plugins),-1!=tinymce.inArray(d,"compat2x")&&r.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),e(d,function(e){if(e&&"-"!=e.charAt(0)&&!r.urls[e]){if(!tinymce.isWebKit&&"safari"==e)return;r.load(e,"plugins/"+e+"/editor_plugin"+tinymce.suffix+".js")}})),h.loadQueue()),i.add(document,"init",function(){function t(e,t){return t.constructor===RegExp?t.test(e.className):n.hasClass(e,t)}var i,o;if(c(a,"onpageload"),!a.browsers||(i=!1,e(s(a.browsers),function(e){switch(e){case"ie":case"msie":tinymce.isIE&&(i=!0);break;case"gecko":tinymce.isGecko&&(i=!0);break;case"safari":case"webkit":tinymce.isWebKit&&(i=!0);break;case"opera":tinymce.isOpera&&(i=!0)}}),i)){switch(a.mode){case"exact":i=a.elements||"",i.length>0&&e(s(i),function(t){n.get(t)?(m=new tinymce.Editor(t,a),p.push(m),m.render(1)):(l=0,e(document.forms,function(i){e(i.elements,function(e){e.name===t&&(t="mce_editor_"+l,n.setAttrib(e,"id",t),m=new tinymce.Editor(t,a),p.push(m),m.render(1))})}))});break;case"textareas":case"specific_textareas":e(n.select("textarea"),function(e){a.editor_deselector&&t(e,a.editor_deselector)||(!a.editor_selector||t(e,a.editor_selector))&&(u=n.get(e.name),e.id||u||(e.id=e.name),(!e.id||f.get(e.id))&&(e.id=n.uniqueId()),m=new tinymce.Editor(e.id,a),p.push(m),m.render(1))})}a.oninit&&(i=o=0,e(p,function(e){o++,e.initialized?i++:e.onInit.add(function(){i++,i==o&&c(a,"oninit")}),i==o&&c(a,"oninit")}))}})},get:function(e){return this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(e){return this.editors[e.id]=e,this._setActive(e),e},remove:function(t){var n=this;return n.editors[t.id]?(delete n.editors[t.id],n.activeEditor==t&&e(n.editors,function(e){return n._setActive(e),!1}),t.destroy(),t):null},execCommand:function(e,t,n){function i(){s.destroy(),o.detachEvent("onunload",i),o=o.tinyMCE=o.tinymce=null}var o,r=this,s=r.get(n);switch(e){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return r.get(n)||new tinymce.Editor(n,r.settings).render(),!0;case"mceAddFrameControl":return o=n.window,o.tinyMCE=tinyMCE,o.tinymce=tinymce,tinymce.DOM.doc=o.document,tinymce.DOM.win=o,s=new tinymce.Editor(n.element_id,n),s.render(),tinymce.isIE&&o.attachEvent("onunload",i),n.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(r.execCommand("mceAddControl",0,n),!0)}return r.activeEditor?r.activeEditor.execCommand(e,t,n):!1},execInstanceCommand:function(e,t,n,i){var o=this.get(e);return o?o.execCommand(t,n,i):!1},triggerSave:function(){e(this.editors,function(e){e.save()})},addI18n:function(t,n){var i=this.i18n;tinymce.is(t,"string")?e(n,function(e,n){i[t+"."+n]=e}):e(t,function(t,n){e(t,function(t,o){e(t,function(e,t){"common"===o?i[n+"."+t]=e:i[n+"."+o+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}}),tinymce.EditorManager.preInit()}();var tinyMCE=window.tinyMCE=tinymce.EditorManager;!function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.extend,i=tinymce.util.Dispatcher,o=tinymce.each,r=tinymce.isGecko,s=tinymce.isIE,a=tinymce.isWebKit,c=tinymce.is,d=tinymce.ThemeManager,l=tinymce.PluginManager,u=tinymce.EditorManager,m=(tinymce.inArray,tinymce.grep,tinymce.explode);tinymce.create("tinymce.Editor",{Editor:function(e,t){var r=this;r.id=r.editorId=e,r.execCommands={},r.queryStateCommands={},r.queryValueCommands={},r.plugins={},o(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(e){r[e]=new i(r)}),r.settings=t=n({id:e,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:!0,convert_fonts_to_spans:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1},t),r.documentBaseURI=new tinymce.util.URI(t.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI}),r.baseURI=u.baseURI,r.execCallback("setup",r)},render:function(n){function i(){s.language&&f.add(tinymce.baseURL+"/langs/"+s.language+".js"),"-"==s.theme.charAt(0)||d.urls[s.theme]||d.load(s.theme,"themes/"+s.theme+"/editor_template"+tinymce.suffix+".js"),o(m(s.plugins),function(e){if(e&&"-"!=e.charAt(0)&&!l.urls[e]){if(!a&&"safari"==e)return;l.load(e,"plugins/"+e+"/editor_plugin"+tinymce.suffix+".js")}}),f.loadQueue(function(){function e(){window.setTimeout(function(){t.remove(r.id,"focus",e),r.windowManager.confirm(r.getLang("edit_confirm"),function(e){e&&r.init()})},0)}return s.ask?void t.add(r.id,"focus",e):void(r.removed||r.init())})}var r=this,s=r.settings,c=r.id,f=tinymce.ScriptLoader;return t.domLoaded?(n||(s.strict_loading_mode=1,tinyMCE.settings=s),void(r.getElement()&&(s.strict_loading_mode&&(f.settings.strict_mode=s.strict_loading_mode,tinymce.DOM.settings.strict=1),!/TEXTAREA|INPUT/i.test(r.getElement().nodeName)&&s.hidden_input&&e.getParent(c,"form")&&e.insertAfter(e.create("input",{type:"hidden",name:c}),c),r.windowManager=new tinymce.WindowManager(r),"xml"==s.encoding&&r.onGetContent.add(function(t,n){n.save&&(n.content=e.encode(n.content))}),s.add_form_submit_trigger&&r.onSubmit.addToTop(function(){r.initialized&&(r.save(),r.isNotDirty=1)}),s.add_unload_trigger&&!s.ask&&(r._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!r.initialized||r.destroyed||r.isHidden()||r.save({format:"raw",no_events:!0})})),tinymce.addUnload(r.destroy,r),s.submit_patch&&r.onBeforeRenderUI.add(function(){var e=r.getElement().form;e&&(e._mceOldSubmit||(e.submit.nodeType||e.submit.length||(r.formElement=e,e._mceOldSubmit=e.submit,e.submit=function(){return u.triggerSave(),r.isNotDirty=1,this._mceOldSubmit(this)}),e=null))}),-1!=s.plugins.indexOf("compat2x")?(l.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),f.loadQueue(i)):i()))):void t.add(document,"init",function(){r.render()})},init:function(){function n(e,t){t&&t.initial||v.execCommand("mceRepaint")}var i,a,c,f,h,p,g,y,v=this,_=v.settings,b=v.getElement();u.add(v),_.theme=_.theme.replace(/-/,""),f=d.get(_.theme),v.theme=new f,v.theme.init&&_.init_theme&&v.theme.init(v,d.urls[_.theme]||tinymce.documentBaseURL.replace(/\/$/,"")),o(m(_.plugins.replace(/\-/g,"")),function(e){var t,n=l.get(e),i=l.urls[e]||tinymce.documentBaseURL.replace(/\/$/,"");n&&(t=new n(v,i),v.plugins[e]=t,t.init&&t.init(v,i))}),_.popup_css!==!1&&(_.popup_css=_.popup_css?v.documentBaseURI.toAbsolute(_.popup_css):v.baseURI.toAbsolute("themes/"+_.theme+"/skins/"+_.skin+"/dialog.css")),_.popup_css_add&&(_.popup_css+=","+v.documentBaseURI.toAbsolute(_.popup_css_add)),v.controlManager=new tinymce.ControlManager(v),v.undoManager=new tinymce.UndoManager(v),v.undoManager.onAdd.add(function(e,t){return t.initial?void 0:v.onChange.dispatch(v,t,e)}),v.undoManager.onUndo.add(function(e,t){return v.onUndo.dispatch(v,t,e)}),v.undoManager.onRedo.add(function(e,t){return v.onRedo.dispatch(v,t,e)}),_.custom_undo_redo&&v.onExecCommand.add(function(e,t,n,i,o){"Undo"==t||"Redo"==t||"mceRepaint"==t||o&&o.skip_undo||v.undoManager.add()}),v.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||v.nodeChanged()}),r&&(v.onUndo.add(n),v.onRedo.add(n),v.onSetContent.add(n)),v.onBeforeRenderUI.dispatch(v,v.controlManager),_.render_ui&&(a=_.width||b.style.width||b.offsetWidth,c=_.height||b.style.height||b.offsetHeight,v.orgDisplay=b.style.display,y=/^[0-9\.]+(|px)$/i,y.test(""+a)&&(a=Math.max(parseInt(a)+(f.deltaWidth||0),100)),y.test(""+c)&&(c=Math.max(parseInt(c)+(f.deltaHeight||0),100)),f=v.theme.renderUI({targetNode:b,width:a,height:c,deltaWidth:_.delta_width,deltaHeight:_.delta_height}),v.editorContainer=f.editorContainer),e.setStyles(f.sizeContainer||f.editorContainer,{width:a,height:c}),c=(f.iframeHeight||c)+("number"==typeof c?f.deltaHeight||0:""),100>c&&(c=100),v.iframeHTML=_.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+v.documentBaseURI.getURI()+'" />',v.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',tinymce.relaxedDomain&&(v.iframeHTML+='<script type="text/javascript">document.domain = "'+tinymce.relaxedDomain+'";</script>'),p=_.body_id||"tinymce",-1!=p.indexOf("=")&&(p=v.getParam("body_id","","hash"),p=p[v.id]||p),g=_.body_class||"",-1!=g.indexOf("=")&&(g=v.getParam("body_class","","hash"),g=g[v.id]||""),v.iframeHTML+='</head><body id="'+p+'" class="mceContentBody '+g+'"></body></html>',tinymce.relaxedDomain&&(s||tinymce.isOpera&&parseFloat(opera.version())>=9.5?h='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+v.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()':tinymce.isOpera&&(h='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()')),i=e.add(f.iframeContainer,"iframe",{id:v.id+"_ifr",src:h||'javascript:""',frameBorder:"0",style:{width:"100%",height:c}}),v.contentAreaContainer=f.iframeContainer,e.get(f.editorContainer).style.display=v.orgDisplay,e.get(v.id).style.display="none",tinymce.isOldWebKit?(t.add(i,"load",v.setupIframe,v),i.src=tinymce.baseURL+"/plugins/safari/blank.htm"):(s&&tinymce.relaxedDomain||v.setupIframe(),b=i=f=null)},setupIframe:function(){function n(e,t){o(m(c.custom_elements),function(e){var n;0===e.indexOf("~")?(e=e.substring(1),n="span"):n="div",t.content=t.content.replace(new RegExp("<("+e+")([^>]*)>","g"),"<"+n+' mce_name="$1"$2>'),t.content=t.content.replace(new RegExp("</("+e+")>","g"),"</"+n+">")})}var i,a=this,c=a.settings,d=e.get(a.id),l=a.getDoc();if(s&&tinymce.relaxedDomain||(l.open(),l.write(a.iframeHTML),l.close()),!s)try{c.readonly||(l.designMode="On")}catch(f){}if(s&&(i=a.getBody(),e.hide(i),c.readonly||(i.contentEditable=!0),e.show(i)),a.dom=new tinymce.DOM.DOMUtils(a.getDoc(),{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:c.force_hex_style_colors,class_filter:c.class_filter,update_styles:1,fix_ie_paragraphs:1}),a.serializer=new tinymce.dom.Serializer({entity_encoding:c.entity_encoding,entities:c.entities,valid_elements:c.verify_html===!1?"*[*]":c.valid_elements,extended_valid_elements:c.extended_valid_elements,valid_child_elements:c.valid_child_elements,invalid_elements:c.invalid_elements,fix_table_elements:c.fix_table_elements,fix_list_elements:c.fix_list_elements,fix_content_duplication:c.fix_content_duplication,convert_fonts_to_spans:c.convert_fonts_to_spans,font_size_classes:c.font_size_classes,font_size_style_values:c.font_size_style_values,apply_source_formatting:c.apply_source_formatting,remove_linebreaks:c.remove_linebreaks,element_format:c.element_format,dom:a.dom}),a.selection=new tinymce.dom.Selection(a.dom,a.getWin(),a.serializer),a.forceBlocks=new tinymce.ForceBlocks(a,{forced_root_block:c.forced_root_block}),a.editorCommands=new tinymce.EditorCommands(a),a.serializer.onPreProcess.add(function(e,t){return a.onPreProcess.dispatch(a,t,e)
}),a.serializer.onPostProcess.add(function(e,t){return a.onPostProcess.dispatch(a,t,e)}),a.onPreInit.dispatch(a),c.gecko_spellcheck||(a.getBody().spellcheck=0),c.readonly||a._addEvents(),a.controlManager.onPostRender.dispatch(a,a.controlManager),a.onPostRender.dispatch(a),c.directionality&&(a.getBody().dir=c.directionality),c.nowrap&&(a.getBody().style.whiteSpace="nowrap"),c.auto_resize&&a.onNodeChange.add(a.resizeToContent,a),c.custom_elements&&(a.onBeforeSetContent.add(n),a.onPostProcess.add(function(e,t){t.set&&n(e,t)})),c.handle_node_change_callback&&a.onNodeChange.add(function(e,t,n){a.execCallback("handle_node_change_callback",a.id,n,-1,-1,!0,a.selection.isCollapsed())}),c.save_callback&&a.onSaveContent.add(function(e,t){var n=a.execCallback("save_callback",a.id,t.content,a.getBody());n&&(t.content=n)}),c.onchange_callback&&a.onChange.add(function(e,t){a.execCallback("onchange_callback",a,t)}),c.convert_newlines_to_brs&&a.onBeforeSetContent.add(function(e,t){t.initial&&(t.content=t.content.replace(/\r?\n/g,"<br />"))}),c.fix_nesting&&s&&a.onBeforeSetContent.add(function(e,t){t.content=a._fixNesting(t.content)}),c.preformatted&&a.onPostProcess.add(function(e,t){t.content=t.content.replace(/^\s*<pre.*?>/,""),t.content=t.content.replace(/<\/pre>\s*$/,""),t.set&&(t.content='<pre class="mceItemHidden">'+t.content+"</pre>")}),c.verify_css_classes&&(a.serializer.attribValueFilter=function(e,t){var n,i;return"class"==e?(a.classesRE||(i=a.dom.getClasses(),i.length>0&&(n="",o(i,function(e){n+=(n?"|":"")+e["class"]}),a.classesRE=new RegExp("("+n+")","gi"))),!a.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(t)||a.classesRE.test(t)?t:""):t}),c.convert_fonts_to_spans&&a._convertFonts(),c.inline_styles&&a._convertInlineElements(),c.cleanup_callback&&(a.onBeforeSetContent.add(function(e,t){t.content=a.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),a.onPreProcess.add(function(e,t){t.set&&a.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&a.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),a.onPostProcess.add(function(e,t){t.set&&(t.content=a.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=a.execCallback("cleanup_callback","get_from_editor",t.content,t))})),c.save_callback&&a.onGetContent.add(function(e,t){t.save&&(t.content=a.execCallback("save_callback",a.id,t.content,a.getBody()))}),c.handle_event_callback&&a.onEvent.add(function(e,n,i){a.execCallback("handle_event_callback",n,e,i)===!1&&t.cancel(n)}),a.onSetContent.add(function(){a.addVisual(a.getBody())}),c.padd_empty_editor&&a.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),r&&!c.readonly)try{l.designMode="Off",l.designMode="On"}catch(f){}setTimeout(function(){a.removed||(a.load({initial:!0,format:c.cleanup_on_startup?"html":"raw"}),a.startContent=a.getContent({format:"raw"}),a.undoManager.add({initial:!0}),a.initialized=!0,a.onInit.dispatch(a),a.execCallback("setupcontent_callback",a.id,a.getBody(),a.getDoc()),a.execCallback("init_instance_callback",a),a.focus(!0),a.nodeChanged({initial:1}),c.content_css&&tinymce.each(m(c.content_css),function(e){a.dom.loadCSS(a.documentBaseURI.toAbsolute(e))}),c.auto_focus&&setTimeout(function(){var e=u.get(c.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getWin().focus()},100))},1),d=null},focus:function(e){var t,n=this,i=n.settings.content_editable;e||i||s&&n.selection.getNode().ownerDocument==n.getDoc()||n.getWin().focus(),u.activeEditor!=n&&(null!=(t=u.activeEditor)&&t.onDeactivate.dispatch(t,n),n.onActivate.dispatch(n,t)),u._setActive(n)},execCallback:function(e){var t,n=this,i=n.settings[e];if(i)return n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),c(i,"string")&&(t=i.replace(/\.\w+$/,""),t=t?tinymce.resolve(t):0,i=tinymce.resolve(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=u.i18n;return e?n[t+"."+e]||e.replace(/{\#([^}]+)\}/g,function(e,i){return n[t+"."+i]||"{#"+i+"}"}):""},getLang:function(e,t){return u.i18n[(this.settings.language||"en")+"."+e]||(c(t)?t:"{#"+e+"}")},getParam:function(e,t,n){var i,r=tinymce.trim,s=c(this.settings[e])?this.settings[e]:t;return"hash"===n?(i={},c(s,"string")?o(s.split(s.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),i[r(e[0])]=r(e.length>1?e[1]:e)}):i=s,i):s},nodeChanged:function(e){var t=this,n=t.selection,i=n.getNode()||t.getBody();t.initialized&&t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,s&&i.ownerDocument!=t.getDoc()?t.getBody():i,n.isCollapsed(),e)},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,i){var r,s=this;return s.settings.custom_shortcuts?(s.shortcuts=s.shortcuts||{},c(n,"string")&&(r=n,n=function(){s.execCommand(r,!1,null)}),c(n,"object")&&(r=n,n=function(){s.execCommand(r[0],r[1],r[2])}),o(m(e),function(e){var r={func:n,scope:i||this,desc:t,alt:!1,ctrl:!1,shift:!1};o(m(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":r[e]=!0;break;default:r.charCode=e.charCodeAt(0),r.keyCode=e.toUpperCase().charCodeAt(0)}}),s.shortcuts[(r.ctrl?"ctrl":"")+","+(r.alt?"alt":"")+","+(r.shift?"shift":"")+","+r.keyCode]=r}),!0):!1},execCommand:function(e,t,n,i){var r,s,a=this,c=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||i&&i.skip_focus||a.focus(),r={},a.onBeforeExecCommand.dispatch(a,e,t,n,r),r.terminate?!1:a.execCallback("execcommand_callback",a.id,a.selection.getNode(),e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,i),!0):(r=a.execCommands[e])&&(s=r.func.call(r.scope,t,n),s!==!0)?(a.onExecCommand.dispatch(a,e,t,n,i),s):(o(a.plugins,function(o){return o.execCommand&&o.execCommand(e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,i),c=1,!1):void 0}),c?!0:a.theme.execCommand&&a.theme.execCommand(e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,i),!0):a.editorCommands.execCommand(e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,i),!0):(a.getDoc().execCommand(e,t,n),void a.onExecCommand.dispatch(a,e,t,n,i)))},queryCommandState:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryStateCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=i.editorCommands.queryCommandState(e),-1!==t)return t;try{return this.getDoc().queryCommandState(e)}catch(o){}}},queryCommandValue:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryValueCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=i.editorCommands.queryCommandValue(e),c(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(o){}}},show:function(){var t=this;e.show(t.getContainer()),e.hide(t.id),t.load()},hide:function(){var t=this,n=t.getDoc();s&&n&&n.execCommand("SelectAll"),t.save(),e.hide(t.getContainer()),e.setStyle(t.id,"display",t.orgDisplay)},isHidden:function(){return!e.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},resizeToContent:function(){var t=this;e.setStyle(t.id+"_ifr","height",t.getBody().scrollHeight)},load:function(e){var t,n=this,i=n.getElement();return i?(e=e||{},e.load=!0,t=n.setContent(c(i.value)?i.value:i.innerHTML,e),e.element=i,e.no_events||n.onLoadContent.dispatch(n,e),e.element=i=null,t):void 0},save:function(t){var n,i,r=this,s=r.getElement();if(s&&r.initialized)return t=t||{},t.save=!0,t.no_events||(r.undoManager.typing=0,r.undoManager.add()),t.element=s,n=t.content=r.getContent(t),t.no_events||r.onSaveContent.dispatch(r,t),n=t.content,/TEXTAREA|INPUT/i.test(s.nodeName)?s.value=n:(s.innerHTML=n,(i=e.getParent(r.id,"form"))&&o(i.elements,function(e){return e.name==r.id?(e.value=n,!1):void 0})),t.element=s=null,n},setContent:function(e,t){var n=this;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.onBeforeSetContent.dispatch(n,t),tinymce.isIE||0!==e.length&&!/^\s+$/.test(e)||(t.content=n.dom.setHTML(n.getBody(),'<br mce_bogus="1" />'),t.format="raw"),t.content=n.dom.setHTML(n.getBody(),tinymce.trim(t.content)),"raw"!=t.format&&n.settings.cleanup&&(t.getInner=!0,t.content=n.dom.setHTML(n.getBody(),n.serializer.serialize(n.getBody(),t))),t.no_events||n.onSetContent.dispatch(n,t),t.content},getContent:function(e){var t,n=this;return e=e||{},e.format=e.format||"html",e.get=!0,e.no_events||n.onBeforeGetContent.dispatch(n,e),"raw"!=e.format&&n.settings.cleanup?(e.getInner=!0,t=n.serializer.serialize(n.getBody(),e)):t=n.getBody().innerHTML,t=t.replace(/^\s*|\s*$/g,""),e.content=t,e.no_events||n.onGetContent.dispatch(n,e),e.content},isDirty:function(){var e=this;return tinymce.trim(e.startContent)!=tinymce.trim(e.getContent({format:"raw",no_events:1}))&&!e.isNotDirty},getContainer:function(){var t=this;return t.container||(t.container=e.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return e.get(this.settings.content_element||this.id)},getWin:function(){var t,n=this;return n.contentWindow||(t=e.get(n.id+"_ifr"),t&&(n.contentWindow=t.contentWindow)),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,o=i.settings;return o.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:o.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var t=this,n=t.settings;e=e||t.getBody(),c(t.hasVisual)||(t.hasVisual=n.visual),o(t.dom.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return i=t.dom.getAttrib(e,"border"),void(i&&"0"!=i||(t.hasVisual?t.dom.addClass(e,n.visual_table_class):t.dom.removeClass(e,n.visual_table_class)));case"A":return i=t.dom.getAttrib(e,"name"),void(i&&(t.hasVisual?t.dom.addClass(e,"mceItemAnchor"):t.dom.removeClass(e,"mceItemAnchor")))}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var t=this,n=t.getContainer();t.removed=1,t.hide(),t.execCallback("remove_instance_callback",t),t.onRemove.dispatch(t),t.onExecCommand.listeners=[],u.remove(t),e.remove(n)},destroy:function(e){var n=this;n.destroyed||(e||(tinymce.removeUnload(n.destroy),tinyMCE.onBeforeUnload.remove(n._beforeUnload),n.theme.destroy&&n.theme.destroy(),n.controlManager.destroy(),n.selection.destroy(),n.dom.destroy(),n.settings.content_editable||(t.clear(n.getWin()),t.clear(n.getDoc())),t.clear(n.getBody()),t.clear(n.formElement)),n.formElement&&(n.formElement.submit=n.formElement._mceOldSubmit,n.formElement._mceOldSubmit=null),n.contentAreaContainer=n.formElement=n.container=n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1)},_addEvents:function(){function n(e,t){e.type;f.removed||f.onEvent.dispatch(f,e,t)!==!1&&f[p[e.fakeType||e.type]].dispatch(f,e,t)}function i(){var e=this,t=e.getDoc(),n=e.settings;if(r&&!n.readonly){if(e._isHidden())try{n.content_editable||(t.designMode="On")}catch(i){}try{t.execCommand("styleWithCSS",0,!1)}catch(i){if(!e._isHidden())try{t.execCommand("useCSS",0,!0)}catch(i){}}if(!n.table_inline_editing)try{t.execCommand("enableInlineTableEditing",!1,!1)}catch(i){}if(!n.object_resizing)try{t.execCommand("enableObjectResizing",!1,!1)}catch(i){}}}function s(e,n){return 9===n.keyCode?t.cancel(n):void 0}function a(n,i){function r(t){if(c=e.getParent(n.id,"form"),d=c.elements,c)if(o(d,function(e,t){return e.id==n.id?(s=t,!1):void 0}),t>0){for(a=s+1;a<d.length;a++)if("hidden"!=d[a].type)return d[a]}else for(a=s-1;a>=0;a--)if("hidden"!=d[a].type)return d[a];return null}var s,a,c,d,l;return 9===i.keyCode&&(l=m(n.getParam("tab_focus")),1==l.length&&(l[1]=l[0],l[0]=":prev"),d=i.shiftKey?":prev"==l[0]?r(-1):e.get(l[0]):":next"==l[1]?r(1):e.get(l[1]))?((n=u.get(d.id||d.name))?n.focus():window.setTimeout(function(){window.focus(),d.focus()},10),t.cancel(i)):void 0}function c(e){var t=null;return e.altKey||e.ctrlKey||e.metaKey?(o(f.shortcuts,function(n){return tinymce.isMac&&n.ctrl!=e.metaKey||!tinymce.isMac&&n.ctrl!=e.ctrlKey||n.alt!=e.altKey||n.shift!=e.shiftKey?void 0:e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(t=n,!1):void 0}),t):t}function d(){f.undoManager.typing=0,f.undoManager.add()}var l,f=this,h=f.settings,p={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(o(p,function(i,o){switch(o){case"contextmenu":tinymce.isOpera?t.add(f.getBody(),"mousedown",function(e){e.ctrlKey&&(e.fakeType="contextmenu",n(e))}):t.add(f.getBody(),o,n);break;case"paste":t.add(f.getBody(),o,function(e){var t,i;e.clipboardData?t=e.clipboardData.getData("text/plain"):tinymce.isIE&&(t=f.getWin().clipboardData.getData("Text")),n(e,{text:t,html:i})});break;case"submit":case"reset":t.add(f.getElement().form||e.getParent(f.id,"form"),o,n);break;default:t.add(h.content_editable?f.getBody():f.getDoc(),o,n)}}),t.add(h.content_editable?f.getBody():r?f.getDoc():f.getWin(),"focus",function(){f.focus(!0)}),tinymce.isGecko&&t.add(f.getDoc(),"DOMNodeInserted",function(e){var t;e=e.target,1===e.nodeType&&"IMG"===e.nodeName&&(t=e.getAttribute("mce_src"))&&(e.src=f.documentBaseURI.toAbsolute(t))}),r&&(f.onBeforeExecCommand.add(i),f.onMouseDown.add(i)),f.onMouseUp.add(f.nodeChanged),f.onClick.add(f.nodeChanged),f.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&36>=n||n>=37&&40>=n||13==n||45==n||46==n||8==n||tinymce.isMac&&(91==n||93==n)||t.ctrlKey)&&f.nodeChanged()}),f.onReset.add(function(){f.setContent(f.startContent,{format:"raw"})}),f.getParam("tab_focus")&&(f.onKeyUp.add(s),r?(f.onKeyPress.add(a),f.onKeyDown.add(s)):f.onKeyDown.add(a)),h.custom_shortcuts){for(h.custom_undo_redo_keyboard_shortcuts&&(f.addShortcut("ctrl+z",f.getLang("undo_desc"),"Undo"),f.addShortcut("ctrl+y",f.getLang("redo_desc"),"Redo")),r&&(f.addShortcut("ctrl+b",f.getLang("bold_desc"),"Bold"),f.addShortcut("ctrl+i",f.getLang("italic_desc"),"Italic"),f.addShortcut("ctrl+u",f.getLang("underline_desc"),"Underline")),l=1;6>=l;l++)f.addShortcut("ctrl+"+l,"",["FormatBlock",!1,"<h"+l+">"]);f.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]),f.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]),f.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]),f.onKeyUp.add(function(e,n){var i=c(n);return i?t.cancel(n):void 0}),f.onKeyPress.add(function(e,n){var i=c(n);return i?t.cancel(n):void 0}),f.onKeyDown.add(function(e,n){var i=c(n);return i?(i.func.call(i.scope),t.cancel(n)):void 0})}tinymce.isIE&&(t.add(f.getDoc(),"controlselect",function(e){var n,i=f.resizeInfo;e=e.target,"IMG"===e.nodeName&&(i&&t.remove(i.node,i.ev,i.cb),f.dom.hasClass(e,"mceItemNoResize")?(ev="resizestart",n=t.add(e,"resizestart",t.cancel,t)):(ev="resizeend",n=t.add(e,ev,function(e){var t;e=e.target,(t=f.dom.getStyle(e,"width"))&&(f.dom.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),f.dom.setStyle(e,"width","")),(t=f.dom.getStyle(e,"height"))&&(f.dom.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),f.dom.setStyle(e,"height",""))})),i=f.resizeInfo={node:e,ev:ev,cb:n})}),f.onKeyDown.add(function(e,n){switch(n.keyCode){case 8:if(f.selection.getRng().item)return f.selection.getRng().item(0).removeNode(),t.cancel(n)}})),tinymce.isOpera&&f.onClick.add(function(e,n){t.prevent(n)}),h.custom_undo_redo&&(tinymce.isIE?t.add(f.getWin(),"blur",function(){var e;f.selection&&(e=f.selection.getNode(),!f.removed&&e.ownerDocument&&e.ownerDocument!=f.getDoc()&&d())}):t.add(f.getDoc(),"blur",function(){f.selection&&!f.removed&&d()}),f.onMouseDown.add(d),f.onKeyUp.add(function(e,t){(t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||13==t.keyCode||45==t.keyCode||t.ctrlKey)&&(f.undoManager.typing=0,f.undoManager.add())}),f.onKeyDown.add(function(e,t){return t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||13==t.keyCode||45==t.keyCode?void(f.undoManager.typing&&(f.undoManager.add(),f.undoManager.typing=0)):void(f.undoManager.typing||(f.undoManager.add(),f.undoManager.typing=1))}))},_convertInlineElements:function(){function e(e,c){s.inline_styles&&(c.get?o(r.dom.select("table,u,strike",c.node),function(e){switch(e.nodeName){case"TABLE":(t=a.getAttrib(e,"height"))&&(a.setStyle(e,"height",t),a.setAttrib(e,"height",""));break;case"U":case"STRIKE":e.style.textDecoration="U"==e.nodeName?"underline":"line-through",a.setAttrib(e,"mce_style",""),a.setAttrib(e,"mce_name","span")}}):c.set&&o(r.dom.select("table,span",c.node).reverse(),function(e){"TABLE"==e.nodeName?(t=a.getStyle(e,"height"))&&a.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")):(i="underline"==e.style.textDecoration?"u":"line-through"==e.style.textDecoration?"strike":"",i&&(e.style.textDecoration="",a.setAttrib(e,"mce_style",""),n=a.create(i,{style:a.getAttrib(e,"style")}),a.replace(n,e,1)))}))}var t,n,i,r=this,s=r.settings,a=r.dom;r.onPreProcess.add(e),s.cleanup_on_startup||r.onSetContent.add(function(t,n){n.initial&&e(r,{node:r.getBody(),set:1})})},_convertFonts:function(){function e(e){var t,n,c,d;if(s.inline_styles)for(c=r.dom.select("font",e),d=c.length-1;d>=0;d--)t=c[d],n=a.create("span",{style:a.getAttrib(t,"style"),"class":a.getAttrib(t,"class")}),a.setStyles(n,{fontFamily:a.getAttrib(t,"face"),color:a.getAttrib(t,"color"),backgroundColor:t.style.backgroundColor}),t.size&&(i?a.setStyle(n,"fontSize",i[parseInt(t.size)-1]):a.setAttrib(n,"class",o[parseInt(t.size)-1])),a.setAttrib(n,"mce_style",""),a.replace(n,t,1)}var t,n,i,o,r=this,s=r.settings,a=r.dom;s.inline_styles&&(t=[8,10,12,14,18,24,36],n=["xx-small","x-small","small","medium","large","x-large","xx-large"],(i=s.font_size_style_values)&&(i=m(i)),(o=s.font_size_classes)&&(o=m(o)),r.onPreProcess.add(function(t,n){n.get&&e(n.node)}),r.onSetContent.add(function(t,n){n.initial&&e(n.node)}))},_isHidden:function(){var e;return r?(e=this.selection.getSel(),!e||!e.rangeCount||0==e.rangeCount):0},_fixNesting:function(e){var t,n=[];for(e=e.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(e,i,o){if("/"===i){if(!n.length)return"";if(o!==n[n.length-1].tag){for(t=n.length-1;t>=0;t--)if(n[t].tag===o){n[t].close=1;break}return""}n.pop(),n.length&&n[n.length-1].close&&(e=e+"</"+n[n.length-1].tag+">",n.pop())}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(o))return e;if(/\/>$/.test(e))return e;n.push({tag:o})}return e}),t=n.length-1;t>=0;t--)e+="</"+n[t].tag+">";return e}})}(),function(){function e(e){return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(e.nodeName)}var t=tinymce.each,n=tinymce.isIE,i=tinymce.isGecko,o=tinymce.isOpera,r=tinymce.isWebKit;tinymce.create("tinymce.EditorCommands",{EditorCommands:function(e){this.editor=e},execCommand:function(e,t,n){var o,r=this,s=r.editor;switch(e){case"Cut":case"Copy":case"Paste":try{s.getDoc().execCommand(e,t,n)}catch(a){i?s.windowManager.confirm(s.getLang("clipboard_msg"),function(e){e&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","mceExternal")}):s.windowManager.alert(s.getLang("clipboard_no_support"))}return!0;case"mceResetDesignMode":case"mceBeginUndoLevel":return!0;case"unlink":return r.UnLink(),!0;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return r.mceJustify(e,e.substring(7).toLowerCase()),!0;case"mceEndUndoLevel":case"mceAddUndoLevel":return s.undoManager.add(),!0;default:if(o=this[e])return o.call(this,t,n),!0}return!1},Indent:function(){var e,i,o=this.editor,r=o.dom,s=o.selection;return e=o.settings.indentation,i=/[a-z%]+$/i.exec(e),e=parseInt(e),!o.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?(o.getDoc().execCommand("Indent",!1,null),void(n&&r.getParent(s.getNode(),function(e){"BLOCKQUOTE"==e.nodeName&&(e.dir=e.style.cssText="")}))):void t(this._getSelectedBlocks(),function(t){r.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+e+i)})},Outdent:function(){{var e,n,i,o=this.editor,r=o.dom;o.selection}return n=o.settings.indentation,i=/[a-z%]+$/i.exec(n),n=parseInt(n),!o.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?void o.getDoc().execCommand("Outdent",!1,null):void t(this._getSelectedBlocks(),function(t){e=Math.max(0,parseInt(t.style.paddingLeft||0)-n),r.setStyle(t,"paddingLeft",e?e+i:"")})},mceSetAttribute:function(e,t){var n,i=this.editor,o=i.dom;(n=o.getParent(i.selection.getNode(),o.isBlock))&&o.setAttrib(n,t.name,t.value)},mceSetContent:function(e,t){this.editor.setContent(t)},mceToggleVisualAid:function(){var e=this.editor;e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(e,t){var n=this.editor.selection;n.setContent(t.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,n){function i(e){t(n,function(t,n){o.dom.setAttrib(e,n,t)})}var o=this.editor,r=o.selection,s=o.dom.getParent(r.getNode(),"A");tinymce.is(n,"string")&&(n={href:n}),s?n.href?i(s):o.dom.remove(s,1):(o.execCommand("CreateLink",!1,"javascript:mctmp(0);"),t(o.dom.select("a"),function(e){"javascript:mctmp(0);"==e.href&&i(e)}))},UnLink:function(){var e=this.editor,t=e.selection;t.isCollapsed()&&t.select(t.getNode()),e.getDoc().execCommand("unlink",!1,null),t.collapse(0)},FontName:function(e,t){var n=this,i=n.editor,o=i.selection;t?i.settings.convert_fonts_to_spans?n._applyInlineStyle("span",{style:{fontFamily:t}}):i.getDoc().execCommand("FontName",!1,t):(o.isCollapsed()&&o.select(o.getNode()),n.RemoveFormat())},FontSize:function(e,t){var n,i,o=this.editor,r=o.settings;r.convert_fonts_to_spans&&t>=1&&7>=t&&(i=tinymce.explode(r.font_size_style_values),n=tinymce.explode(r.font_size_classes),t=n?n[t-1]||t:i[t-1]||t),t>=1&&7>=t?o.getDoc().execCommand("FontSize",!1,t):this._applyInlineStyle("span",{style:{fontSize:t}})},queryCommandValue:function(e){var t=this["queryValue"+e];return t?t.call(this,e):!1},queryCommandState:function(e){var t;switch(e){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(e,e.substring(7).toLowerCase());default:if(t=this["queryState"+e])return t.call(this,e)}return-1},_queryState:function(e){try{return this.editor.getDoc().queryCommandState(e)}catch(t){}},_queryVal:function(e){try{return this.editor.getDoc().queryCommandValue(e)}catch(t){}},queryValueFontSize:function(){var e,t=this.editor,n=0;return(e=t.dom.getParent(t.selection.getNode(),"SPAN"))&&(n=e.style.fontSize),n||!o&&!r?n||this._queryVal("FontSize"):((e=t.dom.getParent(t.selection.getNode(),"FONT"))&&(n=e.size),n)},queryValueFontName:function(){var e,t=this.editor,n=0;return(e=t.dom.getParent(t.selection.getNode(),"FONT"))&&(n=e.face),(e=t.dom.getParent(t.selection.getNode(),"SPAN"))&&(n=e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n||(n=this._queryVal("FontName")),n},mceJustify:function(e,n){var i,o,r,s=this.editor,a=s.selection,c=a.getNode(),d=c.nodeName,l=s.dom;if(s.settings.inline_styles&&this.queryStateJustify(e,n)&&(r=1),i=l.getParent(c,s.dom.isBlock),"IMG"==d){if("full"==n)return;return r?("center"==n&&l.setStyle(i||c.parentNode,"textAlign",""),l.setStyle(c,"float",""),void this.mceRepaint()):("center"==n?(i&&/^(TD|TH)$/.test(i.nodeName)&&(i=0),(!i||i.childNodes.length>1)&&(o=l.create("p"),o.appendChild(c.cloneNode(!1)),i?l.insertAfter(o,i):l.insertAfter(o,c),l.remove(c),c=o.firstChild,i=o),l.setStyle(i,"textAlign",n),l.setStyle(c,"float","")):(l.setStyle(c,"float",n),l.setStyle(i||c.parentNode,"textAlign","")),void this.mceRepaint())}if(s.settings.inline_styles&&s.settings.forced_root_block)return r&&(n=""),void t(this._getSelectedBlocks(l.getParent(a.getStart(),l.isBlock),l.getParent(a.getEnd(),l.isBlock)),function(e){l.setAttrib(e,"align",""),l.setStyle(e,"textAlign","full"==n?"justify":n)});if(r||s.getDoc().execCommand(e,!1,null),s.settings.inline_styles){if(r)return void l.getParent(s.selection.getNode(),function(e){e.style&&e.style.textAlign&&l.setStyle(e,"textAlign","")});t(l.select("*"),function(e){var t=e.align;t&&("full"==t&&(t="justify"),l.setStyle(e,"textAlign",t),l.setAttrib(e,"align",""))})}},mceSetCSSClass:function(e,t){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:t})},getSelectedElement:function(){function e(e){return h.getParent(e,function(e){return 1==e.nodeType})}var t,i,o,r,s,a,c,d,l,u,m=this,f=m.editor,h=f.dom,p=f.selection,g=p.getRng();if(p.isCollapsed()||g.item)return p.getNode();if(u=f.settings.merge_styles_invalid_parents,tinymce.is(u,"string")&&(u=new RegExp(u,"i")),n){if(t=g.duplicate(),t.collapse(!0),o=t.parentElement(),i=g.duplicate(),i.collapse(!1),r=i.parentElement(),o!=r&&(t.move("character",1),o=t.parentElement()),o==r&&(t=g.duplicate(),t.moveToElementText(o),0==t.compareEndPoints("StartToStart",g)&&0==t.compareEndPoints("EndToEnd",g)))return u&&u.test(o.nodeName)?null:o}else{if(o=g.startContainer,r=g.endContainer,s=g.startOffset,a=g.endOffset,!g.collapsed&&o==r&&2>s-a&&o.hasChildNodes())return d=o.childNodes[s],u&&u.test(d.nodeName)?null:d;if(3!=o.nodeType||3!=r.nodeType)return null;if(0==s&&(d=e(o),d&&d.firstChild!=o&&(d=null)),s==o.nodeValue.length&&(c=o.nextSibling,c&&1==c.nodeType&&(d=o.nextSibling)),0==a&&(c=r.previousSibling,c&&1==c.nodeType&&(l=c)),a==r.nodeValue.length&&(l=e(r),l&&l.lastChild!=r&&(l=null)),d==l)return u&&d&&u.test(d.nodeName)?null:d}return null},InsertHorizontalRule:function(){i||n?this.editor.selection.setContent("<hr />"):this.editor.getDoc().execCommand("InsertHorizontalRule",!1,"")},RemoveFormat:function(){var e=this,t=e.editor,n=t.selection;r?n.setContent(n.getContent({format:"raw"}).replace(/(<(span|b|i|strong|em|strike) [^>]+>|<(span|b|i|strong|em|strike)>|<\/(span|b|i|strong|em|strike)>|)/g,""),{format:"raw"}):t.getDoc().execCommand("RemoveFormat",!1,null),e.mceSetStyleInfo(0,{command:"removeformat"}),t.addVisual()},mceSetStyleInfo:function(e,n){function i(e){if(1==e.nodeType)switch(n.command){case"setattrib":return u.setAttrib(e,n.name,n.value);case"setstyle":return u.setStyle(e,n.name,n.value);case"removeformat":return u.setAttrib(e,"class","")}}var o,s,a,c=this,d=c.editor,l=d.getDoc(),u=d.dom,m=d.selection,f=n.wrapper||"span",s=m.getBookmark();a=d.settings.merge_styles_invalid_parents,tinymce.is(a,"string")&&(a=new RegExp(a,"i")),(o=c.getSelectedElement())&&!d.settings.force_span_wrappers?i(o,1):(l.execCommand("FontName",!1,"__"),t(u.select(r?"span":"font"),function(e){var n;("__"==u.getAttrib(e,"face")||"__"===e.style.fontFamily)&&(n=u.create(f,{mce_new:"1"}),i(n),t(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),u.replace(n,e))})),t(u.select(f).reverse(),function(e){var t=e.parentNode;u.getAttrib(e,"mce_new")||(t=u.getParent(e,function(e){return 1==e.nodeType&&u.getAttrib(e,"mce_new")}),t&&u.remove(e,1))}),t(u.select(f).reverse(),function(e){var t=e.parentNode;if(t&&u.getAttrib(e,"mce_new")&&(!d.settings.force_span_wrappers||"SPAN"==t.nodeName))return t.nodeName==f.toUpperCase()&&1==t.childNodes.length?u.remove(t,1):void(1!=e.nodeType||a&&a.test(t.nodeName)||1!=t.childNodes.length||(i(t),u.setAttrib(e,"class","")))}),t(u.select(f).reverse(),function(e){if(u.getAttrib(e,"mce_new")||u.getAttribs(e).length<=1&&""===e.className){if(!u.getAttrib(e,"class")&&!u.getAttrib(e,"style"))return u.remove(e,1);u.setAttrib(e,"mce_new","")}}),m.moveToBookmark(s)},queryStateJustify:function(e,t){var n=this.editor,i=n.selection.getNode(),o=n.dom;return i&&"IMG"==i.nodeName?o.getStyle(i,"float")==t?1:i.parentNode.style.textAlign==t:(i=o.getParent(n.selection.getStart(),function(e){return 1==e.nodeType&&e.style.textAlign}),"full"==t&&(t="justify"),n.settings.inline_styles?i&&i.style.textAlign==t:this._queryState(e))},ForeColor:function(e,t){var n=this.editor;return n.settings.convert_fonts_to_spans?void this._applyInlineStyle("span",{style:{color:t}}):void n.getDoc().execCommand("ForeColor",!1,t)},HiliteColor:function(e,t){function n(e){if(i)try{a.execCommand("styleWithCSS",0,e)}catch(t){a.execCommand("useCSS",0,!e)}}var r=this,s=r.editor,a=s.getDoc();return s.settings.convert_fonts_to_spans?void this._applyInlineStyle("span",{style:{backgroundColor:t}}):void(i||o?(n(!0),a.execCommand("hilitecolor",!1,t),n(!1)):a.execCommand("BackColor",!1,t))},Undo:function(){var e=this.editor;e.settings.custom_undo_redo?(e.undoManager.undo(),e.nodeChanged()):e.getDoc().execCommand("Undo",!1,null)},Redo:function(){var e=this.editor;e.settings.custom_undo_redo?(e.undoManager.redo(),e.nodeChanged()):e.getDoc().execCommand("Redo",!1,null)},FormatBlock:function(e,i){function o(e){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(e.nodeName)}var r,s,a,c=this,d=c.editor,l=d.selection,u=d.dom;return r=u.getParent(l.getNode(),function(e){return o(e)}),r&&(n&&o(r.parentNode)||"DIV"==r.nodeName)?(s=d.dom.create(i),t(u.getAttribs(r),function(e){u.setAttrib(s,e.nodeName,u.getAttrib(r,e.nodeName))}),a=l.getBookmark(),u.replace(s,r,1),l.moveToBookmark(a),void d.nodeChanged()):(i=d.settings.forced_root_block?i||"<p>":i,-1==i.indexOf("<")&&(i="<"+i+">"),tinymce.isGecko&&(i=i.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1")),void d.getDoc().execCommand("FormatBlock",!1,i))},mceCleanup:function(){var e=this.editor,t=e.selection,n=t.getBookmark();e.setContent(e.getContent()),t.moveToBookmark(n)},mceRemoveNode:function(e,t){var n,i=this.editor,o=i.selection,r=t||o.getNode();r!=i.getBody()&&(n=o.getBookmark(),i.dom.remove(r,1),o.moveToBookmark(n),i.nodeChanged())},mceSelectNodeDepth:function(e,t){var n=this.editor,i=n.selection,o=0;n.dom.getParent(i.getNode(),function(e){return 1==e.nodeType&&o++==t?(i.select(e),n.nodeChanged(),!1):void 0},n.getBody())},mceSelectNode:function(e,t){this.editor.selection.select(t)},mceInsertContent:function(e,t){this.editor.selection.setContent(t)},mceInsertRawHTML:function(e,t){var n=this.editor;n.selection.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,t))},mceRepaint:function(){var e,t,n=this.editor;if(tinymce.isGecko)try{e=n.selection,t=e.getBookmark(!0),e.getSel()&&e.getSel().selectAllChildren(n.getBody()),e.collapse(!0),e.moveToBookmark(t)}catch(i){}},queryStateUnderline:function(){var e=this.editor,t=e.selection.getNode();return t&&"A"==t.nodeName?!1:this._queryState("Underline")},queryStateOutdent:function(){var e,t=this.editor;if(t.settings.inline_styles){if((e=t.dom.getParent(t.selection.getStart(),t.dom.isBlock))&&parseInt(e.style.paddingLeft)>0)return!0;if((e=t.dom.getParent(t.selection.getEnd(),t.dom.isBlock))&&parseInt(e.style.paddingLeft)>0)return!0}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||!t.settings.inline_styles&&!!t.dom.getParent(t.selection.getNode(),"BLOCKQUOTE")},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return!!this.editor.dom.getParent(this.editor.selection.getStart(),function(e){return"BLOCKQUOTE"===e.nodeName})},mceBlockQuote:function(){function i(e){return g.getParent(e,function(e){return"BLOCKQUOTE"===e.nodeName})}var o,r,s,a,c,d,l,u,m,f=this,h=f.editor,p=h.selection,g=h.dom;if(o=g.getParent(p.getStart(),e),r=g.getParent(p.getEnd(),e),c=i(o)){if((o!=r||o.childNodes.length>1||1==o.childNodes.length&&"BR"!=o.firstChild.nodeName)&&(a=p.getBookmark()),i(r))for(l=c.cloneNode(!1);s=r.nextSibling;)l.appendChild(s.parentNode.removeChild(s));
for(l&&g.insertAfter(l,c),m=f._getSelectedBlocks(o,r),u=m.length-1;u>=0;u--)g.insertAfter(m[u],c);return/^\s*$/.test(c.innerHTML)&&g.remove(c,1),l&&/^\s*$/.test(l.innerHTML)&&g.remove(l,1),void(a?f.editor.selection.moveToBookmark(a):n?(p.select(o),p.collapse(0),g.getParent(p.getStart(),e)!=o&&(d=p.getRng(),d.move("character",-1),d.select())):(d=h.getDoc().createRange(),d.setStart(o,0),d.setEnd(o,0),p.setRng(d)))}return!n||o||r?void(o&&r&&((o!=r||o.childNodes.length>1||1==o.childNodes.length&&"BR"!=o.firstChild.nodeName)&&(a=p.getBookmark()),t(f._getSelectedBlocks(i(p.getStart()),i(p.getEnd())),function(e){if("BLOCKQUOTE"==e.nodeName&&!c)return void(c=e);if(c||(c=g.create("blockquote"),e.parentNode.insertBefore(c,e)),"BLOCKQUOTE"==e.nodeName&&c){for(s=e.firstChild;s;)c.appendChild(s.cloneNode(!0)),s=s.nextSibling;return void g.remove(e)}c.appendChild(g.remove(e))}),a?p.moveToBookmark(a):n?(p.select(o),p.collapse(1)):(d=h.getDoc().createRange(),d.setStart(o,0),d.setEnd(o,0),p.setRng(d)))):(f.editor.getDoc().execCommand("Indent"),s=i(p.getNode()),void(s.style.margin=s.dir=""))},_applyInlineStyle:function(e,n,i){function o(){var o;return t(c.select(tinymce.isWebKit&&!tinymce.isAir?"span":"font"),function(t){("mceinline"==t.style.fontFamily||"mceinline"==t.face)&&(o||(o=a.selection.getBookmark()),n._mce_new="1",c.replace(c.create(e,n),t,1))}),t(c.select(e),function(o){function r(e){1==e.nodeType&&(t(n.style,function(t,n){c.setStyle(e,n,"")}),n["class"]&&e.className&&i&&t(i.check_classes,function(t){c.hasClass(e,t)&&c.removeClass(e,t)}))}o.getAttribute("_mce_new")&&(t(c.select(e,o),r),o.parentNode&&1==o.parentNode.nodeType&&1==o.parentNode.childNodes.length&&r(o.parentNode),c.getParent(o.parentNode,function(e){return 1==e.nodeType&&(n.style&&t(n.style,function(t,n){var i;!d[n]&&(i=c.getStyle(e,n))&&(i===t&&c.setStyle(o,n,""),d[n]=1)}),n["class"]&&e.className&&i&&t(i.check_classes,function(t){c.hasClass(e,t)&&c.removeClass(o,t)})),!1}),o.removeAttribute("_mce_new"))}),t(c.select(e).reverse(),function(e){var n=0;t(c.getAttribs(e),function(t){"_"!=t.nodeName.substring(0,1)&&""!=c.getAttrib(e,t.nodeName)&&n++}),0==n&&c.remove(e,1)}),a.selection.moveToBookmark(o),!!o}var r,s=this,a=s.editor,c=a.dom,d={};e=e.toUpperCase(),i&&i.check_classes&&n["class"]&&i.check_classes.push(n["class"]),a.focus(),a.getDoc().execCommand("FontName",!1,"mceinline"),o(),(r=s._applyInlineStyle.keyhandler)&&(a.onKeyUp.remove(r),a.onKeyPress.remove(r),a.onKeyDown.remove(r),a.onSetContent.remove(s._applyInlineStyle.chandler)),a.selection.isCollapsed()?(s._pendingStyles=tinymce.extend(s._pendingStyles||{},n.style),s._applyInlineStyle.chandler=a.onSetContent.add(function(){delete s._pendingStyles}),s._applyInlineStyle.keyhandler=r=function(e){s._pendingStyles&&(n.style=s._pendingStyles,delete s._pendingStyles),o()&&(a.onKeyDown.remove(s._applyInlineStyle.keyhandler),a.onKeyPress.remove(s._applyInlineStyle.keyhandler)),"keyup"==e.type&&a.onKeyUp.remove(s._applyInlineStyle.keyhandler)},a.onKeyDown.add(r),a.onKeyPress.add(r),a.onKeyUp.add(r)):s._pendingStyles=0},_getSelectedBlocks:function(t,n){var i,o,r,s=this.editor,a=s.dom,c=s.selection,d=[];if(i=a.getParent(t||c.getStart(),e),o=a.getParent(n||c.getEnd(),e),i&&d.push(i),i&&o&&i!=o)for(r=i;(r=r.nextSibling)&&r!=o;)e(r)&&d.push(r);return o&&i!=o&&d.push(o),d}})}(),tinymce.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(e){var t=this,n=tinymce.util.Dispatcher;t.editor=e,t.data=[],t.onAdd=new n(this),t.onUndo=new n(this),t.onRedo=new n(this)},add:function(e){var t,n,i,o=this,r=o.editor,s=r.settings;if(e=e||{},e.content=e.content||r.getContent({format:"raw",no_events:1}),e.content=e.content.replace(/^\s*|\s*$/g,""),i=o.data[o.index>0&&(0==o.index||o.index==o.data.length)?o.index-1:o.index],!e.initial&&i&&e.content==i.content)return null;if(s.custom_undo_redo_levels&&o.data.length>s.custom_undo_redo_levels){for(t=0;t<o.data.length-1;t++)o.data[t]=o.data[t+1];o.data.length--,o.index=o.data.length}return s.custom_undo_redo_restore_selection&&!e.initial&&(e.bookmark=n=e.bookmark||r.selection.getBookmark()),o.index<o.data.length&&o.index++,0!==o.data.length||e.initial?(o.data.length=o.index+1,o.data[o.index++]=e,e.initial&&(o.index=0),2==o.data.length&&o.data[0].initial&&(o.data[0].bookmark=n),o.onAdd.dispatch(o,e),r.isNotDirty=0,e):null},undo:function(){var e,t=this,n=t.editor,i=i;return t.typing&&(t.add(),t.typing=0),t.index>0&&(t.index==t.data.length&&t.index>1&&(e=t.index,t.typing=0,t.add()||(t.index=e),--t.index),i=t.data[--t.index],n.setContent(i.content,{format:"raw"}),n.selection.moveToBookmark(i.bookmark),t.onUndo.dispatch(t,i)),i},redo:function(){var e=this,t=e.editor,n=null;return e.index<e.data.length-1&&(n=e.data[++e.index],t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(n.bookmark),e.onRedo.dispatch(e,n)),n},clear:function(){var e=this;e.data=[],e.index=0,e.typing=0,e.add({initial:!0})},hasUndo:function(){return 0!=this.index||this.typing},hasRedo:function(){return this.index<this.data.length-1}}),function(){var e,t,n,i,o,r;e=tinymce.dom.Event,t=tinymce.isIE,n=tinymce.isGecko,i=tinymce.isOpera,o=tinymce.each,r=tinymce.extend,tinymce.create("tinymce.ForceBlocks",{ForceBlocks:function(e){function n(e,n){i&&(n.content=n.content.replace(r.reOpera,"</"+o+">")),n.content=n.content.replace(r.rePadd,"<"+o+"$1$2$3$4$5$6></"+o+">"),t||i||!n.set?(n.content=n.content.replace(r.reBR2Nbsp,"<"+o+"$1$2></"+o+">"),n.content=n.content.replace(r.reTrailBr,"</"+o+">")):(n.content=n.content.replace(r.reNbsp2BR1,"<"+o+"$1$2><br /></"+o+">"),n.content=n.content.replace(r.reNbsp2BR2,"<"+o+"$1$2><br /></"+o+">"))}var o,r=this,s=e.settings;r.editor=e,r.dom=e.dom,o=(s.forced_root_block||"p").toLowerCase(),s.element=o.toUpperCase(),e.onPreInit.add(r.setup,r),r.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+o+">","gi"),r.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,o),"gi"),r.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,o),"gi"),r.reNbsp2BR2=new RegExp("<p( )([^>]+)>(&nbsp;|&#160;)<\\/p>|<p>(&nbsp;|&#160;)<\\/p>".replace(/p/g,o),"gi"),r.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,o),"gi"),r.reTrailBr=new RegExp("\\s*<br \\/>\\s*<\\/p>".replace(/p/g,o),"gi"),e.onBeforeSetContent.add(n),e.onPostProcess.add(n),s.forced_root_block&&(e.onInit.add(r.forceRoots,r),e.onSetContent.add(r.forceRoots,r),e.onBeforeGetContent.add(r.forceRoots,r))},setup:function(){function i(e,t){var n=s.dom.create(t);return o(e.attributes,function(e){e.specified&&e.nodeValue&&n.setAttribute(e.nodeName.toLowerCase(),e.nodeValue)}),o(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),e.parentNode.replaceChild(n,e),n}var r=this,s=r.editor,a=s.settings;return a.forced_root_block&&(s.onKeyUp.add(r.forceRoots,r),s.onPreProcess.add(r.forceRoots,r)),a.force_br_newlines?void(t&&s.onKeyPress.add(function(t,n){var i,o=t.selection;return 13==n.keyCode&&"LI"!=o.getNode().nodeName?(o.setContent('<br id="__" /> ',{format:"raw"}),i=t.dom.get("__"),i.removeAttribute("id"),o.select(i),o.collapse(),e.cancel(n)):void 0})):(!t&&a.force_p_newlines&&(s.onKeyPress.add(function(t,n){13!=n.keyCode||n.shiftKey||r.insertPara(n)||e.cancel(n)}),n&&s.onKeyDown.add(function(e,t){8!=t.keyCode&&46!=t.keyCode||t.shiftKey||r.backspaceDelete(t,8==t.keyCode)})),void(t&&"P"!=a.element&&(s.onKeyPress.add(function(e){r.lastElm=e.selection.getNode().nodeName}),s.onKeyUp.add(function(e,t){var n,o=e.selection,s=o.getNode(),c=e.getBody();1===c.childNodes.length&&"P"==s.nodeName?(s=i(s,a.element),o.select(s),o.collapse(),e.nodeChanged()):13!=t.keyCode||t.shiftKey||"P"==r.lastElm||(n=e.dom.getParent(s,"P"),n&&(i(n,a.element),e.nodeChanged()))}))))},find:function(e,t,n){for(var i=this.editor,o=i.getDoc().createTreeWalker(e,4,null,!1),r=-1;e=o.nextNode();){if(r++,0==t&&e==n)return r;if(1==t&&r==n)return e}return-1},forceRoots:function(e){var n,i,o,r,s,a,c,d,l,u,m,f,h=this,e=h.editor,p=e.getBody(),g=e.getDoc(),y=e.selection,v=y.getSel(),_=y.getRng(),b=-2,C=-16777215,w=p.childNodes;for(u=w.length-1;u>=0;u--)s=w[u],3==s.nodeType||!h.dom.isBlock(s)&&8!=s.nodeType?a?a.hasChildNodes()?a.insertBefore(s,a.firstChild):a.appendChild(s):(3!=s.nodeType||/[^\s]/g.test(s.nodeValue))&&(-2==b&&_&&(t?(r=g.body.createTextRange(),r.moveToElementText(p),r.collapse(1),c=-1*r.move("character",C),r=_.duplicate(),r.collapse(1),d=-1*r.move("character",C),r=_.duplicate(),r.collapse(0),l=-1*r.move("character",C)-d,b=d-c,n=l):1==_.startContainer.nodeType&&(m=_.startContainer.childNodes[_.startOffset])&&1==m.nodeType?(f=m.getAttribute("id"),m.setAttribute("id","__mce")):e.dom.getParent(_.startContainer,function(e){return e===p})&&(i=_.startOffset,o=_.endOffset,b=h.find(p,0,_.startContainer),n=h.find(p,0,_.endContainer))),a=e.dom.create(e.settings.forced_root_block),a.appendChild(s.cloneNode(1)),s.parentNode.replaceChild(a,s)):a=null;if(-2!=b)if(t)try{_=v.createRange(),_.moveToElementText(p),_.collapse(1),_.moveStart("character",b),_.moveEnd("character",n),_.select()}catch(x){}else a=p.getElementsByTagName(e.settings.element)[0],_=g.createRange(),-1!=b?_.setStart(h.find(p,1,b),i):_.setStart(a,0),-1!=n?_.setEnd(h.find(p,1,n),o):_.setEnd(a,0),v&&(v.removeAllRanges(),v.addRange(_));else!t&&(m=e.dom.get("__mce"))&&(f?m.setAttribute("id",f):m.removeAttribute("id"),_=g.createRange(),_.setStartBefore(m),_.setEndBefore(m),y.setRng(_))},getParentBlock:function(e){var t=this.dom;return t.getParent(e,t.isBlock)},insertPara:function(){function e(e){return e=e.innerHTML,e=e.replace(/<(img|hr|table)/gi,"-"),e=e.replace(/<[^>]+>/g,""),""==e.replace(/[ \t\r\n]+/g,"")}function t(e,t){var n,o,r,s=[];if(e.innerHTML="",M.keep_styles){o=t;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(o.nodeName)&&(n=o.cloneNode(!1),k.setAttrib(n,"id",""),s.push(n));while(o=o.parentNode)}if(s.length>0){for(r=s.length-1,n=e;r>=0;r--)n=n.appendChild(s[r]);return s[0].innerHTML=i?"&nbsp;":"<br />",s[0]}e.innerHTML=i?"&nbsp;":"<br />"}function o(e){return E.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1).nextNode()||e}var r,s,a,c,d,l,u,m,f,h,p,g,y,v,_,b,C,w,x=this,S=x.editor,k=S.dom,E=S.getDoc(),M=S.settings,T=S.selection.getSel(),N=T.getRangeAt(0),R=E.body,A=k.getViewPort(S.getWin());if(r=E.createRange(),r.setStart(T.anchorNode,T.anchorOffset),r.collapse(!0),s=E.createRange(),s.setStart(T.focusNode,T.focusOffset),s.collapse(!0),a=r.compareBoundaryPoints(r.START_TO_END,s)<0,c=a?T.anchorNode:T.focusNode,d=a?T.anchorOffset:T.focusOffset,l=a?T.focusNode:T.anchorNode,u=a?T.focusOffset:T.anchorOffset,c===l&&/^(TD|TH)$/.test(c.nodeName))return k.remove(c.firstChild),S.dom.add(c,M.element,null,"<br />"),g=S.dom.add(c,M.element,null,"<br />"),N=E.createRange(),N.selectNodeContents(g),N.collapse(1),S.selection.setRng(N),!1;if(c==R&&l==R&&R.firstChild&&S.dom.isBlock(R.firstChild)&&(c=l=c.firstChild,d=u=0,r=E.createRange(),r.setStart(c,0),s=E.createRange(),s.setStart(l,0)),c="HTML"==c.nodeName?E.body:c,c="BODY"==c.nodeName?c.firstChild:c,l="HTML"==l.nodeName?E.body:l,l="BODY"==l.nodeName?l.firstChild:l,m=x.getParentBlock(c),f=x.getParentBlock(l),h=m?m.nodeName:M.element,x.dom.getParent(m,function(e){return/OL|UL|PRE/.test(e.nodeName)}))return!0;m&&("CAPTION"==m.nodeName||/absolute|relative|static/gi.test(m.style.position))&&(h=M.element,m=null),f&&("CAPTION"==f.nodeName||/absolute|relative|static/gi.test(f.style.position))&&(h=M.element,f=null),(/(TD|TABLE|TH|CAPTION)/.test(h)||m&&"DIV"==h&&/left|right/gi.test(m.style.cssFloat))&&(h=M.element,m=f=null),p=m&&m.nodeName==h?m.cloneNode(0):S.dom.create(h),g=f&&f.nodeName==h?f.cloneNode(0):S.dom.create(h),g.removeAttribute("id"),/^(H[1-6])$/.test(h)&&c.nodeValue&&d==c.nodeValue.length&&(g=S.dom.create(M.element)),_=y=c;do{if(_==R||9==_.nodeType||x.dom.isBlock(_)||/(TD|TABLE|TH|CAPTION)/.test(_.nodeName))break;y=_}while(_=_.previousSibling?_.previousSibling:_.parentNode);_=v=l;do{if(_==R||9==_.nodeType||x.dom.isBlock(_)||/(TD|TABLE|TH|CAPTION)/.test(_.nodeName))break;v=_}while(_=_.nextSibling?_.nextSibling:_.parentNode);y.nodeName==h?r.setStart(y,0):r.setStartBefore(y),r.setEnd(c,d),p.appendChild(r.cloneContents()||E.createTextNode(""));try{s.setEndAfter(v)}catch(I){}return s.setStart(l,u),g.appendChild(s.cloneContents()||E.createTextNode("")),N=E.createRange(),y.previousSibling||y.parentNode.nodeName!=h?r.startContainer.nodeName==h&&0==r.startOffset?N.setStartBefore(r.startContainer):N.setStart(r.startContainer,r.startOffset):N.setStartBefore(y.parentNode),v.nextSibling||v.parentNode.nodeName!=h?N.setEnd(s.endContainer,s.endOffset):N.setEndAfter(v.parentNode),N.deleteContents(),i&&S.getWin().scrollTo(0,A.y),p.firstChild&&p.firstChild.nodeName==h&&(p.innerHTML=p.firstChild.innerHTML),g.firstChild&&g.firstChild.nodeName==h&&(g.innerHTML=g.firstChild.innerHTML),e(p)&&(p.innerHTML="<br />"),e(g)&&(w=t(g,l)),i&&parseFloat(opera.version())<9.5?(N.insertNode(p),N.insertNode(g)):(N.insertNode(g),N.insertNode(p)),g.normalize(),p.normalize(),N=E.createRange(),N.selectNodeContents(n?o(w||g):w||g),N.collapse(1),T.removeAllRanges(),T.addRange(N),b=S.dom.getPos(g).y,C=g.clientHeight,(b<A.y||b+C>A.y+A.h)&&S.getWin().scrollTo(0,b<A.y?b:b-A.h+25),!1},backspaceDelete:function(t,n){function i(t){var n;if(t=t.target,t&&t.parentNode&&"BR"==t.nodeName&&(o=a.getParentBlock(t))){if(n=t.previousSibling,e.remove(d,"DOMNodeInserted",i),n&&3==n.nodeType&&/\s+$/.test(n.nodeValue))return;(t.previousSibling||t.nextSibling)&&c.dom.remove(t)}}var o,o,r,s,a=this,c=a.editor,d=c.getBody(),l=c.selection,u=l.getRng(),m=u.startContainer;if(m&&c.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&n&&(0==m.childNodes.length||1==m.childNodes.length&&"BR"==m.firstChild.nodeName)){for(o=m;(o=o.previousSibling)&&!c.dom.isBlock(o););if(o){if(m!=d.firstChild){for(r=c.dom.doc.createTreeWalker(o,NodeFilter.SHOW_TEXT,null,!1);s=r.nextNode();)o=s;u=c.getDoc().createRange(),u.setStart(o,o.nodeValue?o.nodeValue.length:0),u.setEnd(o,o.nodeValue?o.nodeValue.length:0),l.setRng(u),c.dom.remove(m)}return e.cancel(t)}}e._add(d,"DOMNodeInserted",i),window.setTimeout(function(){e._remove(d,"DOMNodeInserted",i)},1)}})}(),function(){var e=(tinymce.DOM,tinymce.dom.Event),t=tinymce.each,n=tinymce.extend;tinymce.create("tinymce.ControlManager",{ControlManager:function(e,n){var i=this;n=n||{},i.editor=e,i.controls={},i.onAdd=new tinymce.util.Dispatcher(i),i.onPostRender=new tinymce.util.Dispatcher(i),i.prefix=n.prefix||e.id+"_",i._cls={},i.onPostRender.add(function(){t(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var n,i=this,o=i.editor;switch(t(o.plugins,function(t){return t.createControl&&(n=t.createControl(e,i))?!1:void 0}),e){case"|":case"separator":return i.createSeparator()}return!n&&o.buttons&&(n=o.buttons[e])?i.createButton(e,n):i.add(n)},createDropMenu:function(e,t,i){var o,r,s,a,c=this,d=c.editor;return t=n({"class":"mceDropDown",constrain:d.settings.constrain_menus},t),t["class"]=t["class"]+" "+d.getParam("skin")+"Skin",(s=d.getParam("skin_variant"))&&(t["class"]+=" "+d.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),e=c.prefix+e,a=i||c._cls.dropmenu||tinymce.ui.DropMenu,o=c.controls[e]=new a(e,t),o.onAddItem.add(function(e,t){var n=t.settings;n.title=d.getLang(n.title,n.title),n.onclick||(n.onclick=function(){d.execCommand(n.cmd,n.ui||!1,n.value)})}),d.onRemove.add(function(){o.destroy()}),tinymce.isIE&&(o.onShowMenu.add(function(){r=d.selection.getBookmark(1)}),o.onHideMenu.add(function(){r&&d.selection.moveToBookmark(r)})),c.add(o)},createListBox:function(t,i,o){var r,s,a=this,c=a.editor;return a.get(t)?null:(i.title=c.translate(i.title),i.scope=i.scope||c,i.onselect||(i.onselect=function(e){c.execCommand(i.cmd,i.ui||!1,e||i.value)}),i=n({title:i.title,"class":"mce_"+t,scope:i.scope,control_manager:a},i),t=a.prefix+t,c.settings.use_native_selects?r=new tinymce.ui.NativeListBox(t,i):(s=o||a._cls.listbox||tinymce.ui.ListBox,r=new s(t,i)),a.controls[t]=r,tinymce.isWebKit&&r.onPostRender.add(function(t,n){e.add(n,"mousedown",function(){c.bookmark=c.selection.getBookmark("simple")}),e.add(n,"focus",function(){c.selection.moveToBookmark(c.bookmark),c.bookmark=null})}),r.hideMenu&&c.onMouseDown.add(r.hideMenu,r),a.add(r))},createButton:function(e,t,i){var o,r,s=this,a=s.editor;return s.get(e)?null:(t.title=a.translate(t.title),t.label=a.translate(t.label),t.scope=t.scope||a,t.onclick||t.menu_button||(t.onclick=function(){a.execCommand(t.cmd,t.ui||!1,t.value)}),t=n({title:t.title,"class":"mce_"+e,unavailable_prefix:a.getLang("unavailable",""),scope:t.scope,control_manager:s},t),e=s.prefix+e,t.menu_button?(r=i||s._cls.menubutton||tinymce.ui.MenuButton,o=new r(e,t),a.onMouseDown.add(o.hideMenu,o)):(r=s._cls.button||tinymce.ui.Button,o=new r(e,t)),s.add(o))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(e,t,i){var o,r,s=this,a=s.editor;return s.get(e)?null:(t.title=a.translate(t.title),t.scope=t.scope||a,t.onclick||(t.onclick=function(e){a.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){a.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=n({title:t.title,"class":"mce_"+e,scope:t.scope,control_manager:s},t),e=s.prefix+e,r=i||s._cls.splitbutton||tinymce.ui.SplitButton,o=s.add(new r(e,t)),a.onMouseDown.add(o.hideMenu,o),o)},createColorSplitButton:function(e,t,i){var o,r,s,a=this,c=a.editor;return a.get(e)?null:(t.title=c.translate(t.title),t.scope=t.scope||c,t.onclick||(t.onclick=function(e){c.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){c.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=n({title:t.title,"class":"mce_"+e,menu_class:c.getParam("skin")+"Skin",scope:t.scope,more_colors_title:c.getLang("more_colors")},t),e=a.prefix+e,r=i||a._cls.colorsplitbutton||tinymce.ui.ColorSplitButton,o=new r(e,t),c.onMouseDown.add(o.hideMenu,o),c.onRemove.add(function(){o.destroy()}),tinymce.isIE&&(o.onShowMenu.add(function(){s=c.selection.getBookmark(1)}),o.onHideMenu.add(function(){s&&(c.selection.moveToBookmark(s),s=0)})),a.add(o))},createToolbar:function(e,t,n){var i,o,r=this;return e=r.prefix+e,o=n||r._cls.toolbar||tinymce.ui.Toolbar,i=new o(e,t),r.get(e)?null:r.add(i)},createSeparator:function(e){var t=e||this._cls.separator||tinymce.ui.Separator;return new t},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){t(this.controls,function(e){e.destroy()}),this.controls=null}})}(),function(){var e=tinymce.util.Dispatcher,t=tinymce.each,n=tinymce.isIE,i=tinymce.isOpera;tinymce.create("tinymce.WindowManager",{WindowManager:function(t){var n=this;n.editor=t,n.onOpen=new e(n),n.onClose=new e(n),n.params={},n.features={}},open:function(e,o){var r,s,a,c,d=this,l="",u="modal"==d.editor.settings.dialog_type,m=tinymce.DOM.getViewPort();e=e||{},o=o||{},s=i?m.w:screen.width,a=i?m.h:screen.height,e.name=e.name||"mc_"+(new Date).getTime(),e.width=parseInt(e.width||320),e.height=parseInt(e.height||240),e.resizable=!0,e.left=e.left||parseInt(s/2)-e.width/2,e.top=e.top||parseInt(a/2)-e.height/2,o.inline=!1,o.mce_width=e.width,o.mce_height=e.height,o.mce_auto_focus=e.auto_focus,u&&n&&(e.center=!0,e.help=!1,e.dialogWidth=e.width+"px",e.dialogHeight=e.height+"px",e.scroll=e.scrollbars||!1),t(e,function(e,t){tinymce.is(e,"boolean")&&(e=e?"yes":"no"),/^(name|url)$/.test(t)||(l+=n&&u?(l?";":"")+t+":"+e:(l?",":"")+t+"="+e)}),d.features=e,d.params=o,d.onOpen.dispatch(d,e,o),c=e.url||e.file,tinymce.relaxedDomain&&(c+=(-1==c.indexOf("?")?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),c=tinymce._addVer(c);try{n&&u?(r=1,window.showModalDialog(c,window,l)):r=window.open(c,e.name,l)}catch(f){}r||alert(d.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(e,t,n,i,o,r){var s=tinymce.resolve(e);return new s(t,n,i,o,r)},confirm:function(e,t,n,i){i=i||window,t.call(n||this,i.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,i){var o=this;i=i||window,i.alert(o._decode(o.editor.getLang(e,e))),t&&t.call(n||o)},_decode:function(e){return tinymce.DOM.decode(e).replace(/\\n/g,"\n")}})}();