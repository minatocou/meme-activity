<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{i18n.createQuestionnaire }}</title>
    {{> meta}}

    <link rel="stylesheet" href="/css/build/src/views/questionnaire/create-question.css?t=1493261397671" />
</head>
<body data-preview="{{preview}}">
{{>header}}
<div class="main-container">
    {{>sidebar}}
    <div class="right-content-frame">
        <div class="block-nav-top justify-container">
            <h4 class="justify-item">{{i18n.createQuestionnaire}}</h4>
            <button type="button" class="btn btn-danger" data-save-question>{{i18n.save}}{{i18n.questionnaireInfo}}</button>
        </div>

        <div class="data-container-wrap p-12">
            <div class="col-xs-5 p-0 h-100p">
                <div class="panel panel-default mb-0 h-100p ov-auto">
                  <div class="panel-heading">{{i18n.preview}}</div>
                  <div class="panel-body" data-hide>
                        <h3 class="font-20"><strong data-bind="questionSummaryTitle"></strong></h3>
                        <div data-bind="questionSummaryIntro" style="word-break: break-word;"></div>
                        <div class="preview-container mt-20">
                            <ol class="question-preview-list">

                            </ol>
                        </div>
                  </div>
                </div>
            </div>
            <div class="col-xs-7 pr-0 h-100p">
                <div class=" h-100p  bt-1 ov-auto">
                    <div class="panel panel-default">
                      <div class="panel-heading">{{i18n.baseInfo}}</div>
                      <div class="panel-body">
                        <ul class="list-inline col-xs-offset-1">
                            <li class="radio p-0 mr-10" data-toggle="tab" data-target="#defined-question">
                                <label class="control-label" role="button" for>
                                    <input type="radio" name="questionFrom" checked> {{i18n.definedQuestion}}
                                </label>
                            </li>
                            <li class="radio p-0 mr-10" data-toggle="tab" data-target="#outside-chain">
                                <label class="control-label" role="button" for>
                                    <input type="radio" name="questionFrom" value="link"> {{i18n.outsideLink}}
                                </label>
                            </li>
                        </ul>
                        <div class="tab-content mt-20">
                            <form class="form-horizontal tab-pane active" id="defined-question" role="form">
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">{{i18n.title}}</label>
                                    <div class="radio col-sm-10 pt-0">
                                        <input type="text" data-publish class="form-control" name="questionSummaryTitle">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">{{i18n.explain}}</label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control" name="questionSummaryIntro" data-publish style="resize:vertical;"></textarea>
                                    </div>
                                </div>
                            </form>
                            <form class="form-horizontal tab-pane" id="outside-chain" role="form">
                                <div class="form-group">
                                    <input type="text" class="hide" name="">
                                    <label class="col-sm-2 control-label">{{i18n.link}}</label>
                                    <div class="radio col-sm-10 pt-0">
                                        <input type="url" class="form-control" name="url">
                                    </div>
                                </div>
                            </form>
                        </div>
                      </div>
                    </div>
                    <div class="panel panel-default mb-0" data-hide>
                        <div class="panel-heading clearfix">
                            {{i18n.questionInfo}}
                            <button class="btn btn-primary btn-sm pull-right" data-role="addNewQuestion">
                                <i class="fa fa-plus"></i>{{i18n.addNewQuestion}}
                            </button>
                        </div>
                        <div class="panel-body">
                            <div class="mb-20 clearfix">
                                <div class="col-xs-2 pl-10">
                                    <label>{{i18n.type}}：</label>
                                </div>
                                <div class="radio col-xs-10 m-0">
                                    <label class="control-label mr-10">
                                        <input type="radio" name="type" data-tmpl-id="radioCheckboxType" value="1"> {{i18n.radioType}}
                                    </label>
                                    <label class="control-label mr-10">
                                        <input type="radio" name="type" data-tmpl-id="radioCheckboxType" value="2"> {{i18n.checkboxType}}
                                    </label>
                                    <label class="control-label">
                                        <input type="radio" name="type" data-tmpl-id="writeType" value="3"> {{i18n.writeType}}
                                    </label>
                                </div>
                            </div>
                            <hr>
                            <div class="checkbox changeRelatedProperty pl-10">
                                <label>
                                    <input type="checkbox" class="related-or-not" name="" id="">{{i18n.relatedProperty}}
                                </label>
                                <div class="inline-block">
                                    <select class="form-control" name="relatedProperty" style="display: none;">
                                    </select>
                                </div>
                            </div>
                            <div>
                                 <div class="pl-10">
                                     <div class="checkbox">
                                         <label>
                                             <input type="checkbox" name="is_required" value="1" id="">{{i18n.mustSubmit}}
                                         </label>
                                         <div class="inline-block">
                                             
                                         </div>
                                     </div>
                                 </div>
                                 <hr>
                                 <div class="question-setting-container">
                                     
                                 </div> 
                            </div>
                        </div>
                    
                        <!-- <div class="mx-20 mb-20">
                            <button class="btn btn-primary" data-modal="add-property-modal" data-toggle="modal">
                                <i class="fa fa-plus"></i>{{i18n.addNewQuestion}}
                            </button>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
        {{>ajaxLoading}}
    </div>
</div>
<script type="text/html" id="radioCheckboxType">
    <div class="pl-10">
        <label>{{i18n.title}}：</label>
        <div class="clearfix mb-20">
            <span class="pt-7 col-xs-2">[<span data-bind="relatedProperty"></span>]</span>
            <div class="col-xs-10">
                <input placeholder="{{i18n.title}}" class="form-control" name="questionTitle">
            </div>
        </div>
    </div>
    <label class="pl-10">{{i18n.option}}：<i class="fa fa-plus-square-o fa-lg" data-create="plus" role="button"></i></label>
    ${include 'question-panel'}
</script>

<script type="text/html" id="writeType">

    <div class="pl-10">
        <label>{{i18n.title}}：</label>
        <div class="clearfix mb-20">
            <div class="col-xs-12 p-0">
                <input placeholder="{{i18n.title}}" class="form-control" name="questionTitle">
            </div>
        </div>
    </div>
    <!-- <div class="pl-10">
        <label>{{i18n.defaultContent}}：</label>
        <div class="clearfix mb-20">
            <div class="col-xs-12 p-0">
                <textarea placeholder="{{i18n.defaultContent}}" class="form-control" style="resize: vertical;"></textarea>
            </div>
        </div>
    </div> -->
</script>

<script type="text/html" id="question-panel">
    <div class="form-group">
        <ol class="question-option-list">
            ${include 'option-item-tmpl'}
        </ol>
    </div>
</script>

<script type="text/html" id="option-item-tmpl">
${if tags}
    ${each tags}
        <li>
            <div class="option-container">
                <span class="col-sm-2">${if $value.tag_title}[<span data-bind="tags">${$value.tag_title}</span>]${/if}</span>
                <div class="col-sm-9">
                    <input type="text" data-tag-id="${$value.tag_id}"" placeholder="{{i18n.option}}" class="form-control" name="optionTag">
                </div>
                <i class="fa fa-minus-square-o fa-lg" data-create="minus" role="button"></i>
            </div>
        </li>
    ${/each}
${else}
    <li>
        <div class="option-container">
            <span class="col-sm-2"></span>
            <div class="col-sm-9">
                <input type="text" placeholder="{{i18n.option}}" class="form-control" name="optionTag">
            </div>
            <i class="fa fa-minus-square-o fa-lg" data-create="minus" role="button"></i>
        </div>
    </li>
    <li>
        <div class="option-container">
            <span class="col-sm-2"></span>
            <div class="col-sm-9">
                <input type="text" placeholder="{{i18n.option}}" class="form-control" name="optionTag">
            </div>
            <i class="fa fa-minus-square-o fa-lg" data-create="minus" role="button"></i>
        </div>
    </li>
${/if}
</script>
<script type="text/html" id="question-preview-tmpl">
${each data as v i}
    <li data-stringify="${v.dataStringify}">
        <label>
            ${v.title} ${if v.is_required == '1'} <span class="color-warning">*</span>${/if}
            <div class="close hide" data-role="remove-question">×</div>
        </label>
        <div class="${if v.type == '1'}radio${else}checkbox${/if}">
            ${each v.options}
                <label>
                    <input type="${if v.type == '1'}radio${else}checkbox${/if}" name="question_preview_${v.dataStringify}">${$value.value}
                </label>&nbsp;&nbsp;&nbsp;
            ${/each}
            ${if v.type == '3'}
                <div>${}</div>
                <textarea class="form-control" style="resize:vertical;">
                    
                </textarea>
            ${/if}
        </div>
        <!-- <div class="question-edit-trigger">
            <i class="fa fa-pencil mt-20" role="button" data-edit-question-item></i>
        </div> -->
    </li>
${/each}
</script>

<script type="text/javascript" src="/js/build/src/views/questionnaire/create-question.js?t=1493261397671"></script>
</body>
</html>
